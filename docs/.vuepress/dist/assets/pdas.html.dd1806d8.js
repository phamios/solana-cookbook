import{_ as d,r as n,o as i,c,a as e,b as o,w as t,F as m,d as a,e as p}from"./app.07ce7a66.js";var u="/assets/account-matrix.c3a79f80.png",l="/assets/pda-curve.7c0b9307.png";const h={},_=e("h1",{id:"enderecos-derivados-de-programa-pdas",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#enderecos-derivados-de-programa-pdas","aria-hidden":"true"},"#"),a(" Endere\xE7os Derivados de Programa (PDAs)")],-1),g=a("Os Endere\xE7os Derivados de Programa (PDAs) abrigam contas que s\xE3o projetadas para serem controladas por um programa espec\xEDfico. Com os PDAs, os programas podem assinar programaticamente para determinados endere\xE7os sem precisar de uma chave privada. Os PDAs servem como base para a "),v={href:"https://docs.solana.com/developing/programming-model/calling-between-programs#cross-program-invocations",target:"_blank",rel:"noopener noreferrer"},f=a("Invoca\xE7\xE3o de Programas Cruzados (CPI)"),b=a(", que permite que os aplicativos da Solana sejam compon\xEDveis uns com os outros."),P=e("h2",{id:"fatos",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#fatos","aria-hidden":"true"},"#"),a(" Fatos")],-1),A={class:"custom-container tip"},D=e("p",{class:"custom-container-title"},"Ficha Informativa",-1),x=e("li",null,"Os PDAs s\xE3o strings de 32 bytes que se parecem com chaves p\xFAblicas, mas n\xE3o possuem chaves privadas correspondentes",-1),q=e("li",null,[a("A fun\xE7\xE3o "),e("code",null,"findProgramAddress"),a(" \xE9 usada para derivar de forma determin\xEDstica um PDA a partir de um programId e sementes (cole\xE7\xE3o de bytes)")],-1),k=e("li",null,"Um bump (um byte) \xE9 usado para afastar potenciais PDAs da curva el\xEDptica ed25519",-1),I=a("Programas podem assinar seus PDAs fornecendo as sementes e o bump para a fun\xE7\xE3o "),w={href:"https://docs.solana.com/developing/programming-model/calling-between-programs#program-signed-accounts",target:"_blank",rel:"noopener noreferrer"},C=a("invoke_signed"),O=e("li",null,"Um PDA s\xF3 pode ser assinado pelo programa do qual foi derivado",-1),y=a("Al\xE9m de permitir que programas assinem diferentes instru\xE7\xF5es, os PDAs tamb\xE9m fornecem uma interface similar a um hashmap para "),E=a("indexar contas"),N=p('<h2 id="mergulho-profundo" tabindex="-1"><a class="header-anchor" href="#mergulho-profundo" aria-hidden="true">#</a> Mergulho Profundo</h2><p>Os PDAs s\xE3o blocos de constru\xE7\xE3o essenciais para o desenvolvimento de programas na Solana. Com os PDAs, os programas podem assinar contas garantindo que nenhum usu\xE1rio externo possa gerar uma assinatura v\xE1lida para a mesma conta. Al\xE9m de assinar as contas, certos programas tamb\xE9m podem modificar as contas mantidas em seus PDAs.</p><p><img src="'+u+'" alt="Matriz de Contas"></p><p><small style="text-align:center;display:block;">Imagem cortesia de <a href="https://twitter.com/pencilflip">Pencilflip</a></small></p><h3 id="gerando-pdas" tabindex="-1"><a class="header-anchor" href="#gerando-pdas" aria-hidden="true">#</a> Gerando PDAs</h3><p>Para entender o conceito por tr\xE1s dos PDAs, pode ser \xFAtil considerar que os PDAs n\xE3o s\xE3o tecnicamente criados, mas sim encontrados. Os PDAs s\xE3o gerados a partir de uma combina\xE7\xE3o de sementes (como a string <code>&quot;vote_account&quot;</code>) e um ID de programa. Essa combina\xE7\xE3o de sementes e ID de programa \xE9 ent\xE3o executada atrav\xE9s de uma fun\xE7\xE3o hash sha256 para verificar se \xE9 gerada uma chave p\xFAblica que est\xE1 na curva el\xEDptica ed25519.</p><p>Ao executar nosso ID de programa e sementes atrav\xE9s de uma fun\xE7\xE3o hash, h\xE1 uma chance de ~50% de que acabaremos com uma chave p\xFAblica v\xE1lida que est\xE1 na curva el\xEDptica. Nesse caso, simplesmente adicionamos algo para ajustar nossa entrada um pouco e tentamos novamente. O termo t\xE9cnico para esse fator de ajuste \xE9 um bump. Na Solana, come\xE7amos com bump = 255 e simplesmente iteramos para baixo atrav\xE9s de bump = 254, bump = 253, etc. at\xE9 obtermos um endere\xE7o que n\xE3o esteja na curva el\xEDptica. Isso pode parecer rudimentar, mas uma vez encontrado, nos d\xE1 uma maneira determin\xEDstica de derivar o mesmo PDA repetidamente.</p><p><img src="'+l+'" alt="O PDA na curva el\xEDptica"></p><h3 id="interagindo-com-pdas" tabindex="-1"><a class="header-anchor" href="#interagindo-com-pdas" aria-hidden="true">#</a> Interagindo com PDAs</h3>',9),j=a("Quando um PDA \xE9 gerado, "),z=e("code",null,"findProgramAddress",-1),L=a(" retornar\xE1 tanto o endere\xE7o quanto o bump usado para remover o endere\xE7o da curva el\xEDptica. Com esse bump, um programa pode "),F=a("assinar"),S=a(" qualquer instru\xE7\xE3o que requer o PDA. Para assinar, os programas devem passar a instru\xE7\xE3o, a lista de contas e as sementes e o bump usados para derivar o PDA para "),V=e("code",null,"invoke_signed",-1),B=a(". Al\xE9m de assinar as instru\xE7\xF5es, os PDAs tamb\xE9m devem assinar a pr\xF3pria cria\xE7\xE3o atrav\xE9s de "),M=e("code",null,"invoke_signed",-1),R=a("."),U=a("Ao construir com PDAs, \xE9 comum "),G={href:"https://github.com/solana-labs/solana-program-library/blob/78e29e9238e555967b9125799d7d420d7d12b959/token-swap/program/src/state.rs#L100",target:"_blank",rel:"noopener noreferrer"},Q=a("armazenar a semente do bump"),T=a(" nos dados da conta em si. Isso permite que os desenvolvedores validem facilmente um PDA sem precisar passar o bump como um argumento de instru\xE7\xE3o."),H=e("h2",{id:"outros-recursos",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#outros-recursos","aria-hidden":"true"},"#"),a(" Outros recursos:")],-1),J={href:"https://docs.solana.com/developing/programming-model/calling-between-programs#program-derived-addresses",target:"_blank",rel:"noopener noreferrer"},K=a("Documenta\xE7\xE3o Oficial"),W={href:"https://www.brianfriel.xyz/understanding-program-derived-addresses/",target:"_blank",rel:"noopener noreferrer"},X=a("Compreendendo os Endere\xE7os Derivados de Programa");function Y(Z,$){const s=n("ExternalLinkIcon"),r=n("RouterLink");return i(),c(m,null,[_,e("p",null,[g,e("a",v,[f,o(s)]),b]),P,e("div",A,[D,e("ul",null,[x,q,k,e("li",null,[I,e("a",w,[C,o(s)])]),O,e("li",null,[y,o(r,{to:"/pt/guides/account-maps.html"},{default:t(()=>[E]),_:1})])])]),N,e("p",null,[j,z,L,o(r,{to:"/pt/references/accounts.html#sign-with-a-pda"},{default:t(()=>[F]),_:1}),S,V,B,M,R]),e("p",null,[U,e("a",G,[Q,o(s)]),T]),H,e("ul",null,[e("li",null,[e("a",J,[K,o(s)])]),e("li",null,[e("a",W,[X,o(s)])])])],64)}var ae=d(h,[["render",Y]]);export{ae as default};
