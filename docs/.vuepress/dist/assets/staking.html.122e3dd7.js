import{_ as r,r as e,o as k,c as b,b as t,w as a,a as n,F as m,d as s}from"./app.07ce7a66.js";const d={},w=n("h1",{id:"\u30B9\u30C6\u30FC\u30AD\u30F3\u30AF\u3099",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u30B9\u30C6\u30FC\u30AD\u30F3\u30AF\u3099","aria-hidden":"true"},"#"),s(" \u30B9\u30C6\u30FC\u30AD\u30F3\u30B0")],-1),g=n("h2",{id:"\u73FE\u5728\u306E\u30CF\u3099\u30EA\u30C6\u3099\u30FC\u30BF\u3092\u53D6\u5F97",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u73FE\u5728\u306E\u30CF\u3099\u30EA\u30C6\u3099\u30FC\u30BF\u3092\u53D6\u5F97","aria-hidden":"true"},"#"),s(" \u73FE\u5728\u306E\u30D0\u30EA\u30C7\u30FC\u30BF\u3092\u53D6\u5F97")],-1),y=n("p",null,"SOL\u3092\u30B9\u30C6\u30FC\u30AF\u3057\u3066\u3001\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u5B89\u5168\u3092\u78BA\u4FDD\u3059\u308B\u305F\u3081\u306E\u5831\u916C\u3092\u5F97\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002\u30B9\u30C6\u30FC\u30AF\u3059\u308B\u306B\u306F\u3001\u30C8\u30E9\u30F3\u30B6\u30AF\u30B7\u30E7\u30F3\u3092\u51E6\u7406\u3059\u308B\u30D0\u30EA\u30C7\u30FC\u30BF\u30FC\u306BSOL\u3092\u59D4\u4EFB\u3057\u307E\u3059\u3002",-1),h=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" clusterApiUrl"),n("span",{class:"token punctuation"},","),s(" Connection "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Get all validators, categorized by current (i.e. active) and deliquent (i.e. inactive)"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" current"),n("span",{class:"token punctuation"},","),s(" delinquent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getVoteAccounts"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"current validators: "'),n("span",{class:"token punctuation"},","),s(" current"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"all validators: "'),n("span",{class:"token punctuation"},","),s(" current"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"concat"),n("span",{class:"token punctuation"},"("),s("delinquent"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br")])],-1),f=n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,`solana validators
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br")])],-1),S=n("h2",{id:"\u30B9\u30C6\u30FC\u30AF\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u4F5C\u6210",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u30B9\u30C6\u30FC\u30AF\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u4F5C\u6210","aria-hidden":"true"},"#"),s(" \u30B9\u30C6\u30FC\u30AF\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u4F5C\u6210")],-1),A=s("\u30B9\u30C6\u30FC\u30AD\u30F3\u30B0\u306B\u95A2\u3059\u308B\u3059\u3079\u3066\u306E\u30A4\u30F3\u30B9\u30C8\u30E9\u30AF\u30B7\u30E7\u30F3\u306F"),T={href:"https://docs.solana.com/developing/runtime-facilities/programs#stake-program",target:"_blank",rel:"noopener noreferrer"},_=s("Stake Program"),v=s("\u306B\u3088\u3063\u3066\u51E6\u7406\u3055\u308C\u307E\u3059\u3002\u307E\u305A\u3001\u6A19\u6E96\u306E"),P=s("system account"),x=s("\u3068\u306F\u7570\u306A\u308B\u65B9\u6CD5\u3067\u4F5C\u6210\u3001\u7BA1\u7406\u3055\u308C\u308B"),K={href:"https://docs.solana.com/staking/stake-accounts",target:"_blank",rel:"noopener noreferrer"},O=s("Stake Account"),L=s("\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002\u7279\u306B\u3001\u30A2\u30AB\u30A6\u30F3\u30C8\u306E"),C=n("code",null,"Stake Authority",-1),R=s("\u3068"),I=n("code",null,"Withdrawal Authority",-1),E=s("\u3092\u8A2D\u5B9A\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"),B=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  clusterApiUrl`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(`
  StakeProgram`),n("span",{class:"token punctuation"},","),s(`
  Authorized`),n("span",{class:"token punctuation"},","),s(`
  sendAndConfirmTransaction`),n("span",{class:"token punctuation"},","),s(`
  Lockup`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// Setup our connection and wallet"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" wallet "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Fund our wallet with 1 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" airdropSignature "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),s(`
    wallet`),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s("airdropSignature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Create a keypair for our stake account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" stakeAccount "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Calculate how much we want to stake"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" minimumRent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMinimumBalanceForRentExemption"),n("span",{class:"token punctuation"},"("),s(`
    StakeProgram`),n("span",{class:"token punctuation"},"."),s(`space
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" amountUserWantsToStake "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),s(),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// This is can be user input. For now, we'll hardcode to 0.5 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" amountToStake "),n("span",{class:"token operator"},"="),s(" minimumRent "),n("span",{class:"token operator"},"+"),s(" amountUserWantsToStake"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Setup a transaction to create our stake account"),s(`
  `),n("span",{class:"token comment"},"// Note: `StakeProgram.createAccount` returns a `Transaction` preconfigured with the necessary `TransactionInstruction`s"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    authorized`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Authorized"),n("span",{class:"token punctuation"},"("),s("wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Here we set two authorities: Stake Authority and Withdrawal Authority. Both are set to our wallet."),s(`
    fromPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" amountToStake"),n("span",{class:"token punctuation"},","),s(`
    lockup`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Lockup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Optional. We'll set this to 0 for demonstration purposes."),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    connection`),n("span",{class:"token punctuation"},","),s(`
    createStakeAccountTx`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"["),s(`
      wallet`),n("span",{class:"token punctuation"},","),s(`
      stakeAccount`),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Since we're creating a new stake account, we have that account sign as well"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account created. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("createStakeAccountTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Check our newly created stake account balance. This should be 0.5 SOL."),s(`
  `),n("span",{class:"token keyword"},"let"),s(" stakeBalance "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBalance"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account balance: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeBalance "),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," SOL"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Verify the status of our stake account. This will start as inactive and will take some time to activate."),s(`
  `),n("span",{class:"token keyword"},"let"),s(" stakeStatus "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br")])],-1),V=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// Setup a transaction to create our stake account"),s(`
`),n("span",{class:"token comment"},"// Note: `StakeProgram.createAccount` returns a `Transaction` preconfigured with the necessary `TransactionInstruction`s"),s(`
`),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  authorized`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Authorized"),n("span",{class:"token punctuation"},"("),s("wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Here we set two authorities: Stake Authority and Withdrawal Authority. Both are set to our wallet."),s(`
  fromPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  lamports`),n("span",{class:"token operator"},":"),s(" amountToStake"),n("span",{class:"token punctuation"},","),s(`
  lockup`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Lockup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Optional. We'll set this to 0 for demonstration purposes."),s(`
  stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
  connection`),n("span",{class:"token punctuation"},","),s(`
  createStakeAccountTx`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"["),s(`
    wallet`),n("span",{class:"token punctuation"},","),s(`
    stakeAccount`),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Since we're creating a new stake account, we have that account sign as well"),s(`
  `),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account created. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("createStakeAccountTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Check our newly created stake account balance. This should be 0.5 SOL."),s(`
`),n("span",{class:"token keyword"},"let"),s(" stakeBalance "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBalance"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account balance: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeBalance "),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," SOL"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Verify the status of our stake account. This will start as inactive and will take some time to activate."),s(`
`),n("span",{class:"token keyword"},"let"),s(" stakeStatus "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br")])],-1),M=n("h2",{id:"\u30B9\u30C6\u30FC\u30AF\u306E\u59D4\u4EFB",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u30B9\u30C6\u30FC\u30AF\u306E\u59D4\u4EFB","aria-hidden":"true"},"#"),s(" \u30B9\u30C6\u30FC\u30AF\u306E\u59D4\u4EFB")],-1),$=n("p",null,[s("\u30B9\u30C6\u30FC\u30AF\u30A2\u30AB\u30A6\u30F3\u30C8\u306B\u8CC7\u91D1\u304C\u63D0\u4F9B\u3055\u308C\u308B\u3068\u3001"),n("code",null,"Stake Authority"),s("\u306F\u305D\u308C\u3092\u30D0\u30EA\u30C7\u30FC\u30BF\u30FC\u306B\u59D4\u4EFB\u3067\u304D\u307E\u3059\u3002\u5404\u30B9\u30C6\u30FC\u30AF\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u3001\u4E00\u5EA6\u306B 1 \u3064\u306E\u30D0\u30EA\u30C7\u30FC\u30BF\u30FC\u306B\u306E\u307F\u59D4\u4EFB\u3067\u304D\u307E\u3059\u3002\u3055\u3089\u306B\u3001\u30A2\u30AB\u30A6\u30F3\u30C8\u5185\u306E\u3059\u3079\u3066\u306E\u30C8\u30FC\u30AF\u30F3\u306F\u3001\u59D4\u4EFB\u3055\u308C\u3066\u3044\u308B\u304B\u3001\u59D4\u4EFB\u3055\u308C\u3066\u3044\u306A\u3044\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002\u59D4\u4EFB\u3055\u308C\u308B\u3068\u3001\u30B9\u30C6\u30FC\u30AF\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u30A2\u30AF\u30C6\u30A3\u30D6\u306B\u306A\u308B\u307E\u3067\u306B\u6570\u30A8\u30DD\u30C3\u30AF\u304C\u304B\u304B\u308A\u307E\u3059\u3002")],-1),G=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  clusterApiUrl`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(`
  StakeProgram`),n("span",{class:"token punctuation"},","),s(`
  Authorized`),n("span",{class:"token punctuation"},","),s(`
  sendAndConfirmTransaction`),n("span",{class:"token punctuation"},","),s(`
  Lockup`),n("span",{class:"token punctuation"},","),s(`
  PublicKey`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// Setup our connection and wallet"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" wallet "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Fund our wallet with 1 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" airdropSignature "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),s(`
    wallet`),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s("airdropSignature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Create a keypair for our stake account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" stakeAccount "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Calculate how much we want to stake"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" minimumRent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMinimumBalanceForRentExemption"),n("span",{class:"token punctuation"},"("),s(`
    StakeProgram`),n("span",{class:"token punctuation"},"."),s(`space
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" amountUserWantsToStake "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),s(),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// This is can be user input. For now, we'll hardcode to 0.5 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" amountToStake "),n("span",{class:"token operator"},"="),s(" minimumRent "),n("span",{class:"token operator"},"+"),s(" amountUserWantsToStake"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Setup a transaction to create our stake account"),s(`
  `),n("span",{class:"token comment"},"// Note: `StakeProgram.createAccount` returns a `Transaction` preconfigured with the necessary `TransactionInstruction`s"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    authorized`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Authorized"),n("span",{class:"token punctuation"},"("),s("wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Here we set two authorities: Stake Authority and Withdrawal Authority. Both are set to our wallet."),s(`
    fromPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" amountToStake"),n("span",{class:"token punctuation"},","),s(`
    lockup`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Lockup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Optional. We'll set this to 0 for demonstration purposes."),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    connection`),n("span",{class:"token punctuation"},","),s(`
    createStakeAccountTx`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"["),s(`
      wallet`),n("span",{class:"token punctuation"},","),s(`
      stakeAccount`),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Since we're creating a new stake account, we have that account sign as well"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account created. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("createStakeAccountTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Check our newly created stake account balance. This should be 0.5 SOL."),s(`
  `),n("span",{class:"token keyword"},"let"),s(" stakeBalance "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBalance"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account balance: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeBalance "),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," SOL"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Verify the status of our stake account. This will start as inactive and will take some time to activate."),s(`
  `),n("span",{class:"token keyword"},"let"),s(" stakeStatus "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// To delegate our stake, we first have to select a validator. Here we get all validators and select the first active one."),s(`
  `),n("span",{class:"token keyword"},"const"),s(" validators "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getVoteAccounts"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" selectedValidator "),n("span",{class:"token operator"},"="),s(" validators"),n("span",{class:"token punctuation"},"."),s("current"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" selectedValidatorPubkey "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s("selectedValidator"),n("span",{class:"token punctuation"},"."),s("votePubkey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// With a validator selected, we can now setup a transaction that delegates our stake to their vote account."),s(`
  `),n("span",{class:"token keyword"},"const"),s(" delegateTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"delegate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    authorizedPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    votePubkey`),n("span",{class:"token operator"},":"),s(" selectedValidatorPubkey"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" delegateTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s("connection"),n("span",{class:"token punctuation"},","),s(" delegateTx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    wallet`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account delegated to "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("selectedValidatorPubkey"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},". Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("delegateTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Check in on our stake account. It should now be activating."),s(`
  stakeStatus `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br")])],-1),U=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// With a validator selected, we can now setup a transaction that delegates our stake to their vote account."),s(`
`),n("span",{class:"token keyword"},"const"),s(" delegateTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"delegate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  authorizedPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  votePubkey`),n("span",{class:"token operator"},":"),s(" selectedValidatorPubkey"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" delegateTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s("connection"),n("span",{class:"token punctuation"},","),s(" delegateTx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
  wallet`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account delegated to "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("selectedValidatorPubkey"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},". Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("delegateTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Check in on our stake account. It should now be activating."),s(`
stakeStatus `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br")])],-1),z=n("h2",{id:"\u30CF\u3099\u30EA\u30C6\u3099\u30FC\u30BF\u30FC\u306B\u3088\u308B\u30C6\u3099\u30EA\u30B1\u3099\u30FC\u30BF\u30FC\u306E\u53D6\u5F97",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u30CF\u3099\u30EA\u30C6\u3099\u30FC\u30BF\u30FC\u306B\u3088\u308B\u30C6\u3099\u30EA\u30B1\u3099\u30FC\u30BF\u30FC\u306E\u53D6\u5F97","aria-hidden":"true"},"#"),s(" \u30D0\u30EA\u30C7\u30FC\u30BF\u30FC\u306B\u3088\u308B\u30C7\u30EA\u30B2\u30FC\u30BF\u30FC\u306E\u53D6\u5F97")],-1),F=s("\u8907\u6570\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u7279\u5B9A\u306E\u30D0\u30EA\u30C7\u30FC\u30BF \u30A2\u30AB\u30A6\u30F3\u30C8\u306B\u30B9\u30C6\u30FC\u30AF\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002\u3059\u3079\u3066\u306E\u30B9\u30C6\u30FC\u30AB\u30FC\u3092\u53D6\u5F97\u3059\u308B\u306B\u306F\u3001"),J=n("code",null,"getProgramAccounts",-1),W=s("\u307E\u305F\u306F "),N=n("code",null,"getParsedProgramAccounts",-1),H=s(" API \u3092\u4F7F\u7528\u3057\u307E\u3059\u3002\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001"),X=s("\u30AC\u30A4\u30C9"),j=s("\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u30B9\u30C6\u30FC\u30AF \u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u9577\u3055\u306F 200 \u30D0\u30A4\u30C8\u3067\u3001\u6295\u7968\u8005\u306E\u516C\u958B\u9375\u306F 124 \u30D0\u30A4\u30C8\u304B\u3089\u59CB\u307E\u308A\u307E\u3059\u3002 "),Q={href:"https://github.com/solana-labs/solana/blob/e960634909a9617fb98d5d836c9c4c5e0d9d59cc/sdk/program/src/stake/state.rs",target:"_blank",rel:"noopener noreferrer"},Y=s("\u53C2\u7167"),D=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" clusterApiUrl"),n("span",{class:"token punctuation"},","),s(" Connection"),n("span",{class:"token punctuation"},","),s(" PublicKey "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"STAKE_PROGRAM_ID"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"Stake11111111111111111111111111111111111111"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"VOTE_PUB_KEY"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"27MtjMSAQ2BGkXNuJEJkxFyCJT8dugGAaHJ9T7Gc6x4x"'),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"mainnet-beta"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" accounts "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getParsedProgramAccounts"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"STAKE_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
    filters`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        dataSize`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"200"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// number of bytes"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        memcmp`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
          offset`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"124"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// number of bytes"),s(`
          bytes`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"VOTE_PUB_KEY"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// base58 encoded string"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Accounts for program "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),n("span",{class:"token constant"},"STAKE_PROGRAM_ID"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},": "),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Total number of delegators found for "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),n("span",{class:"token constant"},"VOTE_PUB_KEY"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," is: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("accounts"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Sample delegator:"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"JSON"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"stringify"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},`/*
  // Output

    Accounts for program Stake11111111111111111111111111111111111111: 
    Total number of delegators found for 27MtjMSAQ2BGkXNuJEJkxFyCJT8dugGAaHJ9T7Gc6x4x is: 184
    Sample delegator: 
    {
      "account": {
        "data": {
          "parsed": {
            "info": {
              "meta": {
                "authorized": {
                  "staker": "3VDVh3rHTLkNJp6FVYbuFcaihYBFCQX5VSBZk23ckDGV",
                  "withdrawer": "EhYXq3ANp5nAerUpbSgd7VK2RRcxK1zNuSQ755G5Mtxx"
                },
                "lockup": {
                  "custodian": "3XdBZcURF5nKg3oTZAcfQZg8XEc5eKsx6vK8r3BdGGxg",
                  "epoch": 0,
                  "unixTimestamp": 1822867200
                },
                "rentExemptReserve": "2282880"
              },
              "stake": {
                "creditsObserved": 58685367,
                "delegation": {
                  "activationEpoch": "208",
                  "deactivationEpoch": "18446744073709551615",
                  "stake": "433005300621",
                  "voter": "27MtjMSAQ2BGkXNuJEJkxFyCJT8dugGAaHJ9T7Gc6x4x",
                  "warmupCooldownRate": 0.25
                }
              }
            },
            "type": "delegated"
          },
          "program": "stake",
          "space": 200
        },
        "executable": false,
        "lamports": 433012149261,
        "owner": {
          "_bn": "06a1d8179137542a983437bdfe2a7ab2557f535c8a78722b68a49dc000000000"
        },
        "rentEpoch": 264
      },
      "pubkey": {
        "_bn": "0dc8b506f95e52c9ac725e714c7078799dd3268df562161411fe0916a4dc0a43"
      }
    }

  */`),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br")])],-1),q=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"STAKE_PROGRAM_ID"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token string"},'"Stake11111111111111111111111111111111111111"'),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"VOTE_PUB_KEY"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"27MtjMSAQ2BGkXNuJEJkxFyCJT8dugGAaHJ9T7Gc6x4x"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"mainnet-beta"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" accounts "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getParsedProgramAccounts"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"STAKE_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
  filters`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
      dataSize`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"200"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// number of bytes"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
      memcmp`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
        offset`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"124"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// number of bytes"),s(`
        bytes`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"VOTE_PUB_KEY"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// base58 encoded string"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Accounts for program "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),n("span",{class:"token constant"},"STAKE_PROGRAM_ID"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},": "),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s(`
  `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Total number of delegators found for "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),n("span",{class:"token constant"},"VOTE_PUB_KEY"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," is: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("accounts"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Sample delegator:"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"JSON"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"stringify"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},`/*
// Output

  Accounts for program Stake11111111111111111111111111111111111111: 
  Total number of delegators found for 27MtjMSAQ2BGkXNuJEJkxFyCJT8dugGAaHJ9T7Gc6x4x is: 184
  Sample delegator: 
  {
    "account": {
      "data": {
        "parsed": {
          "info": {
            "meta": {
              "authorized": {
                "staker": "3VDVh3rHTLkNJp6FVYbuFcaihYBFCQX5VSBZk23ckDGV",
                "withdrawer": "EhYXq3ANp5nAerUpbSgd7VK2RRcxK1zNuSQ755G5Mtxx"
              },
              "lockup": {
                "custodian": "3XdBZcURF5nKg3oTZAcfQZg8XEc5eKsx6vK8r3BdGGxg",
                "epoch": 0,
                "unixTimestamp": 1822867200
              },
              "rentExemptReserve": "2282880"
            },
            "stake": {
              "creditsObserved": 58685367,
              "delegation": {
                "activationEpoch": "208",
                "deactivationEpoch": "18446744073709551615",
                "stake": "433005300621",
                "voter": "27MtjMSAQ2BGkXNuJEJkxFyCJT8dugGAaHJ9T7Gc6x4x",
                "warmupCooldownRate": 0.25
              }
            }
          },
          "type": "delegated"
        },
        "program": "stake",
        "space": 200
      },
      "executable": false,
      "lamports": 433012149261,
      "owner": {
        "_bn": "06a1d8179137542a983437bdfe2a7ab2557f535c8a78722b68a49dc000000000"
      },
      "rentEpoch": 264
    },
    "pubkey": {
      "_bn": "0dc8b506f95e52c9ac725e714c7078799dd3268df562161411fe0916a4dc0a43"
    }
  }
  
*/`),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br")])],-1),Z=n("h2",{id:"\u30B9\u30C6\u30FC\u30AF\u3092\u7121\u52B9\u306B\u3059\u308B",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u30B9\u30C6\u30FC\u30AF\u3092\u7121\u52B9\u306B\u3059\u308B","aria-hidden":"true"},"#"),s(" \u30B9\u30C6\u30FC\u30AF\u3092\u7121\u52B9\u306B\u3059\u308B")],-1),nn=n("p",null,[s("\u30B9\u30C6\u30FC\u30AF\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u59D4\u4EFB\u3055\u308C\u305F\u5F8C\u306F\u3044\u3064\u3067\u3082\u3001"),n("code",null,"Stake Authority"),s("\u306F\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u975E\u30A2\u30AF\u30C6\u30A3\u30D6\u5316\u3059\u308B\u3053\u3068\u3092\u9078\u629E\u3067\u304D\u307E\u3059\u3002\u975E\u30A2\u30AF\u30C6\u30A3\u30D6\u5316\u306F\u3001SOL\u304C\u5F15\u304D\u51FA\u3055\u308C\u308B\u524D\u306B\u5FC5\u8981\u3067\u3001\u5B8C\u4E86\u3059\u308B\u307E\u3067\u306B\u6570\u30A8\u30DD\u30C3\u30AF\u304B\u304B\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002")],-1),sn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  clusterApiUrl`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(`
  StakeProgram`),n("span",{class:"token punctuation"},","),s(`
  Authorized`),n("span",{class:"token punctuation"},","),s(`
  sendAndConfirmTransaction`),n("span",{class:"token punctuation"},","),s(`
  Lockup`),n("span",{class:"token punctuation"},","),s(`
  PublicKey`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// Setup our connection and wallet"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" wallet "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Fund our wallet with 1 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" airdropSignature "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),s(`
    wallet`),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s("airdropSignature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Create a keypair for our stake account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" stakeAccount "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Calculate how much we want to stake"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" minimumRent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMinimumBalanceForRentExemption"),n("span",{class:"token punctuation"},"("),s(`
    StakeProgram`),n("span",{class:"token punctuation"},"."),s(`space
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" amountUserWantsToStake "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),s(),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// This is can be user input. For now, we'll hardcode to 0.5 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" amountToStake "),n("span",{class:"token operator"},"="),s(" minimumRent "),n("span",{class:"token operator"},"+"),s(" amountUserWantsToStake"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Setup a transaction to create our stake account"),s(`
  `),n("span",{class:"token comment"},"// Note: `StakeProgram.createAccount` returns a `Transaction` preconfigured with the necessary `TransactionInstruction`s"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    authorized`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Authorized"),n("span",{class:"token punctuation"},"("),s("wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Here we set two authorities: Stake Authority and Withdrawal Authority. Both are set to our wallet."),s(`
    fromPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" amountToStake"),n("span",{class:"token punctuation"},","),s(`
    lockup`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Lockup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Optional. We'll set this to 0 for demonstration purposes."),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    connection`),n("span",{class:"token punctuation"},","),s(`
    createStakeAccountTx`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"["),s(`
      wallet`),n("span",{class:"token punctuation"},","),s(`
      stakeAccount`),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Since we're creating a new stake account, we have that account sign as well"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account created. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("createStakeAccountTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Check our newly created stake account balance. This should be 0.5 SOL."),s(`
  `),n("span",{class:"token keyword"},"let"),s(" stakeBalance "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBalance"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account balance: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeBalance "),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," SOL"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Verify the status of our stake account. This will start as inactive and will take some time to activate."),s(`
  `),n("span",{class:"token keyword"},"let"),s(" stakeStatus "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// To delegate our stake, we first have to select a validator. Here we get all validators and select the first active one."),s(`
  `),n("span",{class:"token keyword"},"const"),s(" validators "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getVoteAccounts"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" selectedValidator "),n("span",{class:"token operator"},"="),s(" validators"),n("span",{class:"token punctuation"},"."),s("current"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" selectedValidatorPubkey "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s("selectedValidator"),n("span",{class:"token punctuation"},"."),s("votePubkey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// With a validator selected, we can now setup a transaction that delegates our stake to their vote account."),s(`
  `),n("span",{class:"token keyword"},"const"),s(" delegateTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"delegate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    authorizedPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    votePubkey`),n("span",{class:"token operator"},":"),s(" selectedValidatorPubkey"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" delegateTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s("connection"),n("span",{class:"token punctuation"},","),s(" delegateTx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    wallet`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account delegated to "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("selectedValidatorPubkey"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},". Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("delegateTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Check in on our stake account. It should now be activating."),s(`
  stakeStatus `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// At anytime we can choose to deactivate our stake. Our stake account must be inactive before we can withdraw funds."),s(`
  `),n("span",{class:"token keyword"},"const"),s(" deactivateTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"deactivate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    authorizedPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" deactivateTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    connection`),n("span",{class:"token punctuation"},","),s(`
    deactivateTx`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"["),s("wallet"),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account deactivated. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("deactivateTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Check in on our stake account. It should now be inactive."),s(`
  stakeStatus `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br"),n("span",{class:"line-number"},"93"),n("br"),n("span",{class:"line-number"},"94"),n("br"),n("span",{class:"line-number"},"95"),n("br"),n("span",{class:"line-number"},"96"),n("br"),n("span",{class:"line-number"},"97"),n("br"),n("span",{class:"line-number"},"98"),n("br"),n("span",{class:"line-number"},"99"),n("br"),n("span",{class:"line-number"},"100"),n("br"),n("span",{class:"line-number"},"101"),n("br")])],-1),an=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// At anytime we can choose to deactivate our stake. Our stake account must be inactive before we can withdraw funds."),s(`
`),n("span",{class:"token keyword"},"const"),s(" deactivateTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"deactivate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  authorizedPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(" deactivateTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
  connection`),n("span",{class:"token punctuation"},","),s(`
  deactivateTx`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"["),s("wallet"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account deactivated. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("deactivateTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Check in on our stake account. It should now be inactive."),s(`
stakeStatus `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br")])],-1),tn=n("h2",{id:"\u30B9\u30C6\u30FC\u30AF\u3092\u5F15\u304D\u51FA\u3059",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u30B9\u30C6\u30FC\u30AF\u3092\u5F15\u304D\u51FA\u3059","aria-hidden":"true"},"#"),s(" \u30B9\u30C6\u30FC\u30AF\u3092\u5F15\u304D\u51FA\u3059")],-1),en=n("p",null,[s("\u975E\u30A2\u30AF\u30C6\u30A3\u30D6\u5316\u3055\u308C\u308B\u3068\u3001"),n("code",null,"Withdrawal Authority"),s("\u306FSOL\u3092\u30B7\u30B9\u30C6\u30E0\u30A2\u30AB\u30A6\u30F3\u30C8\u306B\u623B\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002\u30B9\u30C6\u30FC\u30AF\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u59D4\u4EFB\u3055\u308C\u306A\u304F\u306A\u308A\u3001\u6B8B\u9AD8\u304C 0 SOL \u306B\u306A\u308B\u3068\u3001\u5B9F\u8CEA\u7684\u306B\u7834\u68C4\u3055\u308C\u307E\u3059\u3002")],-1),on=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  clusterApiUrl`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(`
  StakeProgram`),n("span",{class:"token punctuation"},","),s(`
  Authorized`),n("span",{class:"token punctuation"},","),s(`
  sendAndConfirmTransaction`),n("span",{class:"token punctuation"},","),s(`
  Lockup`),n("span",{class:"token punctuation"},","),s(`
  PublicKey`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// Setup our connection and wallet"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" wallet "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Fund our wallet with 1 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" airdropSignature "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),s(`
    wallet`),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s("airdropSignature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Create a keypair for our stake account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" stakeAccount "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Calculate how much we want to stake"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" minimumRent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMinimumBalanceForRentExemption"),n("span",{class:"token punctuation"},"("),s(`
    StakeProgram`),n("span",{class:"token punctuation"},"."),s(`space
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" amountUserWantsToStake "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),s(),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// This is can be user input. For now, we'll hardcode to 0.5 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" amountToStake "),n("span",{class:"token operator"},"="),s(" minimumRent "),n("span",{class:"token operator"},"+"),s(" amountUserWantsToStake"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Setup a transaction to create our stake account"),s(`
  `),n("span",{class:"token comment"},"// Note: `StakeProgram.createAccount` returns a `Transaction` preconfigured with the necessary `TransactionInstruction`s"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    authorized`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Authorized"),n("span",{class:"token punctuation"},"("),s("wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Here we set two authorities: Stake Authority and Withdrawal Authority. Both are set to our wallet."),s(`
    fromPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" amountToStake"),n("span",{class:"token punctuation"},","),s(`
    lockup`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Lockup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Optional. We'll set this to 0 for demonstration purposes."),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" createStakeAccountTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    connection`),n("span",{class:"token punctuation"},","),s(`
    createStakeAccountTx`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"["),s(`
      wallet`),n("span",{class:"token punctuation"},","),s(`
      stakeAccount`),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Since we're creating a new stake account, we have that account sign as well"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account created. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("createStakeAccountTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Check our newly created stake account balance. This should be 0.5 SOL."),s(`
  `),n("span",{class:"token keyword"},"let"),s(" stakeBalance "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBalance"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account balance: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeBalance "),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," SOL"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Verify the status of our stake account. This will start as inactive and will take some time to activate."),s(`
  `),n("span",{class:"token keyword"},"let"),s(" stakeStatus "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// To delegate our stake, we first have to select a validator. Here we get all validators and select the first active one."),s(`
  `),n("span",{class:"token keyword"},"const"),s(" validators "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getVoteAccounts"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" selectedValidator "),n("span",{class:"token operator"},"="),s(" validators"),n("span",{class:"token punctuation"},"."),s("current"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" selectedValidatorPubkey "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s("selectedValidator"),n("span",{class:"token punctuation"},"."),s("votePubkey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// With a validator selected, we can now setup a transaction that delegates our stake to their vote account."),s(`
  `),n("span",{class:"token keyword"},"const"),s(" delegateTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"delegate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    authorizedPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    votePubkey`),n("span",{class:"token operator"},":"),s(" selectedValidatorPubkey"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" delegateTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s("connection"),n("span",{class:"token punctuation"},","),s(" delegateTx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    wallet`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account delegated to "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("selectedValidatorPubkey"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},". Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("delegateTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Check in on our stake account. It should now be activating."),s(`
  stakeStatus `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// At anytime we can choose to deactivate our stake. Our stake account must be inactive before we can withdraw funds."),s(`
  `),n("span",{class:"token keyword"},"const"),s(" deactivateTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"deactivate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    authorizedPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" deactivateTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    connection`),n("span",{class:"token punctuation"},","),s(`
    deactivateTx`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"["),s("wallet"),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account deactivated. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("deactivateTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Check in on our stake account. It should now be inactive."),s(`
  stakeStatus `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStakeActivation"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account status: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeStatus"),n("span",{class:"token punctuation"},"."),s("state"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Once deactivated, we can withdraw our SOL back to our main wallet"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" withdrawTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withdraw"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    authorizedPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    toPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" stakeBalance"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Withdraw the full balance at the time of the transaction"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" withdrawTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s("connection"),n("span",{class:"token punctuation"},","),s(" withdrawTx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    wallet`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account withdrawn. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("withdrawTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Confirm that our stake account balance is now 0"),s(`
  stakeBalance `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBalance"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account balance: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeBalance "),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," SOL"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br"),n("span",{class:"line-number"},"93"),n("br"),n("span",{class:"line-number"},"94"),n("br"),n("span",{class:"line-number"},"95"),n("br"),n("span",{class:"line-number"},"96"),n("br"),n("span",{class:"line-number"},"97"),n("br"),n("span",{class:"line-number"},"98"),n("br"),n("span",{class:"line-number"},"99"),n("br"),n("span",{class:"line-number"},"100"),n("br"),n("span",{class:"line-number"},"101"),n("br"),n("span",{class:"line-number"},"102"),n("br"),n("span",{class:"line-number"},"103"),n("br"),n("span",{class:"line-number"},"104"),n("br"),n("span",{class:"line-number"},"105"),n("br"),n("span",{class:"line-number"},"106"),n("br"),n("span",{class:"line-number"},"107"),n("br"),n("span",{class:"line-number"},"108"),n("br"),n("span",{class:"line-number"},"109"),n("br"),n("span",{class:"line-number"},"110"),n("br"),n("span",{class:"line-number"},"111"),n("br"),n("span",{class:"line-number"},"112"),n("br"),n("span",{class:"line-number"},"113"),n("br"),n("span",{class:"line-number"},"114"),n("br"),n("span",{class:"line-number"},"115"),n("br"),n("span",{class:"line-number"},"116"),n("br"),n("span",{class:"line-number"},"117"),n("br"),n("span",{class:"line-number"},"118"),n("br")])],-1),cn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// Once deactivated, we can withdraw our SOL back to our main wallet"),s(`
`),n("span",{class:"token keyword"},"const"),s(" withdrawTx "),n("span",{class:"token operator"},"="),s(" StakeProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"withdraw"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  stakePubkey`),n("span",{class:"token operator"},":"),s(" stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  authorizedPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  toPubkey`),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
  lamports`),n("span",{class:"token operator"},":"),s(" stakeBalance"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Withdraw the full balance at the time of the transaction"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" withdrawTxId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s("connection"),n("span",{class:"token punctuation"},","),s(" withdrawTx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
  wallet`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account withdrawn. Tx Id: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("withdrawTxId"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Confirm that our stake account balance is now 0"),s(`
stakeBalance `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBalance"),n("span",{class:"token punctuation"},"("),s("stakeAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Stake account balance: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("stakeBalance "),n("span",{class:"token operator"},"/"),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," SOL"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br")])],-1);function pn(ln,un){const l=e("CodeGroupItem"),i=e("CodeGroup"),p=e("ExternalLinkIcon"),u=e("RouterLink"),o=e("SolanaCodeGroupItem"),c=e("SolanaCodeGroup");return k(),b(m,null,[w,g,y,t(i,null,{default:a(()=>[t(l,{title:"TS",active:""},{default:a(()=>[h]),_:1}),t(l,{title:"CLI"},{default:a(()=>[f]),_:1})]),_:1}),S,n("p",null,[A,n("a",T,[_,t(p)]),v,t(u,{to:"/ja/references/accounts.html#create-a-system-account"},{default:a(()=>[P]),_:1}),x,n("a",K,[O,t(p)]),L,C,R,I,E]),t(c,null,{default:a(()=>[t(o,{title:"TS",active:""},{default:a(()=>[B]),preview:a(()=>[V]),_:1})]),_:1}),M,$,t(c,null,{default:a(()=>[t(o,{title:"TS",active:""},{default:a(()=>[G]),preview:a(()=>[U]),_:1})]),_:1}),z,n("p",null,[F,J,W,N,H,t(u,{to:"/guides/get-program-accounts.html"},{default:a(()=>[X]),_:1}),j,n("a",Q,[Y,t(p)])]),t(c,null,{default:a(()=>[t(o,{title:"TS",active:""},{default:a(()=>[D]),preview:a(()=>[q]),_:1})]),_:1}),Z,nn,t(c,null,{default:a(()=>[t(o,{title:"TS",active:""},{default:a(()=>[sn]),preview:a(()=>[an]),_:1})]),_:1}),tn,en,t(c,null,{default:a(()=>[t(o,{title:"TS",active:""},{default:a(()=>[on]),preview:a(()=>[cn]),_:1})]),_:1})],64)}var kn=r(d,[["render",pn]]);export{kn as default};
