import{_ as i,r as e,o as r,c as k,b as a,w as t,a as n,F as m,e as b,d as s}from"./app.07ce7a66.js";var d="/assets/scfsd.cc67ec33.png";const h={},g=b(`<h1 id="\u0111e-xuat-kiem-thu-parity" tabindex="-1"><a class="header-anchor" href="#\u0111e-xuat-kiem-thu-parity" aria-hidden="true">#</a> \u0110\u1EC1 xu\u1EA5t Ki\u1EC3m th\u1EED Parity</h1><p>Khi ki\u1EC3m th\u1EED ch\u01B0\u01A1ng tr\xECnh, ch\xFAng ta mu\u1ED1n ch\u1EAFc r\u1EB1ng ch\u01B0\u01A1ng tr\xECnh s\u1EBD ch\u1EA1y nh\u01B0 nhau tr\xEAn m\u1ECDi m\xF4i tr\u01B0\u1EDDng nh\u1EB1m \u0111\u1EA3m b\u1EA3o v\u1EC1 c\u1EA3 ch\u1EA5t l\u01B0\u1EE3ng s\u1EA3n ph\u1EA9m c\u0169ng nh\u01B0 ta t\u1EA1o gi\xE1 tr\u1ECB k\u1EF3 v\u1ECDng.</p><h2 id="co-the-ban-chua-biet" tabindex="-1"><a class="header-anchor" href="#co-the-ban-chua-biet" aria-hidden="true">#</a> C\xF3 th\u1EC3 b\u1EA1n ch\u01B0a bi\u1EBFt</h2><div class="custom-container tip"><p class="custom-container-title">Nh\u1EEFng \u0111i\u1EC1u c\xF3 th\u1EC3 b\u1EA1n ch\u01B0a bi\u1EBFt</p><ul><li>\u0110\u1EC1 xu\u1EA5t l\xE0 kh\xF4ng b\u1EAFt bu\u1ED9c cho c\xE1c validator tr\xEAn Solana v\xE0 c\u1EA7n \u0111\u01B0\u1EE3c validator k\xEDch ho\u1EA1t \u0111\u1EC3 c\xF3 th\u1EC3 \u0111\u01B0\u1EE3c s\u1EED d\u1EE5ng.</li><li>\u0110\u1EC1 xu\u1EA5t c\xF3 th\u1EC3 \u0111\u01B0\u1EE3c k\xEDch ho\u1EA1t b\u1EDFi m\u1ED9t m\u1EA1ng (v\xED d\u1EE5 nh\u01B0 testnet) trong khi v\u1EABn v\xF4 hi\u1EC7u tr\xEAn m\u1EA1ng kh\xE1c (v\xED d\u1EE5 nh\u01B0 mainnet-beta).</li><li>Tuy nhi\xEAn, khi ch\u1EA1y ch\u1EBF \u0111\u1ED9 m\u1EB7c \u0111\u1ECBnh <code>solana-test-validator</code> d\u01B0\u1EDBi m\xE1y, t\u1EA5t c\u1EA3 c\xE1c \u0111\u1EC1 xu\u1EA5t s\u1EBD \u0111\u01B0\u1EE3c t\u1EF1 \u0111\u1ED9ng k\xEDch ho\u1EB7t v\xE0 s\u1EB5n s\xE0ng th\u1EF1c thi. K\u1EBFt qu\u1EA3 l\xE0 khi ki\u1EC3m th\u1EED tr\xEAn m\xE1y c\xF3 th\u1EC3 s\u1EBD sai kh\xE1c v\u1EDBi khi tri\u1EC3n khai ch\u01B0\u01A1ng tr\xECnh v\xE0 ki\u1EC3m th\u1EED tr\xEAn c\xE1c m\u1EA1ng Solana kh\xE1c!</li></ul></div><h2 id="tinh-huong-gia-\u0111inh" tabindex="-1"><a class="header-anchor" href="#tinh-huong-gia-\u0111inh" aria-hidden="true">#</a> T\xECnh hu\u1ED1ng gi\u1EA3 \u0111\u1ECBnh</h2><p>Gi\u1EA3 s\u1EED b\u1EA1n c\xF3 m\u1ED9t Transaction ch\u01B0a 3 ch\u1EC9 th\u1ECB v\xE0 m\u1ED7i ch\u1EC9 th\u1ECB s\u1EBD ti\xEAu t\u1ED1n x\u1EA5p x\u1EC9 kho\u1EA3ng 100,000 \u0111\u01A1n v\u1ECB t\xEDnh to\xE1n (CU). Khi ch\u1EA1y tr\xEAn phi\xEAn b\u1EA3n Solana 1.8.x, b\u1EA1n s\u1EBD th\u1EA5y m\u1EE9c ti\xEAu th\u1EE5 CU c\u1EE7a c\xE1c ch\u1EC9 th\u1ECB nh\u01B0 sau:</p><table><thead><tr><th>Ch\u1EC9 th\u1ECB</th><th>CU l\xFAc b\u1EAFt \u0111\u1EA7u</th><th>Th\u1EF1c thi</th><th>CU c\xF2n l\u1EA1i</th></tr></thead><tbody><tr><td>1</td><td>200,000</td><td>-100,000</td><td>100,000</td></tr><tr><td>2</td><td>200,000</td><td>-100,000</td><td>100,000</td></tr><tr><td>3</td><td>200,000</td><td>-100,000</td><td>100,000</td></tr></tbody></table><p>Trong phi\xEAn b\u1EA3n Solana 1.9.2, c\xF3 m\u1ED9t \u0111\u1EC1 xu\u1EA5t \u0111\u01B0\u1EE3c g\u1ECDi l\xE0 &#39;transaction wide compute cap&#39;. \u0110\u1EC3 xu\u1EA5t n\xE0y n\xF3i r\u1EB1ng m\u1ED9t Transaction b\u1EAFt \u0111\u1EA7u v\u1EDBi 200,000 CU m\u1EB7c \u0111\u1ECBnh v\xE0 t\u1EA5t c\u1EA3 c\xE1c ch\u1EC9 th\u1ECB trong Transaction s\u1EBD ti\xEAu thu c\u1ED9ng d\u1ED3n ng\xE2n s\xE1ch CU \u0111\xF3. Th\u1EED ch\u1EA1y l\u1EA1i c\xF9ng Transaction nh\u01B0ng v\u1EDBi phi\xEAn b\u1EA3n m\u1EDBi s\u1EBD cho ra k\u1EBFt qu\u1EA3 r\u1EA5t kh\xE1c:</p><table><thead><tr><th>Ch\u1EC9 th\u1ECB</th><th>CU l\xFAc b\u1EAFt \u0111\u1EA7u</th><th>Th\u1EF1c thi</th><th>CU c\xF2n l\u1EA1i</th></tr></thead><tbody><tr><td>1</td><td>200,000</td><td>-100,000</td><td>100,000</td></tr><tr><td>2</td><td>100,000</td><td>-100,000</td><td>0</td></tr><tr><td>3</td><td>0</td><td>FAIL!!!</td><td>FAIL!!!</td></tr></tbody></table><p>V\xE3i! N\u1EBFu b\u1EA1n kh\xF4ng bi\u1EBFt c\xE1i n\xE0y th\xEC c\xF3 kh\u1EA3 n\u0103ng cao l\xE0 b\u1EA1n s\u1EBD c\u1EA3m th\u1EA5y c\u1EF1c d\u1ECB khi m\xE0 b\u1EA1n ch\u1EA3 thay \u0111\u1ED5i g\xEC trong Transction nh\u01B0ng devnet th\xEC ho\u1EA1t \u0111\u1ED9ng ngon l\xE0nh c\xF2n tr\xEAn m\xE1y th\xEC to\xE0n l\xE0 l\u1ED7i?!?</p><p>Th\u1EF1c ra v\u1EABn c\xF3 c\xE1c \u0111\u1EC3 t\u0103ng ng\xE2n s\xE1ch CU cho m\u1ED9t Transaction, gi\u1EA3 d\u1EE5 nh\u01B0 l\xE0 300,000 CU, \u0111\u1EC3 l\xE0m gi\u1EA3i ph\xE1p t\xECnh th\u1EBF. Nh\u01B0ng \u0111i\u1EC1u \u0111\xF3 cho th\u1EA5y \u0111\u1EC1 xu\u1EA5t Ki\u1EC3m th\u1EED Parity s\u1EBD cho ph\xE9p b\u1EA1n ch\u1EE7 \u0111\u1ED9ng tr\xE1nh nh\u1EEFng phi\u1EC1n h\xE0 tr\xEAn.</p><p>There is the ability to increase the overall Transaction budget, to lets say 300_000 CU, and salvage your sanity but this demonstrates why testing with <strong><em>Feature Parity</em></strong> provides a proactive way to avoid any confusion.</p><h2 id="\u0111e-xuat-trang-thai" tabindex="-1"><a class="header-anchor" href="#\u0111e-xuat-trang-thai" aria-hidden="true">#</a> <a name="feature-status"></a> \u0110\u1EC1 xu\u1EA5t Tr\u1EA1ng th\xE1i</h2><p>R\u1EA5t d\u1EC5 \u0111\u1EC3 ki\u1EC3m tra nh\u1EEFng \u0111\u1EC1 xu\u1EA5t n\xE0o \u0111ang \u0111\u01B0\u1EE3c k\xEDch ho\u1EA1t cho t\u1EEBng m\xF4i tr\u01B0\u1EDDng v\u1EDBi c\xE2u l\u1EC7nh <code>solana feature status</code>.</p><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana feature status -ud   // Displays by feature status for devnet
solana feature status -ut   // Displays for testnet
solana feature status -um   // Displays for mainnet-beta
solana feature status -ul   // Displays for local, requires running solana-test-validator
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Kh\xE1c h\u01A1n, b\u1EA1n c\u0169ng c\xF3 th\u1EC3 s\u1EED d\u1EE5ng c\xF4ng c\u1EE5 <a href="#resources">scfsd</a> \u0111\u1EC3 quan s\xE1t c\xF9ng l\xFAc tr\u1EA1ng th\xE1i c\u1EE7a t\u1EA5t c\u1EA3 c\xE1c m\xF4i tr\u01B0\u1EDDng. B\xEAn d\u01B0\u1EDBi l\xE0 m\u1ED9t ph\u1EA7n k\u1EBFt qu\u1EA3 tr\u1EA3 ra, b\u1EA1n c\u0169ng kh\xF4ng c\u1EA7n <code>solana-test-validator</code> \u0111\u1EC3 ch\u1EA1y c\xF4ng c\u1EE5 tr\xEAn:</p><img src="`+d+`" alt="Feature Status Heatmap"><h2 id="kiem-thu-parity" tabindex="-1"><a class="header-anchor" href="#kiem-thu-parity" aria-hidden="true">#</a> Ki\u1EC3m th\u1EED Parity</h2><p>Nh\u01B0 \u0111\xE3 l\u01B0u \xFD b\xEAn tr\xEAn, <code>solana-test-validator</code> s\u1EBD t\u1EF1 \u0111\u1ED9ng k\xEDch ho\u1EA1t t\u1EA5t c\u1EA3 c\xE1c \u0111\u1EC3 xu\u1EA5t. \u0110\u1EC3 tr\u1EA3 l\u1EDDi cho c\xE2u h\u1ECFi &quot;L\xE0m th\u1EBF n\xE0o t\xF4i c\xF3 th\u1EC3 ki\u1EC3m th\u1EED ch\u01B0\u01A1ng tr\xECnh d\u01B0\u1EDBi m\xE1y v\u1EDBi m\xF4i tr\u01B0\u1EDDng \u0111\u1ECBa ph\u01B0\u01A1ng nh\u01B0 l\xE0 m\xF4i tr\u01B0\u1EDDng devnet, testnet, hay k\u1EC3 c\u1EA3 mainnet-beta?&quot;.</p><p>L\u1EDDi \u0111\xE1p: M\u1ED9t c\xE0i \u0111\u1EB7t trong phi\xEAn b\u1EA3n Solana 1.9.6 cho ph\xE9p b\u1EA1n v\xF4 hi\u1EC7u ho\xE1 c\xE1c \u0111\u1EC1 xu\u1EA5t:</p><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana-test-validator --deactivate-feature &lt;FEATURE_PUBKEY&gt; ...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="vi-du-\u0111on-gian" tabindex="-1"><a class="header-anchor" href="#vi-du-\u0111on-gian" aria-hidden="true">#</a> V\xED d\u1EE5 \u0111\u01A1n gi\u1EA3n</h2><p>Gi\u1EA3 s\u1EED b\u1EA1n c\xF3 m\u1ED9t ch\u01B0\u01A1ng tr\xECnh \u0111\u01A1n gi\u1EA3n ch\u1EC9 in ra nh\u1EEFng g\xEC n\xF3 nh\u1EADn. B\u1EA1n \u0111a ki\u1EC3m th\u1EED m\u1ED9t Transaction v\u1EDBi 2 ch\u1EC9 th\u1ECB cho ch\u01B0\u1EDDng tr\xECnh \u0111\xF3.</p><h3 id="khi-tat-ca-cac-\u0111e-xuat-\u0111eu-kich-hoat" tabindex="-1"><a class="header-anchor" href="#khi-tat-ca-cac-\u0111e-xuat-\u0111eu-kich-hoat" aria-hidden="true">#</a> Khi t\u1EA5t c\u1EA3 c\xE1c \u0111\u1EC1 xu\u1EA5t \u0111\u1EC1u k\xEDch ho\u1EA1t</h3><ol><li>B\u1EA1n kh\u1EDFi ch\u1EA1y m\u1ED9t validator tr\xEAn c\u1EE7a s\u1ED5 l\u1EC7nh:</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana config set -ul
solana-test-validator -l ./ledger --bpf-program target/deploy/PROGNAME.so --reset\`
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>\u1EDE m\u1ED9t c\u1EEDa s\u1ED5 l\u1EC7nh kh\xE1c, b\u1EA1n in k\u1EBFt qu\u1EA3 \u0111\u1EA7u ra:</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana logs
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>Sau \u0111\xF3 b\u1EA1n th\u1EED g\u1EEDi m\u1ED9t Transaction. B\u1EA1n s\u1EBD th\u1EA5y k\u1EBFt qu\u1EA3 in ra \u1EDF c\u1EEDa s\u1ED5 l\u1EC7nh t\u01B0\u01A1ng t\u1EF1 nh\u01B0 sau (\u0111\xE3 \u0111\u01B0\u1EE3c \u0111i\u1EC1u ch\u1EC9nh \u0111\u1EC3 d\u1EC5 \u0111\u1ECDc h\u01A1n):</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc invoke [1]
Program log: process_instruction: PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc: 0 accounts, data=[0]
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc consumed 12843 of 200000 compute units
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc success
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc invoke [1]
Program log: process_instruction: PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc: 0 accounts, data=[1]
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc consumed 12843 of 187157 compute units
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc success[
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>B\u1EDFi v\xEC \u0111\u1EC1 xu\u1EA5t &#39;transaction wide compute cap&#39; \u0111\u01B0\u1EE3c m\u1EB7c \u0111\u1ECBnh t\u1EF1 \u0111\u1ED9ng b\u1EADt, b\u1EA1n s\u1EBD th\u1EA5y r\u1EB1ng m\u1ED7i ch\u1EC9 th\u1ECB s\u1EBD tr\u1EEB ti\u1EBFp v\xE0o CU t\u1EEB ng\xE2n s\xE1ch 200,000 CU cho m\u1ED9t Transaction t\u1EEB \u0111\u1EA7u.</p><h3 id="vo-hieu-mot-vai-\u0111e-xuat" tabindex="-1"><a class="header-anchor" href="#vo-hieu-mot-vai-\u0111e-xuat" aria-hidden="true">#</a> V\xF4 hi\u1EC7u m\u1ED9t v\xE0i \u0111\u1EC1 xu\u1EA5t</h3><ol><li>Trong l\u1EA7n n\xE0y, ch\xFAng ta mu\u1ED1n ch\u1EA1y v\u1EDBi c\u01A1 ch\u1EBF qu\u1EA3n l\xFD CU gi\u1ED1ng y v\u1EDBi ch\u1EA1y tr\xEAn devnet. S\u1EED d\u1EE5ng c\xF4ng c\u1EE5 \u0111\u01B0\u1EE3c m\xF4 t\u1EA3 trong <a href="#feature-status">Feature Status</a> \u0111\u1EC3 v\xF4 hi\u1EC7u ho\xE1 <code>transaction wide compute cap</code> v\xE0 g\xE1n c\u1EDD <code>--deactivate-feature</code> trong l\xFAc kh\u1EDFi ch\u1EA1y validator.</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana-test-validator -l ./ledger --deactivate-feature 5ekBxc8itEnPv4NzGJtr8BVVQLNMQuLMNQQj7pHoLNZ9 --bpf-program target/deploy/PROGNAME.so --reset\`
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>Gi\u1EDD ch\xFAng ta s\u1EBD th\u1EA5y k\u1EBFt qu\u1EA3 tr\u1EA3 ra cho t\u1EEBng ch\u1EC9 th\u1ECB s\u1EBD c\xF3 ng\xE2n s\xE1ch CU ri\xEAng v\xE0 b\u1EB1ng 200,000 CU (\u0111\xE3 \u0111\u01B0\u1EE3c \u0111i\u1EC1u ch\u1EC9nh \u0111\u1EC3 d\u1EC5 d\u1ECDc) v\xE0 c\u0169ng ch\xEDnh l\xE0 c\xE0i \u0111\u1EB7t hi\u1EC7n h\xE0nh tr\xEAn c\xE1c m\xF4i tr\u01B0\u1EDDng kh\xE1c.</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc invoke [1]
Program log: process_instruction: PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc: 0 accounts, data=[0]
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc consumed 12843 of 200000 compute units
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc success
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc invoke [1]
Program log: process_instruction: PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc: 0 accounts, data=[0]
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc consumed 12843 of 200000 compute units
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc success
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="kiem-thu-parity-\u0111ay-\u0111u" tabindex="-1"><a class="header-anchor" href="#kiem-thu-parity-\u0111ay-\u0111u" aria-hidden="true">#</a> Ki\u1EC3m th\u1EED Parity \u0110\u1EA7y \u0111\u1EE7</h2><p>B\u1EA1n c\xF3 th\u1EC3 c\xE0i \u0111\u1EB7t Parity \u0110\u1EA7y \u0111\u1EE7 v\u1EDBi m\u1ED9t m\xF4i tr\u01B0\u1EDDng c\u1EE5 th\u1EC3 b\u1EB1ng c\xE1ch ch\u1EC9 r\xF5 \u0111\u1EC1 xu\u1EA5t n\xE0o s\u1EBD b\u1ECB v\xF4 hi\u1EC7u v\u1EDBi c\u1EDD <code>--deactivate-feature &lt;FEATURE_PUBKEY&gt;</code> cho m\u1ED7i l\u1EA7n ch\u1EA1y <code>solana-test-validator</code>:</p><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana-test-validator --deactivate-feature PUBKEY_1 --deactivate-feature PUBKEY_2 ...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>C\xE1ch kh\xE1c, <a href="#resources">scfsd</a> c\xF3 cung c\u1EA5p c\xE1c c\xE2u l\u1EC7nh \u0111\u1EC3 chuy\u1EC3n \u0111\u1ED5i \u0111\u1EC3 gi\xFAp nhanh ch\xF3ng v\xF4 hi\u1EC7u ho\xE1 m\u1ED9t t\u1EADp c\xE1c \u0111\u1EC1 xu\u1EA5t cho m\u1ED9t m\xF4i tr\u01B0\u1EDDng v\xE0 truy\u1EC1n v\xE0o tr\u1EF1c ti\u1EBFp l\xFAc <code>solana-test-validator</code> kh\u1EDFi ch\u1EA1y:</p><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana-test-validator -l ./.ledger $(scfsd -c devnet -k -t)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>N\u1EBFu b\u1EA1n m\u1EDF m\u1ED9t c\u1EEDa s\u1ED5 l\u1EC7nh kh\xE1c v\xE0 ch\u1EA1y <code>solana feature status</code> trong khi validator \u0111ang ch\u1EA1y th\xEC b\u1EA1n s\u1EBD th\u1EA5y c\xE1c \u0111\u1EC1 xu\u1EA5t b\u1ECB t\u1EAFt s\u1EBD gi\u1ED1ng v\u1EDBi c\xE0i \u0111\u1EB7t \u0111\xE8 xu\u1EA5t tr\xEAn m\xF4i tr\u01B0\u1EDDng devnet.</p><h2 id="cai-\u0111at-tu-\u0111ong-cho-kiem-thu-parity-\u0111ay-\u0111u" tabindex="-1"><a class="header-anchor" href="#cai-\u0111at-tu-\u0111ong-cho-kiem-thu-parity-\u0111ay-\u0111u" aria-hidden="true">#</a> C\xE0i \u0111\u1EB7t t\u1EF1 \u0111\u1ED9ng cho Ki\u1EC3m th\u1EED Parity \u0110\u1EA7y \u0111\u1EE7</h2><p>V\u1EDBi nh\u1EEFng l\u1EADp tr\xECnh vi\xEAn hay ki\u1EC3m so\xE1t qu\xE1 tr\xECnh kh\u1EDFi ch\u1EA1y validator \u0111\u1EC3 ki\u1EC3m th\u1EED b\u1EB1ng code, vi\u1EC7c ch\u1EC9nh s\u1EEDa c\xE1c c\xE0i \u0111\u1EB7t \u0111\u1EC1 xu\u1EA5t cho validator l\xE0 kh\u1EA3 thi v\u1EDBi TestValidatorGenesis. V\u1EDBi phi\xEAn b\u1EA3n Solana 1.9.6, m\u1ED9t ch\u1EE9c n\u0103ng \u0111\xE3 \u0111\u01B0\u1EE3c th\xEAm v\xE0o trong validator \u0111\u1EC3 h\u1ED7 tr\u1EE3 \u0111i\u1EC1u \u0111\xF3.</p><p>T\u1EA1i th\u01B0 m\u1EE5c g\u1ED1 c\u1EE7a ch\u01B0\u01A1ng tr\xECnh, t\u1EA1o m\u1ED9t th\u01B0 m\u1EE5c v\u1EDBi t\xEAn <code>tests</code> v\xE0 th\xEAm t\u1EADp tin <code>parity_test.rs</code>. B\xEAn d\u01B0\u1EDBi l\xE0 m\u1ED9t v\xE0i h\xE0m m\u1EABu b\u1EA1n c\xF3 th\u1EC3 s\u1EED d\u1EE5ng ch\xFAng cho m\u1ED7i b\xE0i ki\u1EC3m th\u1EED.</p>`,45),f=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token attribute attr-name"},"#[cfg(test)]"),s(`
`),n("span",{class:"token keyword"},"mod"),s(),n("span",{class:"token module-declaration namespace"},"tests"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("error"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("path"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"PathBuf"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"str"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"FromStr"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Use gadget-scfs to get interegate feature lists from clusters"),s(`
    `),n("span",{class:"token comment"},'// must have `gadgets-scfs = "0.2.0" in Cargo.toml [dev-dependencies] to use'),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("gadgets_scfs"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"ScfsCriteria"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ScfsMatrix"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"SCFS_DEVNET"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_client"),n("span",{class:"token punctuation"},"::"),s("rpc_client"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"RpcClient"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token namespace"},[s("instruction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("message"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Message"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_sdk"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// Added in Solana 1.9.2"),s(`
        `),n("span",{class:"token namespace"},[s("compute_budget"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ComputeBudgetInstruction"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token namespace"},[s("signature"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"Keypair"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Signature"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token namespace"},[s("signer"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Signer"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token namespace"},[s("transaction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Extended in Solana 1.9.6"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_test_validator"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"TestValidator"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"TestValidatorGenesis"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"/// Location/Name of ProgramTestGenesis ledger"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"LEDGER_PATH"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"str"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"./.ledger"'),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"/// Path to BPF program (*.so) change if needed"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PROG_PATH"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"str"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"target/deploy/"'),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"/// Program name from program Cargo.toml"),s(`
    `),n("span",{class:"token comment"},"/// FILL IN WITH YOUR PROGRAM_NAME"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PROG_NAME"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"str"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"PROGRAM_NAME"'),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"/// Program public key"),s(`
    `),n("span",{class:"token comment"},"/// FILL IN WITH YOUR PROGRAM'S PUBLIC KEY str"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Pubkey"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"pubkey!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"PROGRAMS_PUBLIC_KEY_BASE58_STRING"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"/// 'transaction wide compute cap' public key"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"TXWIDE_LIMITS"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Pubkey"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"pubkey!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"5ekBxc8itEnPv4NzGJtr8BVVQLNMQuLMNQQj7pHoLNZ9"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"/// Setup the test validator passing features"),s(`
    `),n("span",{class:"token comment"},"/// you want to deactivate before running transactions"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"setup_validator"),n("span",{class:"token punctuation"},"("),s(`
        invalidate_features`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Vec"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"TestValidator"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Keypair"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token namespace"},[s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// Extend environment variable to include our program location"),s(`
        `),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("env"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"set_var"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"BPF_OUT_DIR"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"PROG_PATH"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// Instantiate the test validator"),s(`
        `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" test_validator "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"TestValidatorGenesis"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// Once instantiated, TestValidatorGenesis configuration functions follow"),s(`
        `),n("span",{class:"token comment"},"// a builder pattern enabling chaining of settings function calls"),s(`
        `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("test_validator"),n("span",{class:"token punctuation"},","),s(" kp"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(` test_validator
            `),n("span",{class:"token comment"},"// Set the ledger path and name"),s(`
            `),n("span",{class:"token comment"},"// maps to `solana-test-validator --ledger <DIR>`"),s(`
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ledger_path"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"LEDGER_PATH"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token comment"},"// Load our program. Ignored if reusing ledger"),s(`
            `),n("span",{class:"token comment"},"// maps to `solana-test-validator --bpf-program <ADDRESS_OR_PATH BPF_PROGRAM.SO>`"),s(`
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add_program"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PROG_NAME"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token comment"},"// Identify features to deactivate. Ignored if reusing ledger"),s(`
            `),n("span",{class:"token comment"},"// maps to `solana-test-validator --deactivate-feature <FEATURE_PUBKEY>`"),s(`
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"deactivate_features"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("invalidate_features"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token comment"},"// Start the test validator"),s(`
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("test_validator"),n("span",{class:"token punctuation"},","),s(" kp"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"/// Convenience function to remove existing ledger before TestValidatorGenesis setup"),s(`
    `),n("span",{class:"token comment"},"/// maps to `solana-test-validator ... --reset`"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"clean_ledger_setup_validator"),n("span",{class:"token punctuation"},"("),s(`
        invalidate_features`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Vec"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"TestValidator"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Keypair"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token namespace"},[s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token class-name"},"PathBuf"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"from_str"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"LEDGER_PATH"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exists"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("fs"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"remove_dir_all"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"LEDGER_PATH"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token function"},"setup_validator"),n("span",{class:"token punctuation"},"("),s("invalidate_features"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"/// Submits a transaction with programs instruction"),s(`
    `),n("span",{class:"token comment"},"/// Boiler plate"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"submit_transaction"),n("span",{class:"token punctuation"},"("),s(`
        rpc_client`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"RpcClient"),n("span",{class:"token punctuation"},","),s(`
        wallet_signer`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token class-name"},"Signer"),n("span",{class:"token punctuation"},","),s(`
        instructions`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Vec"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Signature"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" transaction "),n("span",{class:"token operator"},"="),s(`
            `),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_unsigned"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Message"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("instructions"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("wallet_signer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pubkey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" recent_blockhash "),n("span",{class:"token operator"},"="),s(` rpc_client
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get_latest_blockhash"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("err"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"error: unable to get recent blockhash: {}"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
        transaction
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_sign"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token macro property"},"vec!"),n("span",{class:"token punctuation"},"["),s("wallet_signer"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" recent_blockhash"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("err"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"error: failed to sign transaction: {}"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" signature "),n("span",{class:"token operator"},"="),s(` rpc_client
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send_and_confirm_transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("transaction"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("err"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"error: send transaction: {}"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("signature"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"// UNIT TEST FOLLOWS"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br")])],-1),_=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"/// Setup the test validator passing features"),s(`
`),n("span",{class:"token comment"},"/// you want to deactivate before running transactions"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"setup_validator"),n("span",{class:"token punctuation"},"("),s(`
    invalidate_features`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Vec"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"TestValidator"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Keypair"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token namespace"},[s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Extend environment variable to include our program location"),s(`
    `),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("env"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"set_var"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"BPF_OUT_DIR"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"PROG_PATH"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Instantiate the test validator"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" test_validator "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"TestValidatorGenesis"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Once instantiated, TestValidatorGenesis configuration functions follow"),s(`
    `),n("span",{class:"token comment"},"// a builder pattern enabling chaining of settings function calls"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("test_validator"),n("span",{class:"token punctuation"},","),s(" kp"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(` test_validator
        `),n("span",{class:"token comment"},"// Set the ledger path and name"),s(`
        `),n("span",{class:"token comment"},"// maps to `solana-test-validator --ledger <DIR>`"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ledger_path"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"LEDGER_PATH"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token comment"},"// Load our program. Ignored if reusing ledger"),s(`
        `),n("span",{class:"token comment"},"// maps to `solana-test-validator --bpf-program <ADDRESS_OR_PATH BPF_PROGRAM.SO>`"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add_program"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PROG_NAME"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token comment"},"// Identify features to deactivate. Ignored if reusing ledger"),s(`
        `),n("span",{class:"token comment"},"// maps to `solana-test-validator --deactivate-feature <FEATURE_PUBKEY>`"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"deactivate_features"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("invalidate_features"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token comment"},"// Start the test validator"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("test_validator"),n("span",{class:"token punctuation"},","),s(" kp"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Convenience function to remove existing ledger before TestValidatorGenesis setup"),s(`
`),n("span",{class:"token comment"},"/// maps to `solana-test-validator ... --reset`"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"clean_ledger_setup_validator"),n("span",{class:"token punctuation"},"("),s(`
    invalidate_features`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Vec"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"TestValidator"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Keypair"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token namespace"},[s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token class-name"},"PathBuf"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"from_str"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"LEDGER_PATH"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"exists"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("fs"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"remove_dir_all"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"LEDGER_PATH"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token function"},"setup_validator"),n("span",{class:"token punctuation"},"("),s("invalidate_features"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Submits a transaction with programs instruction"),s(`
`),n("span",{class:"token comment"},"/// Boiler plate"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"submit_transaction"),n("span",{class:"token punctuation"},"("),s(`
    rpc_client`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"RpcClient"),n("span",{class:"token punctuation"},","),s(`
    wallet_signer`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token class-name"},"Signer"),n("span",{class:"token punctuation"},","),s(`
    instructions`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Vec"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Signature"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" transaction "),n("span",{class:"token operator"},"="),s(`
        `),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_unsigned"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Message"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("instructions"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("wallet_signer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pubkey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" recent_blockhash "),n("span",{class:"token operator"},"="),s(` rpc_client
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get_latest_blockhash"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("err"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"error: unable to get recent blockhash: {}"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    transaction
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_sign"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token macro property"},"vec!"),n("span",{class:"token punctuation"},"["),s("wallet_signer"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" recent_blockhash"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("err"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"error: failed to sign transaction: {}"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" signature "),n("span",{class:"token operator"},"="),s(` rpc_client
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send_and_confirm_transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("transaction"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("err"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"error: send transaction: {}"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("signature"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br")])],-1),v=n("p",null,[s("Ch\xFAng ta c\xF3 th\u1EC3 th\xEAm c\xE1c b\xE0i ki\u1EC3m th\u1EED b\xEAn trong "),n("code",null,"mod test {...}"),s(" \u0111\u1EC3 ch\u1EA1y v\u1EDBi c\xE0i \u0111\u1EB7t m\u1EB7c \u0111\u1ECBnh c\u1EE7a validator (v\u1EDBi t\u1EA5t c\u1EA3 c\xE1c \u0111\u1EC1 xu\u1EA5t \u0111\u01B0\u1EE3c k\xEDch ho\u1EA1t) v\xE0 sau \u0111\xF3 c\xF3 th\u1EC3 v\xF4 hi\u1EC7u ho\xE1 \u0111\u1EC1 xu\u1EA5t "),n("code",null,"transaction wide compute cap"),s(" v\u1EDBi m\u1ED7i v\xED d\u1EE5 ch\u1EA1y "),n("code",null,"solana-test-validator"),s(" b\u1EB1ng l\u1EC7nh.")],-1),y=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token attribute attr-name"},"#[test]"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"test_base_pass"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Run with all features activated (default for TestValidatorGenesis)"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" inv_feat "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"vec!"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Start validator with clean (new) ledger"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("test_validator"),n("span",{class:"token punctuation"},","),s(" main_payer"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"clean_ledger_setup_validator"),n("span",{class:"token punctuation"},"("),s("inv_feat"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Get the RpcClient"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" connection "),n("span",{class:"token operator"},"="),s(" test_validator"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get_rpc_client"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Capture our programs log statements"),s(`
    `),n("span",{class:"token namespace"},[s("solana_logger"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"setup_with_default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"solana_runtime::message=debug"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// This example doesn't require sending any accounts to program"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Build instruction array and submit transaction"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" txn "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"submit_transaction"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token operator"},"&"),s("connection"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("main_payer"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token comment"},"// Add two (2) instructions to transaction to demonstrate"),s(`
        `),n("span",{class:"token comment"},"// that each instruction CU draws down from default Transaction CU (200_000)"),s(`
        `),n("span",{class:"token comment"},"// Replace with instructions that make sense for your program"),s(`
        `),n("span",{class:"token punctuation"},"["),s(`
            `),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_with_borsh"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token number"},"0u8"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_with_borsh"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token number"},"1u8"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"]"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token macro property"},"assert!"),n("span",{class:"token punctuation"},"("),s("txn"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br")])],-1),w=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token attribute attr-name"},"#[test]"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"test_deactivate_tx_cu_pass"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Run with all features activated except 'transaction wide compute cap'"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" inv_feat "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"vec!"),n("span",{class:"token punctuation"},"["),n("span",{class:"token constant"},"TXWIDE_LIMITS"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Start validator with clean (new) ledger"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("test_validator"),n("span",{class:"token punctuation"},","),s(" main_payer"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"clean_ledger_setup_validator"),n("span",{class:"token punctuation"},"("),s("inv_feat"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Get the RpcClient"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" connection "),n("span",{class:"token operator"},"="),s(" test_validator"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get_rpc_client"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Capture our programs log statements"),s(`
    `),n("span",{class:"token namespace"},[s("solana_logger"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"setup_with_default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"solana_runtime::message=debug"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// This example doesn't require sending any accounts to program"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Build instruction array and submit transaction"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" txn "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"submit_transaction"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token operator"},"&"),s("connection"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("main_payer"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"["),s(`
            `),n("span",{class:"token comment"},"// This instruction adds CU to transaction budget (1.9.2) but does nothing"),s(`
            `),n("span",{class:"token comment"},"// when we deactivate the 'transaction wide compute cap' feature"),s(`
            `),n("span",{class:"token class-name"},"ComputeBudgetInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"request_units"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"400_000u32"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token comment"},"// Add two (2) instructions to transaction"),s(`
            `),n("span",{class:"token comment"},"// Replace with instructions that make sense for your program"),s(`
            `),n("span",{class:"token comment"},"// You will see that each instruction has the 1.8.x 200_000 CU per budget"),s(`
            `),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_with_borsh"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token number"},"0u8"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_with_borsh"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token number"},"1u8"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"]"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token macro property"},"assert!"),n("span",{class:"token punctuation"},"("),s("txn"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br")])],-1),x=n("p",null,[s("Ngo\xE0i ra, "),n("a",{href:"#resources"},"scfs engine gadget"),s(" c\xF3 th\u1EC3 t\u1EA1o ra m\u1ED9t vec-t\u01A1 ho\xE0n ch\u1EC9nh \u0111\u1EC3 v\xF4 hi\u1EC7u ho\xE1 c\xE1c \u0111\u1EC1 xu\u1EA5t cho m\u1ED9t m\xF4i tr\u01B0\u1EDDng c\u1EE5 th\u1EC3. V\xED d\u1EE5 b\xEAn d\u01B0\u1EDBi cho th\u1EA5y c\u01A1 ch\u1EBF \u0111\u1EC3 li\u1EC7t k\xEA to\xE0n b\u1ED9 c\xE1c \u0111\u1EC3 xu\u1EA5t \u0111\xE3 b\u1ECB v\xF4 hi\u1EC7u tr\xEAn devnet.")],-1),P=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token attribute attr-name"},"#[test]"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"test_devnet_parity_pass"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Use gadget-scfs to get all deactivated features from devnet"),s(`
    `),n("span",{class:"token comment"},'// must have `gadgets-scfs = "0.2.0" in Cargo.toml to use'),s(`
    `),n("span",{class:"token comment"},"// Here we setup for a run that samples features only"),s(`
    `),n("span",{class:"token comment"},"// from devnet"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" my_matrix "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ScfsMatrix"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ScfsCriteria"),s(),n("span",{class:"token punctuation"},"{"),s(`
        clusters`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token macro property"},"vec!"),n("span",{class:"token punctuation"},"["),n("span",{class:"token constant"},"SCFS_DEVNET"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},".."),n("span",{class:"token class-name"},"Default"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Run the sampler matrix"),s(`
    `),n("span",{class:"token macro property"},"assert!"),n("span",{class:"token punctuation"},"("),s("my_matrix"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Get all deactivated features"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" deactivated "),n("span",{class:"token operator"},"="),s(` my_matrix
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get_features"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"ScfsMatrix"),n("span",{class:"token punctuation"},"::"),s("any_inactive"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Confirm we have them"),s(`
    `),n("span",{class:"token macro property"},"assert_ne!"),n("span",{class:"token punctuation"},"("),s("deactivated"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Setup test validator and logging while deactivating all"),s(`
    `),n("span",{class:"token comment"},"// features that are deactivated in devnet"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("test_validator"),n("span",{class:"token punctuation"},","),s(" main_payer"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"clean_ledger_setup_validator"),n("span",{class:"token punctuation"},"("),s("deactivated"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" connection "),n("span",{class:"token operator"},"="),s(" test_validator"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get_rpc_client"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token namespace"},[s("solana_logger"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"setup_with_default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"solana_runtime::message=debug"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(" accounts "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" txn "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"submit_transaction"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token operator"},"&"),s("connection"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("main_payer"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"["),s(`
            `),n("span",{class:"token comment"},"// Add two (2) instructions to transaction"),s(`
            `),n("span",{class:"token comment"},"// Replace with instructions that make sense for your program"),s(`
            `),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_with_borsh"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token number"},"0u8"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_with_borsh"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token number"},"1u8"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"]"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token macro property"},"assert!"),n("span",{class:"token punctuation"},"("),s("txn"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br")])],-1),B=n("p",null,"Ch\xFAc b\u1EA1n c\xF3 th\u1EDDi gian ki\u1EC3m th\u1EED vui v\u1EBB!",-1),G=n("h2",{id:"cac-nguon-tai-lieu-khac",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cac-nguon-tai-lieu-khac","aria-hidden":"true"},"#"),s(),n("a",{name:"resources"}),s(" C\xE1c ngu\u1ED3n t\xE0i li\u1EC7u kh\xE1c")],-1),T={href:"https://github.com/FrankC01/solana-gadgets/tree/main/rust/scfsd",target:"_blank",rel:"noopener noreferrer"},E=s("scfsd"),R={href:"https://github.com/FrankC01/solana-gadgets/tree/main/rust/gadgets-scfs",target:"_blank",rel:"noopener noreferrer"},L=s("gadget-scfs");function S(C,D){const l=e("SolanaCodeGroupItem"),u=e("SolanaCodeGroup"),c=e("CodeGroupItem"),o=e("CodeGroup"),p=e("ExternalLinkIcon");return r(),k(m,null,[g,a(u,null,{default:t(()=>[a(l,{title:"Test Boiler Plate",active:""},{default:t(()=>[f]),preview:t(()=>[_]),_:1})]),_:1}),v,a(o,null,{default:t(()=>[a(c,{title:"All Features Test"},{default:t(()=>[y]),_:1}),a(c,{title:"Disable Tx CU Test",active:""},{default:t(()=>[w]),_:1})]),_:1}),x,a(o,null,{default:t(()=>[a(c,{title:"Devnet Parity"},{default:t(()=>[P]),_:1})]),_:1}),B,G,n("p",null,[n("a",T,[E,a(p)])]),n("p",null,[n("a",R,[L,a(p)])])],64)}var A=i(h,[["render",S]]);export{A as default};
