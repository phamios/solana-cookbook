import{_ as i,r as e,o as k,c as m,b as t,w as a,a as n,F as b,e as p,d as s}from"./app.07ce7a66.js";var d="/assets/pav1.1b0417ca.png",_="/assets/pav2.1ef612b4.png";const f={},y=p('<h1 id="\u30D5\u309A\u30ED\u30AF\u3099\u30E9\u30E0-\u30C6\u3099\u30FC\u30BF-\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u79FB\u884C" tabindex="-1"><a class="header-anchor" href="#\u30D5\u309A\u30ED\u30AF\u3099\u30E9\u30E0-\u30C6\u3099\u30FC\u30BF-\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u79FB\u884C" aria-hidden="true">#</a> \u30D7\u30ED\u30B0\u30E9\u30E0 \u30C7\u30FC\u30BF \u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u79FB\u884C</h1><h2 id="\u30D5\u309A\u30ED\u30AF\u3099\u30E9\u30E0\u306E\u30C6\u3099\u30FC\u30BF-\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u79FB\u884C\u3059\u308B\u306B\u306F\u3068\u3099\u3046\u3059\u308C\u306F\u3099\u3088\u3044\u3066\u3099\u3059\u304B" tabindex="-1"><a class="header-anchor" href="#\u30D5\u309A\u30ED\u30AF\u3099\u30E9\u30E0\u306E\u30C6\u3099\u30FC\u30BF-\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u79FB\u884C\u3059\u308B\u306B\u306F\u3068\u3099\u3046\u3059\u308C\u306F\u3099\u3088\u3044\u3066\u3099\u3059\u304B" aria-hidden="true">#</a> \u30D7\u30ED\u30B0\u30E9\u30E0\u306E\u30C7\u30FC\u30BF \u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u79FB\u884C\u3059\u308B\u306B\u306F\u3069\u3046\u3059\u308C\u3070\u3088\u3044\u3067\u3059\u304B\uFF1F</h2><p>\u30D7\u30ED\u30B0\u30E9\u30E0\u3092\u4F5C\u6210\u3059\u308B\u3068\u3001\u305D\u306E\u30D7\u30ED\u30B0\u30E9\u30E0\u306B\u95A2\u9023\u4ED8\u3051\u3089\u308C\u305F\u5404\u30C7\u30FC\u30BF \u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u7279\u5B9A\u306E\u30C7\u30FC\u30BF\u69CB\u9020\u3092\u6301\u3061\u307E\u3059\u3002 \u30D7\u30ED\u30B0\u30E9\u30E0\u304B\u3089\u6D3E\u751F\u3057\u305F\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30B0\u30EC\u30FC\u30C9\u3059\u308B\u5FC5\u8981\u304C\u3042\u308B\u5834\u5408\u306F\u3001\u53E4\u3044\u69CB\u9020\u306E\u30D7\u30ED\u30B0\u30E9\u30E0\u304B\u3089\u6D3E\u751F\u3057\u305F\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u305F\u304F\u3055\u3093\u6B8B\u3063\u3066\u3044\u308B\u3053\u3068\u306B\u306A\u308A\u307E\u3059\u3002</p><p>\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u30D0\u30FC\u30B8\u30E7\u30F3\u7BA1\u7406\u306B\u3088\u308A\u3001\u53E4\u3044\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u65B0\u3057\u3044\u69CB\u9020\u306B\u30A2\u30C3\u30D7\u30B0\u30EC\u30FC\u30C9\u3067\u304D\u307E\u3059\u3002</p><div class="custom-container tip"><p class="custom-container-title">Note</p><p>\u3053\u308C\u306F\u3001\u30D7\u30ED\u30B0\u30E9\u30E0\u6240\u6709\u30A2\u30AB\u30A6\u30F3\u30C8 (POA) \u3067\u30C7\u30FC\u30BF\u3092\u79FB\u884C\u3059\u308B\u591A\u304F\u306E\u65B9\u6CD5\u306E 1 \u3064\u306B\u3059\u304E\u307E\u305B\u3093\u3002</p></div><h2 id="scenario" tabindex="-1"><a class="header-anchor" href="#scenario" aria-hidden="true">#</a> Scenario</h2><p>\u30A2\u30AB\u30A6\u30F3\u30C8 \u30C7\u30FC\u30BF\u306E\u30D0\u30FC\u30B8\u30E7\u30F3\u7BA1\u7406\u3068\u79FB\u884C\u3092\u884C\u3046\u305F\u3081\u306B\u3001\u5404\u30A2\u30AB\u30A6\u30F3\u30C8\u306B <strong>ID</strong> \u3092\u63D0\u4F9B\u3057\u307E\u3059\u3002\u3053\u306E ID \u306B\u3088\u308A\u3001\u30D7\u30ED\u30B0\u30E9\u30E0\u306B\u6E21\u3059\u3068\u304D\u306B\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u30D0\u30FC\u30B8\u30E7\u30F3\u3092\u8B58\u5225\u3067\u304D\u308B\u305F\u3081\u3001\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u6B63\u3057\u304F\u51E6\u7406\u3067\u304D\u307E\u3059\u3002</p><p>\u6B21\u306E\u3088\u3046\u306A\u72B6\u614B\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u3068\u30D7\u30ED\u30B0\u30E9\u30E0\u3092\u53D6\u5F97\u3057\u307E\u3059\u3002</p><img src="'+d+'" alt="Program Account v1">',9),w=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"//! @brief account_state manages account data"),s(`

`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("arrayref"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("array_ref"),n("span",{class:"token punctuation"},","),s(" array_refs"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_pack"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"IsInitialized"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Pack"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Sealed"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token namespace"},[s("io"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"BufWriter"),n("span",{class:"token punctuation"},","),s(" mem"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Currently using state. If version changes occur, this"),s(`
`),n("span",{class:"token comment"},"/// should be copied to another serializable backlevel one"),s(`
`),n("span",{class:"token comment"},"/// before adding new fields here"),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"AccountContentCurrent"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(" somevalue"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Maintains account data"),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
    data_version`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},","),s(`
    account_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"/// Signal initialized"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"set_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Get the initialized flag"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token keyword"},"bool"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`is_initialized
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Gets the current data version"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"version"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token keyword"},"u8"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`data_version
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Get the reference to content structure"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"content"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"AccountContentCurrent"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`account_data
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Get the mutable reference to content structure"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"content_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`account_data
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Declaration of the current data version."),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"DATA_VERSION"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Account allocated size"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"ACCOUNT_ALLOCATION_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1024"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Initialized flag is 1st byte of data block"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"IS_INITIALIZED"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Data version (current) is 2nd byte of data block"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"DATA_VERSION_ID"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Previous content data size (before changing this is equal to current)"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PREVIOUS_VERSION_DATA_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token namespace"},[s("mem"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"size_of"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Total space occupied by previous account data"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PREVIOUS_ACCOUNT_SPACE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(`
    `),n("span",{class:"token constant"},"IS_INITIALIZED"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"DATA_VERSION_ID"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"PREVIOUS_VERSION_DATA_SIZE"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Current content data size"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"CURRENT_VERSION_DATA_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token namespace"},[s("mem"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"size_of"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Total usage for data only"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"CURRENT_USED_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"IS_INITIALIZED"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"DATA_VERSION_ID"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"CURRENT_VERSION_DATA_SIZE"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// How much of 1024 is used"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"CURRENT_UNUSED_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"ACCOUNT_ALLOCATION_SIZE"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token constant"},"CURRENT_USED_SIZE"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Current space used by header (initialized, data version and Content)"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"CURRENT_USED_SIZE"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"CURRENT_UNUSED_SIZE"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Future data migration logic that converts prior state of data"),s(`
`),n("span",{class:"token comment"},"/// to current state of data"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"conversion_logic"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" past "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"array_ref!"),n("span",{class:"token punctuation"},"["),s("src"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"PREVIOUS_ACCOUNT_SPACE"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("initialized"),n("span",{class:"token punctuation"},","),s(" _"),n("span",{class:"token punctuation"},","),s(" _account_space"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"array_refs!"),n("span",{class:"token punctuation"},"["),s(`
        past`),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token constant"},"IS_INITIALIZED"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token constant"},"DATA_VERSION_ID"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token constant"},"PREVIOUS_VERSION_DATA_SIZE"),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Logic to uplift from previous version"),s(`
    `),n("span",{class:"token comment"},"// GOES HERE"),s(`

    `),n("span",{class:"token comment"},"// Give back"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
        is_initialized`),n("span",{class:"token punctuation"},":"),s(" initialized"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token number"},"0u8"),n("span",{class:"token punctuation"},","),s(`
        data_version`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token constant"},"DATA_VERSION"),n("span",{class:"token punctuation"},","),s(`
        account_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"Sealed"),s(),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"IsInitialized"),s(),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"is_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token keyword"},"bool"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`is_initialized
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"Pack"),s(),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"LEN"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"/// Store 'state' of account to its data area"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"pack_into_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},","),s(" dst"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" bw "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"BufWriter"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),s("dst"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" bw"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"/// Retrieve 'state' of account from account data area"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"unpack_from_slice"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" initialized "),n("span",{class:"token operator"},"="),s(" src"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// Check initialized"),s(`
        `),n("span",{class:"token keyword"},"if"),s(" initialized "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"// Version check"),s(`
            `),n("span",{class:"token keyword"},"if"),s(" src"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token constant"},"DATA_VERSION"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Processing consistent data"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s(`
                    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token macro property"},"array_ref!"),n("span",{class:"token punctuation"},"["),s("src"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"CURRENT_USED_SIZE"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(`
                        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
                `),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Processing backlevel data"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token function"},"conversion_logic"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Processing pre-initialized data"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
                is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
                data_version`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token constant"},"DATA_VERSION"),n("span",{class:"token punctuation"},","),s(`
                account_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br"),n("span",{class:"line-number"},"93"),n("br"),n("span",{class:"line-number"},"94"),n("br"),n("span",{class:"line-number"},"95"),n("br"),n("span",{class:"line-number"},"96"),n("br"),n("span",{class:"line-number"},"97"),n("br"),n("span",{class:"line-number"},"98"),n("br"),n("span",{class:"line-number"},"99"),n("br"),n("span",{class:"line-number"},"100"),n("br"),n("span",{class:"line-number"},"101"),n("br"),n("span",{class:"line-number"},"102"),n("br"),n("span",{class:"line-number"},"103"),n("br"),n("span",{class:"line-number"},"104"),n("br"),n("span",{class:"line-number"},"105"),n("br"),n("span",{class:"line-number"},"106"),n("br"),n("span",{class:"line-number"},"107"),n("br"),n("span",{class:"line-number"},"108"),n("br"),n("span",{class:"line-number"},"109"),n("br"),n("span",{class:"line-number"},"110"),n("br"),n("span",{class:"line-number"},"111"),n("br"),n("span",{class:"line-number"},"112"),n("br"),n("span",{class:"line-number"},"113"),n("br"),n("span",{class:"line-number"},"114"),n("br"),n("span",{class:"line-number"},"115"),n("br"),n("span",{class:"line-number"},"116"),n("br"),n("span",{class:"line-number"},"117"),n("br"),n("span",{class:"line-number"},"118"),n("br"),n("span",{class:"line-number"},"119"),n("br"),n("span",{class:"line-number"},"120"),n("br"),n("span",{class:"line-number"},"121"),n("br"),n("span",{class:"line-number"},"122"),n("br"),n("span",{class:"line-number"},"123"),n("br"),n("span",{class:"line-number"},"124"),n("br"),n("span",{class:"line-number"},"125"),n("br"),n("span",{class:"line-number"},"126"),n("br"),n("span",{class:"line-number"},"127"),n("br"),n("span",{class:"line-number"},"128"),n("br"),n("span",{class:"line-number"},"129"),n("br"),n("span",{class:"line-number"},"130"),n("br"),n("span",{class:"line-number"},"131"),n("br"),n("span",{class:"line-number"},"132"),n("br"),n("span",{class:"line-number"},"133"),n("br"),n("span",{class:"line-number"},"134"),n("br"),n("span",{class:"line-number"},"135"),n("br"),n("span",{class:"line-number"},"136"),n("br"),n("span",{class:"line-number"},"137"),n("br")])],-1),g=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"AccountContentCurrent"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(" somevalue"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
    data_version`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},","),s(`
    account_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br")])],-1),h=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"//! instruction Contains the main ProgramInstruction enum"),s(`

`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"crate"),n("span",{class:"token module-declaration namespace"},[n("span",{class:"token punctuation"},"::"),s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::"),s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, PartialEq)]"),s(`
`),n("span",{class:"token comment"},"/// All custom program instructions"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"enum"),s(),n("span",{class:"token type-definition class-name"},"ProgramInstruction"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token class-name"},"InitializeAccount"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"SetU64Value"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"FailInstruction"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"ProgramInstruction"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"/// Unpack inbound buffer to associated Instruction"),s(`
    `),n("span",{class:"token comment"},"/// The expected format for input is a Borsh serialized vector"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"unpack"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" payload "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"match"),s(" payload "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InitializeAccount"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("payload"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"SetU64Value"),n("span",{class:"token punctuation"},"("),s("_"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("payload"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            _ `),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidInstruction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br")])],-1),I=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"ProgramInstruction"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"/// Unpack inbound buffer to associated Instruction"),s(`
    `),n("span",{class:"token comment"},"/// The expected format for input is a Borsh serialized vector"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"unpack"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" payload "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"match"),s(" payload "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InitializeAccount"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("payload"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"SetU64Value"),n("span",{class:"token punctuation"},"("),s("_"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("payload"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            _ `),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidInstruction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br")])],-1),A=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"//! Resolve instruction and execute"),s(`

`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token keyword"},"crate"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_state"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("instruction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_pack"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"IsInitialized"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Pack"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Checks each tracking account to confirm it is owned by our program"),s(`
`),n("span",{class:"token comment"},"/// This function assumes that the program account is always the last"),s(`
`),n("span",{class:"token comment"},"/// in the array"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"check_account_ownership"),n("span",{class:"token punctuation"},"("),s("program_id"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Accounts must be owned by the program."),s(`
    `),n("span",{class:"token keyword"},"for"),s(" account "),n("span",{class:"token keyword"},"in"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"take"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"if"),s(" account"),n("span",{class:"token punctuation"},"."),s("owner "),n("span",{class:"token operator"},"!="),s(" program_id "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),s(`
                `),n("span",{class:"token string"},'"Fail: The tracking account owner is {} and it should be {}."'),n("span",{class:"token punctuation"},","),s(`
                account`),n("span",{class:"token punctuation"},"."),s("owner"),n("span",{class:"token punctuation"},","),s(`
                program_id
            `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"IncorrectProgramId"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Initialize the programs account, which is the first in accounts"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"initialize_account"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Initialize account"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" program_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_data "),n("span",{class:"token operator"},"="),s(" program_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Just using unpack will check to see if initialized and will"),s(`
    `),n("span",{class:"token comment"},"// fail if not"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack_unchecked"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Where this is a logic error in trying to initialize the same account more than once"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" account_state"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"AlreadyInitializedState"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"content_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("somevalue "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Account Initialized"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Serialize"),s(`
    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"pack"),n("span",{class:"token punctuation"},"("),s("account_state"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" account_data"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Sets the u64 in the content structure"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"set_u64_value"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Set new value {}"'),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" program_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_data "),n("span",{class:"token operator"},"="),s(" program_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"content_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("somevalue "),n("span",{class:"token operator"},"="),s(" value"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Serialize"),s(`
    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"pack"),n("span",{class:"token punctuation"},"("),s("account_state"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" account_data"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token comment"},"/// Main processing entry point dispatches to specific"),s(`
`),n("span",{class:"token comment"},"/// instruction handlers"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process"),n("span",{class:"token punctuation"},"("),s(`
    program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Received process request"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Check the account for program relationship"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"check_account_ownership"),n("span",{class:"token punctuation"},"("),s("program_id"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Unpack the inbound data, mapping instruction to appropriate structure"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack"),n("span",{class:"token punctuation"},"("),s("instruction_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"match"),s(" instruction "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InitializeAccount"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"initialize_account"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"SetU64Value"),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"set_u64_value"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        _ `),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Received unknown instruction"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidInstruction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br")])],-1),S=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"check_account_ownership"),n("span",{class:"token punctuation"},"("),s("program_id"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Accounts must be owned by the program."),s(`
    `),n("span",{class:"token keyword"},"for"),s(" account "),n("span",{class:"token keyword"},"in"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"take"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"if"),s(" account"),n("span",{class:"token punctuation"},"."),s("owner "),n("span",{class:"token operator"},"!="),s(" program_id "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),s(`
                `),n("span",{class:"token string"},'"Fail: The tracking account owner is {} and it should be {}."'),n("span",{class:"token punctuation"},","),s(`
                account`),n("span",{class:"token punctuation"},"."),s("owner"),n("span",{class:"token punctuation"},","),s(`
                program_id
            `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"IncorrectProgramId"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Initialize the programs account, which is the first in accounts"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"initialize_account"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Initialize account"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" program_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_data "),n("span",{class:"token operator"},"="),s(" program_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Just using unpack will check to see if initialized and will"),s(`
    `),n("span",{class:"token comment"},"// fail if not"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack_unchecked"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Where this is a logic error in trying to initialize the same account more than once"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" account_state"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"AlreadyInitializedState"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"content_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("somevalue "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Account Initialized"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Serialize"),s(`
    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"pack"),n("span",{class:"token punctuation"},"("),s("account_state"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" account_data"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Sets the u64 in the content structure"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"set_u64_value"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Set new value {}"'),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" program_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_data "),n("span",{class:"token operator"},"="),s(" program_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"content_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("somevalue "),n("span",{class:"token operator"},"="),s(" value"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Serialize"),s(`
    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"pack"),n("span",{class:"token punctuation"},"("),s("account_state"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" account_data"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token comment"},"/// Main processing entry point dispatches to specific"),s(`
`),n("span",{class:"token comment"},"/// instruction handlers"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process"),n("span",{class:"token punctuation"},"("),s(`
    program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Received process request"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Check the account for program relationship"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"check_account_ownership"),n("span",{class:"token punctuation"},"("),s("program_id"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Unpack the inbound data, mapping instruction to appropriate structure"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack"),n("span",{class:"token punctuation"},"("),s("instruction_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"match"),s(" instruction "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InitializeAccount"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"initialize_account"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"SetU64Value"),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"set_u64_value"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        _ `),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Received unknown instruction"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidInstruction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br")])],-1),E=p('<p>\u6700\u521D\u306E\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u3067\u306F\u3001\u6B21\u306E\u3053\u3068\u3092\u884C\u3063\u3066\u3044\u307E\u3059\u3002</p><table><thead><tr><th>ID</th><th>Action</th></tr></thead><tbody><tr><td>1</td><td>\u30C7\u30FC\u30BF\u306B\u300C\u30C7\u30FC\u30BF \u30D0\u30FC\u30B8\u30E7\u30F3\u300D\u30D5\u30A3\u30FC\u30EB\u30C9\u3092\u542B\u3081\u307E\u3059\u3002\u3053\u308C\u306F\u5358\u7D14\u306A\u5897\u5206\u5E8F\u6570 (u8 \u306A\u3069)\u3084\u3001\u3088\u308A\u6D17\u7DF4\u3055\u308C\u305F\u3082\u306E\u306B\u3059\u308B\u3053\u3068\u304C\u3067\u308B\u306F\u305A\u3067\u3059\u3002</td></tr><tr><td>2</td><td>\u30C7\u30FC\u30BF\u306E\u5897\u52A0\u306B\u5341\u5206\u306A\u30B9\u30DA\u30FC\u30B9\u3092\u5272\u308A\u5F53\u3066\u307E\u3059\u3002</td></tr><tr><td>3</td><td>\u30D7\u30ED\u30B0\u30E9\u30E0\u306E\u30D0\u30FC\u30B8\u30E7\u30F3\u9593\u3067\u4F7F\u7528\u3055\u308C\u308B\u591A\u6570\u306E\u5B9A\u6570\u306E\u521D\u671F\u5316</td></tr><tr><td>4</td><td>\u5C06\u6765\u306E\u30A2\u30C3\u30D7\u30B0\u30EC\u30FC\u30C9\u306E\u305F\u3081\u306B <code>fn conversion_logic</code> \u306E\u4E0B\u306B\u66F4\u65B0\u30A2\u30AB\u30A6\u30F3\u30C8\u95A2\u6570\u3092\u8FFD\u52A0\u3057\u307E\u3059</td></tr></tbody></table><p>\u30D7\u30ED\u30B0\u30E9\u30E0\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30B0\u30EC\u30FC\u30C9\u3057\u3066\u3001\u65B0\u3057\u3044\u5FC5\u9808\u30D5\u30A3\u30FC\u30EB\u30C9\u3067\u3042\u308B <code>somestring</code> \u30D5\u30A3\u30FC\u30EB\u30C9\u3092\u542B\u3081\u308B\u3068\u3057\u307E\u3059\u3002</p><p>\u4EE5\u524D\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u306B\u4F59\u5206\u306A\u30B9\u30DA\u30FC\u30B9\u3092\u5272\u308A\u5F53\u3066\u306A\u304B\u3063\u305F\u5834\u5408\u3001\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30B0\u30EC\u30FC\u30C9\u3067\u304D\u305A\u3001\u30B9\u30BF\u30C3\u30AF\u3057\u3066\u3057\u307E\u3046\u3053\u3068\u306B\u306A\u308A\u307E\u3059\u3002</p><h2 id="\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u30A2\u30C3\u30D5\u309A\u30AF\u3099\u30EC\u30FC\u30C8\u3099" tabindex="-1"><a class="header-anchor" href="#\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u30A2\u30C3\u30D5\u309A\u30AF\u3099\u30EC\u30FC\u30C8\u3099" aria-hidden="true">#</a> \u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u30A2\u30C3\u30D7\u30B0\u30EC\u30FC\u30C9</h2><p>\u65B0\u3057\u3044\u30D7\u30ED\u30B0\u30E9\u30E0\u3067\u306F\u3001\u30B3\u30F3\u30C6\u30F3\u30C4\u72B6\u614B\u306E\u65B0\u3057\u3044\u30D7\u30ED\u30D1\u30C6\u30A3\u3092\u8FFD\u52A0\u3057\u305F\u3044\u3068\u8003\u3048\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u5F8C\u306E\u5909\u66F4\u306F\u3001\u521D\u671F\u306E\u30D7\u30ED\u30B0\u30E9\u30E0\u69CB\u6210\u3092\u3069\u306E\u3088\u3046\u306B\u5229\u7528\u3059\u308B\u304B\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002</p><h3 id="_1-\u30A2\u30AB\u30A6\u30F3\u30C8\u5909\u63DB\u30ED\u30B7\u3099\u30C3\u30AF\u3092\u8FFD\u52A0\u3059\u308B" tabindex="-1"><a class="header-anchor" href="#_1-\u30A2\u30AB\u30A6\u30F3\u30C8\u5909\u63DB\u30ED\u30B7\u3099\u30C3\u30AF\u3092\u8FFD\u52A0\u3059\u308B" aria-hidden="true">#</a> 1. \u30A2\u30AB\u30A6\u30F3\u30C8\u5909\u63DB\u30ED\u30B8\u30C3\u30AF\u3092\u8FFD\u52A0\u3059\u308B</h3>',7),v=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"//! @brief account_state manages account data"),s(`

`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("arrayref"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("array_ref"),n("span",{class:"token punctuation"},","),s(" array_refs"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),s("try_from_slice_unchecked"),n("span",{class:"token punctuation"},","),s(`
    msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_pack"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"IsInitialized"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Pack"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Sealed"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token namespace"},[s("io"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"BufWriter"),n("span",{class:"token punctuation"},","),s(" mem"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Current state (DATA_VERSION 1). If version changes occur, this"),s(`
`),n("span",{class:"token comment"},"/// should be copied to another (see AccountContentOld below)"),s(`
`),n("span",{class:"token comment"},"/// We've added a new field: 'somestring'"),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"AccountContentCurrent"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(" somevalue"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token keyword"},"pub"),s(" somestring"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Old content state (DATA_VERSION 0)."),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"AccountContentOld"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(" somevalue"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Maintains account data"),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
    data_version`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},","),s(`
    account_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"/// Signal initialized"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"set_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Get the initialized flag"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token keyword"},"bool"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`is_initialized
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Gets the current data version"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"version"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token keyword"},"u8"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`data_version
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Get the reference to content structure"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"content"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"AccountContentCurrent"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`account_data
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Get the mutable reference to content structure"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"content_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`account_data
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Declaration of the current data version."),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"DATA_VERSION"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// Adding string to content"),s(`
                            `),n("span",{class:"token comment"},"// Previous const DATA_VERSION: u8 = 0;"),s(`

`),n("span",{class:"token comment"},"/// Account allocated size"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"ACCOUNT_ALLOCATION_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1024"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Initialized flag is 1st byte of data block"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"IS_INITIALIZED"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Data version (current) is 2nd byte of data block"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"DATA_VERSION_ID"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Previous content data size (before changing this is equal to current)"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PREVIOUS_VERSION_DATA_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token namespace"},[s("mem"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"size_of"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"AccountContentOld"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Total space occupied by previous account data"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PREVIOUS_ACCOUNT_SPACE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"IS_INITIALIZED"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"DATA_VERSION_ID"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"PREVIOUS_VERSION_DATA_SIZE"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Current content data size"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"CURRENT_VERSION_DATA_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token namespace"},[s("mem"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"size_of"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Total usage for data only"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"CURRENT_USED_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"IS_INITIALIZED"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"DATA_VERSION_ID"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"CURRENT_VERSION_DATA_SIZE"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// How much of 1024 is used"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"CURRENT_UNUSED_SIZE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"ACCOUNT_ALLOCATION_SIZE"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token constant"},"CURRENT_USED_SIZE"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Current space used by header (initialized, data version and Content)"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"CURRENT_USED_SIZE"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"CURRENT_UNUSED_SIZE"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Future data migration logic that converts prior state of data"),s(`
`),n("span",{class:"token comment"},"/// to current state of data"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"conversion_logic"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" past "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"array_ref!"),n("span",{class:"token punctuation"},"["),s("src"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"PREVIOUS_ACCOUNT_SPACE"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("initialized"),n("span",{class:"token punctuation"},","),s(" _"),n("span",{class:"token punctuation"},","),s(" account_space"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"array_refs!"),n("span",{class:"token punctuation"},"["),s(`
        past`),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token constant"},"IS_INITIALIZED"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token constant"},"DATA_VERSION_ID"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token constant"},"PREVIOUS_VERSION_DATA_SIZE"),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Logic to upgrade from previous version"),s(`
    `),n("span",{class:"token comment"},"// GOES HERE"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" old "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"try_from_slice_unchecked"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"AccountContentOld"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"("),s("account_space"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},`// Default sets 'somevalue' to 0 and somestring to default ""`),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" new_content "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// We copy the existing 'somevalue', the program instructions will read/update 'somestring' without fail"),s(`
    new_content`),n("span",{class:"token punctuation"},"."),s("somevalue "),n("span",{class:"token operator"},"="),s(" old"),n("span",{class:"token punctuation"},"."),s("somevalue"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Give back"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
        is_initialized`),n("span",{class:"token punctuation"},":"),s(" initialized"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token number"},"0u8"),n("span",{class:"token punctuation"},","),s(`
        data_version`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token constant"},"DATA_VERSION"),n("span",{class:"token punctuation"},","),s(`
        account_data`),n("span",{class:"token punctuation"},":"),s(" new_content"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"Sealed"),s(),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"IsInitialized"),s(),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"is_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token keyword"},"bool"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`is_initialized
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"Pack"),s(),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"LEN"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"/// Store 'state' of account to its data area"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"pack_into_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},","),s(" dst"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" bw "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"BufWriter"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),s("dst"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" bw"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"/// Retrieve 'state' of account from account data area"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"unpack_from_slice"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" initialized "),n("span",{class:"token operator"},"="),s(" src"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// Check initialized"),s(`
        `),n("span",{class:"token keyword"},"if"),s(" initialized "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"// Version check"),s(`
            `),n("span",{class:"token keyword"},"if"),s(" src"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token constant"},"DATA_VERSION"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Processing consistent version data"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"try_from_slice_unchecked"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Processing backlevel data"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token function"},"conversion_logic"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Processing pre-initialized data"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
                is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
                data_version`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token constant"},"DATA_VERSION"),n("span",{class:"token punctuation"},","),s(`
                account_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"default"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br"),n("span",{class:"line-number"},"93"),n("br"),n("span",{class:"line-number"},"94"),n("br"),n("span",{class:"line-number"},"95"),n("br"),n("span",{class:"line-number"},"96"),n("br"),n("span",{class:"line-number"},"97"),n("br"),n("span",{class:"line-number"},"98"),n("br"),n("span",{class:"line-number"},"99"),n("br"),n("span",{class:"line-number"},"100"),n("br"),n("span",{class:"line-number"},"101"),n("br"),n("span",{class:"line-number"},"102"),n("br"),n("span",{class:"line-number"},"103"),n("br"),n("span",{class:"line-number"},"104"),n("br"),n("span",{class:"line-number"},"105"),n("br"),n("span",{class:"line-number"},"106"),n("br"),n("span",{class:"line-number"},"107"),n("br"),n("span",{class:"line-number"},"108"),n("br"),n("span",{class:"line-number"},"109"),n("br"),n("span",{class:"line-number"},"110"),n("br"),n("span",{class:"line-number"},"111"),n("br"),n("span",{class:"line-number"},"112"),n("br"),n("span",{class:"line-number"},"113"),n("br"),n("span",{class:"line-number"},"114"),n("br"),n("span",{class:"line-number"},"115"),n("br"),n("span",{class:"line-number"},"116"),n("br"),n("span",{class:"line-number"},"117"),n("br"),n("span",{class:"line-number"},"118"),n("br"),n("span",{class:"line-number"},"119"),n("br"),n("span",{class:"line-number"},"120"),n("br"),n("span",{class:"line-number"},"121"),n("br"),n("span",{class:"line-number"},"122"),n("br"),n("span",{class:"line-number"},"123"),n("br"),n("span",{class:"line-number"},"124"),n("br"),n("span",{class:"line-number"},"125"),n("br"),n("span",{class:"line-number"},"126"),n("br"),n("span",{class:"line-number"},"127"),n("br"),n("span",{class:"line-number"},"128"),n("br"),n("span",{class:"line-number"},"129"),n("br"),n("span",{class:"line-number"},"130"),n("br"),n("span",{class:"line-number"},"131"),n("br"),n("span",{class:"line-number"},"132"),n("br"),n("span",{class:"line-number"},"133"),n("br"),n("span",{class:"line-number"},"134"),n("br"),n("span",{class:"line-number"},"135"),n("br"),n("span",{class:"line-number"},"136"),n("br"),n("span",{class:"line-number"},"137"),n("br"),n("span",{class:"line-number"},"138"),n("br"),n("span",{class:"line-number"},"139"),n("br"),n("span",{class:"line-number"},"140"),n("br"),n("span",{class:"line-number"},"141"),n("br"),n("span",{class:"line-number"},"142"),n("br"),n("span",{class:"line-number"},"143"),n("br"),n("span",{class:"line-number"},"144"),n("br"),n("span",{class:"line-number"},"145"),n("br"),n("span",{class:"line-number"},"146"),n("br"),n("span",{class:"line-number"},"147"),n("br"),n("span",{class:"line-number"},"148"),n("br")])],-1),z=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"/// Current state (DATA_VERSION 1). If version changes occur, this"),s(`
`),n("span",{class:"token comment"},"/// should be copied to another (see AccountContentOld below)"),s(`
`),n("span",{class:"token comment"},"/// We've added a new field: 'somestring'"),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"AccountContentCurrent"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(" somevalue"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token keyword"},"pub"),s(" somestring"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Old content state (DATA_VERSION 0)."),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"AccountContentOld"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(" somevalue"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Maintains account data"),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
    data_version`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},","),s(`
    account_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"AccountContentCurrent"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br")])],-1),P=p("<table><thead><tr><th>Line(s)</th><th>Note</th></tr></thead><tbody><tr><td>6</td><td>Solana \u306E <code>solana_program::borsh::try_from_slice_unchecked</code> \u3092\u8FFD\u52A0\u3057\u3066\u3001\u3088\u308A\u5927\u304D\u306A\u30C7\u30FC\u30BF \u30D6\u30ED\u30C3\u30AF\u304B\u3089\u306E\u30C7\u30FC\u30BF\u306E\u30B5\u30D6\u30BB\u30C3\u30C8\u306E\u8AAD\u307F\u53D6\u308A\u3092\u7C21\u7D20\u5316\u3057\u307E\u3057\u305F\u3002</td></tr><tr><td>13-26</td><td>\u3053\u3053\u3067\u306F\u300117 \u884C\u76EE\u304B\u3089\u59CB\u307E\u308B <code>AccountContentCurrent</code> \u3092\u62E1\u5F35\u3059\u308B\u524D\u306B\u3001\u53E4\u3044\u30B3\u30F3\u30C6\u30F3\u30C4\u69CB\u9020\u3067\u3042\u308B <code>AccountContentOld</code> \u884C 24 \u3092\u4FDD\u6301\u3057\u3066\u3044\u307E\u3059\u3002</td></tr><tr><td>60</td><td><code>DATA_VERSION</code>\u5B9A\u6570\u3092\u5897\u3084\u3057\u307E\u3059</td></tr><tr><td>71</td><td>\u4EE5\u524D\u306E\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30C7\u30FC\u30BF\u30B5\u30A4\u30BA\u304C\u308F\u304B\u308B\u3088\u3046\u306B\u3057\u307E\u3059\u3002</td></tr><tr><td>86</td><td>\u3068\u3069\u3081\u306E\u4E00\u6483\u306F\u3001\u4EE5\u524D\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u306E\u72B6\u614B\u3092\u65B0\u3057\u3044 (\u73FE\u5728\u306E) \u30B3\u30F3\u30C6\u30F3\u30C4\u306E\u72B6\u614B\u306B\u30A2\u30C3\u30D7\u30B0\u30EC\u30FC\u30C9\u3059\u308B\u914D\u7BA1\u3092\u8FFD\u52A0\u3059\u308B\u3053\u3068\u3067\u3059\u3002</td></tr></tbody></table><p>\u6B21\u306B\u3001<code>somestring</code> \u547D\u4EE4\u3092\u66F4\u65B0\u3057\u3066\u3001\u6587\u5B57\u5217\u3092\u66F4\u65B0\u3059\u308B\u305F\u3081\u306E\u65B0\u3057\u3044\u547D\u4EE4\u3068\u3001\u65B0\u3057\u3044\u547D\u4EE4\u3092\u51E6\u7406\u3059\u308B\u305F\u3081\u306E\u30D7\u30ED\u30BB\u30C3\u30B5\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002\u30C7\u30FC\u30BF\u69CB\u9020\u306E\u300C\u30A2\u30C3\u30D7\u30B0\u30EC\u30FC\u30C9\u300D\u306F\u3001<code>pack/unpack</code>\u306E\u80CC\u5F8C\u306B\u30AB\u30D7\u30BB\u30EB\u5316\u3055\u308C\u3066\u3044\u308B\u3053\u3068\u306B\u6CE8\u610F\u3057\u3066\u304F\u3060\u3055\u3044\u3002</p>",2),C=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"//! instruction Contains the main VersionProgramInstruction enum"),s(`

`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"crate"),n("span",{class:"token module-declaration namespace"},[n("span",{class:"token punctuation"},"::"),s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),s("try_from_slice_unchecked"),n("span",{class:"token punctuation"},","),s(" msg"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug, PartialEq)]"),s(`
`),n("span",{class:"token comment"},"/// All custom program instructions"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"enum"),s(),n("span",{class:"token type-definition class-name"},"VersionProgramInstruction"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token class-name"},"InitializeAccount"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"SetU64Value"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"SetString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Added with data version change"),s(`
    `),n("span",{class:"token class-name"},"FailInstruction"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"VersionProgramInstruction"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"/// Unpack inbound buffer to associated Instruction"),s(`
    `),n("span",{class:"token comment"},"/// The expected format for input is a Borsh serialized vector"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"unpack"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" payload "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"try_from_slice_unchecked"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"VersionProgramInstruction"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// let payload = VersionProgramInstruction::try_from_slice(input).unwrap();"),s(`
        `),n("span",{class:"token keyword"},"match"),s(" payload "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token class-name"},"VersionProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InitializeAccount"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("payload"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"VersionProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"SetU64Value"),n("span",{class:"token punctuation"},"("),s("_"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("payload"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"VersionProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"SetString"),n("span",{class:"token punctuation"},"("),s("_"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("payload"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// Added with data version change"),s(`
            _ `),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidInstruction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br")])],-1),D=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"//! Resolve instruction and execute"),s(`

`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token keyword"},"crate"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_state"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("instruction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"VersionProgramInstruction"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_pack"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"IsInitialized"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Pack"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Checks each tracking account to confirm it is owned by our program"),s(`
`),n("span",{class:"token comment"},"/// This function assumes that the program account is always the last"),s(`
`),n("span",{class:"token comment"},"/// in the array"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"check_account_ownership"),n("span",{class:"token punctuation"},"("),s("program_id"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Accounts must be owned by the program."),s(`
    `),n("span",{class:"token keyword"},"for"),s(" account "),n("span",{class:"token keyword"},"in"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"take"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"if"),s(" account"),n("span",{class:"token punctuation"},"."),s("owner "),n("span",{class:"token operator"},"!="),s(" program_id "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),s(`
                `),n("span",{class:"token string"},'"Fail: The tracking account owner is {} and it should be {}."'),n("span",{class:"token punctuation"},","),s(`
                account`),n("span",{class:"token punctuation"},"."),s("owner"),n("span",{class:"token punctuation"},","),s(`
                program_id
            `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"IncorrectProgramId"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Initialize the programs account, which is the first in accounts"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"initialize_account"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Initialize account"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" program_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_data "),n("span",{class:"token operator"},"="),s(" program_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Just using unpack will check to see if initialized and will"),s(`
    `),n("span",{class:"token comment"},"// fail if not"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack_unchecked"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Where this is a logic error in trying to initialize the same account more than once"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" account_state"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"AlreadyInitializedState"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"content_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("somevalue "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Account Initialized"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Serialize"),s(`
    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"pack"),n("span",{class:"token punctuation"},"("),s("account_state"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" account_data"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Sets the u64 in the content structure"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"set_u64_value"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Set new value {}"'),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" program_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_data "),n("span",{class:"token operator"},"="),s(" program_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"content_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("somevalue "),n("span",{class:"token operator"},"="),s(" value"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Serialize"),s(`
    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"pack"),n("span",{class:"token punctuation"},"("),s("account_state"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" account_data"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Sets the string in the content structure"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"set_string_value"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Set new string {}"'),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" program_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_data "),n("span",{class:"token operator"},"="),s(" program_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"content_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("somestring "),n("span",{class:"token operator"},"="),s(" value"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Serialize"),s(`
    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"pack"),n("span",{class:"token punctuation"},"("),s("account_state"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" account_data"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token comment"},"/// Main processing entry point dispatches to specific"),s(`
`),n("span",{class:"token comment"},"/// instruction handlers"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process"),n("span",{class:"token punctuation"},"("),s(`
    program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Received process request 0.2.0"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Check the account for program relationship"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"check_account_ownership"),n("span",{class:"token punctuation"},"("),s("program_id"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Unpack the inbound data, mapping instruction to appropriate structure"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Attempting to unpack"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"VersionProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack"),n("span",{class:"token punctuation"},"("),s("instruction_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"match"),s(" instruction "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"VersionProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InitializeAccount"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"initialize_account"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token class-name"},"VersionProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"SetU64Value"),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"set_u64_value"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token class-name"},"VersionProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"SetString"),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token function"},"set_string_value"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        _ `),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Received unknown instruction"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"DataVersionError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidInstruction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br"),n("span",{class:"line-number"},"93"),n("br"),n("span",{class:"line-number"},"94"),n("br"),n("span",{class:"line-number"},"95"),n("br"),n("span",{class:"line-number"},"96"),n("br"),n("span",{class:"line-number"},"97"),n("br"),n("span",{class:"line-number"},"98"),n("br"),n("span",{class:"line-number"},"99"),n("br"),n("span",{class:"line-number"},"100"),n("br"),n("span",{class:"line-number"},"101"),n("br"),n("span",{class:"line-number"},"102"),n("br")])],-1),R=n("p",null,[n("code",null,"VersionProgramInstruction::SetString(String)"),s("\u547D\u4EE4\u3092\u4F5C\u6210\u3057\u3066\u9001\u4FE1\u3059\u308B\u3053\u3068\u3067\u3001\u6B21\u306E\u300C\u30A2\u30C3\u30D7\u30B0\u30EC\u30FC\u30C9\u3055\u308C\u305F\u300D\u30A2\u30AB\u30A6\u30F3\u30C8 \u30C7\u30FC\u30BF \u30EC\u30A4\u30A2\u30A6\u30C8\u304C\u3067\u304D\u307E\u3057\u305F\u3002")],-1),T=n("img",{src:_,alt:"Program Account v2"},null,-1),O=n("h2",{id:"\u305D\u306E\u4ED6\u53C2\u8003\u8CC7\u6599",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u305D\u306E\u4ED6\u53C2\u8003\u8CC7\u6599","aria-hidden":"true"},"#"),s(" \u305D\u306E\u4ED6\u53C2\u8003\u8CC7\u6599")],-1),N={href:"https://borsh.io/",target:"_blank",rel:"noopener noreferrer"},V=s("Borsh Specification"),U={href:"https://github.com/solana-labs/solana/blob/master/sdk/program/src/borsh.rs#L67",target:"_blank",rel:"noopener noreferrer"},B=s("Solana "),x=n("code",null,"try_from_slice_unchecked",-1),Z={href:"https://github.com/FrankC01/versioning-solana",target:"_blank",rel:"noopener noreferrer"},L=s("Reference Implementation");function G(q,F){const o=e("SolanaCodeGroupItem"),l=e("SolanaCodeGroup"),u=e("CodeGroupItem"),r=e("CodeGroup"),c=e("ExternalLinkIcon");return k(),m(b,null,[y,t(l,null,{default:a(()=>[t(o,{title:"Account",active:""},{default:a(()=>[w]),preview:a(()=>[g]),_:1}),t(o,{title:"Instruction",active:""},{default:a(()=>[h]),preview:a(()=>[I]),_:1}),t(o,{title:"Processor",active:""},{default:a(()=>[A]),preview:a(()=>[S]),_:1})]),_:1}),E,t(l,null,{default:a(()=>[t(o,{title:"Account"},{default:a(()=>[v]),preview:a(()=>[z]),_:1})]),_:1}),P,t(r,null,{default:a(()=>[t(u,{title:"Instruction"},{default:a(()=>[C]),_:1}),t(u,{title:"Processor"},{default:a(()=>[D]),_:1})]),_:1}),R,T,O,n("ul",null,[n("li",null,[n("a",N,[V,t(c)])]),n("li",null,[n("a",U,[B,x,t(c)])]),n("li",null,[n("a",Z,[L,t(c)])])])],64)}var M=i(f,[["render",G]]);export{M as default};
