import{_ as r,r as c,o as i,c as k,b as t,w as a,F as b,a as n,d as s,e as p}from"./app.07ce7a66.js";const m={},d=n("h1",{id:"\u7DE8\u5BEB\u7A0B\u5E8F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7DE8\u5BEB\u7A0B\u5E8F","aria-hidden":"true"},"#"),s(" \u7DE8\u5BEB\u7A0B\u5E8F")],-1),_=n("h2",{id:"\u5982\u4F55\u5728\u7A0B\u5E8F\u4E2D\u8F49\u79FB-sol",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5982\u4F55\u5728\u7A0B\u5E8F\u4E2D\u8F49\u79FB-sol","aria-hidden":"true"},"#"),s(" \u5982\u4F55\u5728\u7A0B\u5E8F\u4E2D\u8F49\u79FB SOL")],-1),y=n("p",null,'\u4F60\u7684Solana\u7A0B\u5E8F\u53EF\u4EE5\u5728\u4E0D"\u8ABF\u7528"\u7CFB\u7D71\u7A0B\u5E8F\u7684\u60C5\u6CC1\u4E0B\u5C07lamports\u5F9E\u4E00\u500B\u8CEC\u6236\u8F49\u79FB\u7D66\u53E6\u4E00\u500B\u8CEC\u6236\u3002\u57FA\u672C\u898F\u5247\u662F\uFF0C\u4F60\u7684\u7A0B\u5E8F\u53EF\u4EE5\u5C07lamports\u5F9E\u4F60\u7684\u7A0B\u5E8F\u6240\u64C1\u6709\u7684\u4EFB\u4F55\u8CEC\u6236\u8F49\u79FB\u5230\u4EFB\u4F55\u8CEC\u6236\u3002',-1),f=n("p",null,"\u63A5\u6536\u65B9\u8CEC\u6236\u4E0D\u4E00\u5B9A\u8981\u662F\u4F60\u7684\u7A0B\u5E8F\u6240\u64C1\u6709\u7684\u8CEC\u6236\u3002",-1),w=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"/// Transfers lamports from one account (must be program owned)"),s(`
`),n("span",{class:"token comment"},"/// to another account. The recipient can by any account"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"transfer_service_fee_lamports"),n("span",{class:"token punctuation"},"("),s(`
    from_account`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},","),s(`
    to_account`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},","),s(`
    amount_of_lamports`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Does the from account have enough lamports to transfer?"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token operator"},"*"),n("span",{class:"token operator"},"*"),s("from_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_borrow_lamports"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),s(),n("span",{class:"token operator"},"<"),s(" amount_of_lamports "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"CustomError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InsufficientFundsForTransaction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"// Debit from_account and credit to_account"),s(`
    `),n("span",{class:"token operator"},"*"),n("span",{class:"token operator"},"*"),s("from_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_borrow_mut_lamports"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),s(),n("span",{class:"token operator"},"-="),s(" amount_of_lamports"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token operator"},"*"),n("span",{class:"token operator"},"*"),s("to_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_borrow_mut_lamports"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),s(),n("span",{class:"token operator"},"+="),s(" amount_of_lamports"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Primary function handler associated with instruction sent"),s(`
`),n("span",{class:"token comment"},"/// to your program"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"instruction_handler"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Get the 'from' and 'to' accounts"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" from_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" to_service_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Extract a service 'fee' of 5 lamports for performing this instruction"),s(`
    `),n("span",{class:"token function"},"transfer_service_fee_lamports"),n("span",{class:"token punctuation"},"("),s("from_account"),n("span",{class:"token punctuation"},","),s(" to_service_account"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5u64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Perform the primary instruction"),s(`
    `),n("span",{class:"token comment"},"// ... etc."),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br")])],-1),g=p('<h2 id="\u5982\u4F55\u5728\u7A0B\u5E8F\u4E2D\u7372\u53D6\u6642\u9418" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u5728\u7A0B\u5E8F\u4E2D\u7372\u53D6\u6642\u9418" aria-hidden="true">#</a> \u5982\u4F55\u5728\u7A0B\u5E8F\u4E2D\u7372\u53D6\u6642\u9418</h2><p>\u7372\u53D6\u6642\u9418\u7684\u65B9\u6CD5\u6709\u5169\u7A2E\uFF1A</p><ol><li>\u5C07<code>SYSVAR_CLOCK_PUBKEY</code>\u4F5C\u7232\u6307\u4EE4\u7684\u53C3\u6578\u50B3\u5165\u3002</li><li>\u5728\u6307\u4EE4\u5167\u90E8\u76F4\u63A5\u8A2A\u554F\u6642\u9418\u3002</li></ol><p>\u77AD\u89E3\u9019\u5169\u7A2E\u65B9\u6CD5\u6703\u5C0D\u4F60\u6709\u597D\u8655\uFF0C\u56E0\u7232\u4E00\u4E9B\u50B3\u7D71\u7684\u7A0B\u5E8F\u4ECD\u7136\u5C07SYSVAR_CLOCK_PUBKEY\u4F5C\u7232\u4E00\u500B\u8CEC\u6236\u4F86\u4F7F\u7528\u3002</p><h3 id="\u5728\u6307\u4EE4\u4E2D\u5C07\u6642\u9418\u4F5C\u7232\u4E00\u500B\u8CEC\u6236\u50B3\u905E" tabindex="-1"><a class="header-anchor" href="#\u5728\u6307\u4EE4\u4E2D\u5C07\u6642\u9418\u4F5C\u7232\u4E00\u500B\u8CEC\u6236\u50B3\u905E" aria-hidden="true">#</a> \u5728\u6307\u4EE4\u4E2D\u5C07\u6642\u9418\u4F5C\u7232\u4E00\u500B\u8CEC\u6236\u50B3\u905E</h3><p>\u8B93\u6211\u5011\u5275\u5EFA\u4E00\u500B\u6307\u4EE4\uFF0C\u8A72\u6307\u4EE4\u63A5\u6536\u4E00\u500B\u8CEC\u6236\u7528\u65BC\u521D\u59CB\u5316\uFF0C\u4E26\u63A5\u6536 SYSVAR \u7684\u516C\u9470\u3002</p>',6),h=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("clock"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Clock"),n("span",{class:"token punctuation"},","),s(`
    entrypoint`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("sysvar"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Sysvar"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token macro property"},"entrypoint!"),n("span",{class:"token punctuation"},"("),s("process_instruction"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(BorshSerialize, BorshDeserialize, Debug)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"HelloState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Accounts required"),s(`
`),n("span",{class:"token comment"},"/// 1. [signer, writable] Payer"),s(`
`),n("span",{class:"token comment"},"/// 2. [writable] Hello state account"),s(`
`),n("span",{class:"token comment"},"/// 3. [] Clock sys var"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
    _program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    _instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Payer account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" _payer_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Hello state account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" hello_state_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Clock sysvar"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" sysvar_clock_pubkey "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" hello_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"HelloState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("hello_state_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    hello_state`),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    hello_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" hello_state_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},".."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Account initialized :)"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Type casting [AccountInfo] to [Clock]"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" clock "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Clock"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"from_account_info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("sysvar_clock_pubkey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Getting timestamp"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" current_timestamp "),n("span",{class:"token operator"},"="),s(" clock"),n("span",{class:"token punctuation"},"."),s("unix_timestamp"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Current Timestamp: {}"'),n("span",{class:"token punctuation"},","),s(" current_timestamp"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br")])],-1),A=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"let"),s(" clock "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Clock"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"from_account_info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("sysvar_clock_pubkey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"let"),s(" current_timestamp "),n("span",{class:"token operator"},"="),s(" clock"),n("span",{class:"token punctuation"},"."),s("unix_timestamp"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br")])],-1),P=n("p",null,"\u73FE\u5728\uFF0C\u6211\u5011\u901A\u904E\u5BA2\u6236\u7AEF\u50B3\u905E\u6642\u9418\u7684 SYSVAR \u516C\u5171\u5730\u5740:",-1),I=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  clusterApiUrl`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(`
  PublicKey`),n("span",{class:"token punctuation"},","),s(`
  SystemProgram`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"SYSVAR_CLOCK_PUBKEY"),n("span",{class:"token punctuation"},","),s(`
  Transaction`),n("span",{class:"token punctuation"},","),s(`
  TransactionInstruction`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"77ezihTV6mTh2Uf3ggwbYF2NyGJJ5HHah1GrdowWJVD3"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Airdropping 1 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" feePayer "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),s("feePayer"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Hello state account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" helloAccount "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" accountSpace "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// because there exists just one boolean variable"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" rentRequired "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMinimumBalanceForRentExemption"),n("span",{class:"token punctuation"},"("),s(`
    accountSpace
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Allocating space for hello state account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" allocateHelloAccountIx "),n("span",{class:"token operator"},"="),s(" SystemProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    fromPubkey`),n("span",{class:"token operator"},":"),s(" feePayer"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" rentRequired"),n("span",{class:"token punctuation"},","),s(`
    newAccountPubkey`),n("span",{class:"token operator"},":"),s(" helloAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    space`),n("span",{class:"token operator"},":"),s(" accountSpace"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Passing Clock Sys Var"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" passClockIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" feePayer"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" helloAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"SYSVAR_CLOCK_PUBKEY"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("allocateHelloAccountIx"),n("span",{class:"token punctuation"},","),s(" passClockIx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    feePayer`),n("span",{class:"token punctuation"},","),s(`
    helloAccount`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Transaction succeeded. TxHash: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("txHash"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br")])],-1),T=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"77ezihTV6mTh2Uf3ggwbYF2NyGJJ5HHah1GrdowWJVD3"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Passing Clock Sys Var"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" passClockIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" helloAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        is_signer`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        is_writable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"SYSVAR_CLOCK_PUBKEY"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("passClockIx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    feePayer`),n("span",{class:"token punctuation"},","),s(`
    helloAccount`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Transaction succeeded. TxHash: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("txHash"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br")])],-1),E=n("h3",{id:"\u5728\u6307\u4EE4\u5167\u90E8\u76F4\u63A5\u8A2A\u554F\u6642\u9418",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5728\u6307\u4EE4\u5167\u90E8\u76F4\u63A5\u8A2A\u554F\u6642\u9418","aria-hidden":"true"},"#"),s(" \u5728\u6307\u4EE4\u5167\u90E8\u76F4\u63A5\u8A2A\u554F\u6642\u9418")],-1),R=n("p",null,[s("\u8B93\u6211\u5011\u5275\u5EFA\u540C\u6A23\u7684\u6307\u4EE4\uFF0C\u4F46\u9019\u6B21\u6211\u5011\u4E0D\u9700\u8981\u5F9E\u5BA2\u6236\u7AEF\u50B3\u905E"),n("code",null,"SYSVAR_CLOCK_PUBKEY"),s("\u3002")],-1),S=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("clock"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Clock"),n("span",{class:"token punctuation"},","),s(`
    entrypoint`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("sysvar"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Sysvar"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token macro property"},"entrypoint!"),n("span",{class:"token punctuation"},"("),s("process_instruction"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(BorshSerialize, BorshDeserialize, Debug)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"HelloState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Accounts required"),s(`
`),n("span",{class:"token comment"},"/// 1. [signer, writable] Payer"),s(`
`),n("span",{class:"token comment"},"/// 2. [writable] Hello state account"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
    _program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    _instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Payer account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" _payer_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Hello state account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" hello_state_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Getting clock directly"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" clock "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Clock"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" hello_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"HelloState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("hello_state_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    hello_state`),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    hello_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" hello_state_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},".."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Account initialized :)"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Getting timestamp"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" current_timestamp "),n("span",{class:"token operator"},"="),s(" clock"),n("span",{class:"token punctuation"},"."),s("unix_timestamp"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Current Timestamp: {}"'),n("span",{class:"token punctuation"},","),s(" current_timestamp"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br")])],-1),x=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"let"),s(" clock "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Clock"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"let"),s(" current_timestamp "),n("span",{class:"token operator"},"="),s(" clock"),n("span",{class:"token punctuation"},"."),s("unix_timestamp"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br")])],-1),v=n("p",null,"\u73FE\u5728\uFF0C\u5BA2\u6236\u7AEF\u53EA\u9700\u8981\u50B3\u905E\u72C0\u614B\u548C\u652F\u4ED8\u8CEC\u6236\u7684\u6307\u4EE4:",-1),C=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  clusterApiUrl`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(`
  PublicKey`),n("span",{class:"token punctuation"},","),s(`
  SystemProgram`),n("span",{class:"token punctuation"},","),s(`
  Transaction`),n("span",{class:"token punctuation"},","),s(`
  TransactionInstruction`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"4ZEdbCtb5UyCSiAMHV5eSHfyjq3QwbG3yXb6oHD7RYjk"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Airdropping 1 SOL"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" feePayer "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),s("feePayer"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Hello state account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" helloAccount "),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" accountSpace "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// because there exists just one boolean variable"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" rentRequired "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMinimumBalanceForRentExemption"),n("span",{class:"token punctuation"},"("),s(`
    accountSpace
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Allocating space for hello state account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" allocateHelloAccountIx "),n("span",{class:"token operator"},"="),s(" SystemProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    fromPubkey`),n("span",{class:"token operator"},":"),s(" feePayer"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" rentRequired"),n("span",{class:"token punctuation"},","),s(`
    newAccountPubkey`),n("span",{class:"token operator"},":"),s(" helloAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    space`),n("span",{class:"token operator"},":"),s(" accountSpace"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" initIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" feePayer"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" helloAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("allocateHelloAccountIx"),n("span",{class:"token punctuation"},","),s(" initIx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    feePayer`),n("span",{class:"token punctuation"},","),s(`
    helloAccount`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Transaction succeeded. TxHash: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("txHash"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br")])],-1),K=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"4ZEdbCtb5UyCSiAMHV5eSHfyjq3QwbG3yXb6oHD7RYjk"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// No more requirement to pass clock sys var key"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" initAccountIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" helloAccount"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("initAccountIx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    feePayer`),n("span",{class:"token punctuation"},","),s(`
    helloAccount`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Transaction succeeded. TxHash: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("txHash"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br")])],-1),O=n("h2",{id:"\u5982\u4F55\u66F4\u6539\u8CEC\u6236\u5927\u5C0F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5982\u4F55\u66F4\u6539\u8CEC\u6236\u5927\u5C0F","aria-hidden":"true"},"#"),s(" \u5982\u4F55\u66F4\u6539\u8CEC\u6236\u5927\u5C0F")],-1),N=n("p",null,[s("\u4F60\u53EF\u4EE5\u4F7F\u7528"),n("code",null,"realloc"),s("\u51FD\u6578\u4F86\u66F4\u6539\u7A0B\u5E8F\u64C1\u6709\u7684\u8CEC\u6236\u7684\u5927\u5C0F\u3002"),n("code",null,"realloc"),s("\u51FD\u6578\u53EF\u4EE5\u5C07\u8CEC\u6236\u7684\u5927\u5C0F\u8ABF\u6574\u5230\u6700\u592710KB\u3002\u7576\u4F60\u4F7F\u7528"),n("code",null,"realloc"),s("\u589E\u52A0\u8CEC\u6236\u7684\u5927\u5C0F\u6642\uFF0C\u4F60\u9700\u8981\u8F49\u79FBlamports\u4EE5\u4FDD\u6301\u8A72\u8CEC\u6236\u7684\u79DF\u91D1\u514D\u9664\u72C0\u614B\u3002")],-1),D=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"crate"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token namespace"},[s("instruction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"WhitelistInstruction"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token namespace"},[s("state"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"WhiteListData"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
      msg`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token namespace"},[s("program"),n("span",{class:"token punctuation"},"::")]),s("invoke_signed"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token namespace"},[s("program"),n("span",{class:"token punctuation"},"::")]),s("invoke"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token namespace"},[s("sysvar"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Sysvar"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token namespace"},[s("sysvar"),n("span",{class:"token punctuation"},"::"),s("rent"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},","),s(`
      system_instruction`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("convert"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"TryInto"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
  _program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
  accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  input`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// Length = BOOL + VEC + Pubkey * n (n = number of keys)"),s(`
  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"INITIAL_ACCOUNT_LEN"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"4"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"input: {:?}"'),n("span",{class:"token punctuation"},","),s(" input"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"let"),s(" instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"WhitelistInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"let"),s(" funding_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"let"),s(" pda_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"let"),s(" system_program "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"match"),s(" instruction "),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token class-name"},"WhitelistInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"Initialize"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Initialize"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

      `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("pda"),n("span",{class:"token punctuation"},","),s(" pda_bump"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"find_program_address"),n("span",{class:"token punctuation"},"("),s(`
          `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s(`
            `),n("span",{class:"token string"},'b"customaddress"'),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token operator"},"&"),s("funding_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_bytes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
          _program_id`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

      `),n("span",{class:"token keyword"},"let"),s(" signers_seeds"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s(`
          `),n("span",{class:"token string"},'b"customaddress"'),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token operator"},"&"),s("funding_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_bytes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s("pda_bump"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
      
      `),n("span",{class:"token keyword"},"if"),s(" pda"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ne"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("pda_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`

      `),n("span",{class:"token keyword"},"let"),s(" lamports_required "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"minimum_balance"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"INITIAL_ACCOUNT_LEN"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"let"),s(" create_pda_account_ix "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token namespace"},[s("system_instruction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"create_account"),n("span",{class:"token punctuation"},"("),s(`
          `),n("span",{class:"token operator"},"&"),s("funding_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token operator"},"&"),s("pda_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
          lamports_required`),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token constant"},"INITIAL_ACCOUNT_LEN"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token operator"},"&"),s("_program_id"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

      `),n("span",{class:"token function"},"invoke_signed"),n("span",{class:"token punctuation"},"("),s(`
          `),n("span",{class:"token operator"},"&"),s("create_pda_account_ix"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s(`
              funding_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
              pda_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
              system_program`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s("signers_seeds"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
      
      `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" pda_account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"WhiteListData"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("pda_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

      pda_account_state`),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
      pda_account_state`),n("span",{class:"token punctuation"},"."),s("white_list "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Vec"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      pda_account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" pda_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},".."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token class-name"},"WhitelistInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"AddKey"),s(),n("span",{class:"token punctuation"},"{"),s(" key "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"AddKey"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

      `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" pda_account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"WhiteListData"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("pda_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
      
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token operator"},"!"),s("pda_account_state"),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`

      `),n("span",{class:"token keyword"},"let"),s(" new_size "),n("span",{class:"token operator"},"="),s(" pda_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"32"),n("span",{class:"token punctuation"},";"),s(`

      `),n("span",{class:"token keyword"},"let"),s(" rent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token keyword"},"let"),s(" new_minimum_balance "),n("span",{class:"token operator"},"="),s(" rent"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"minimum_balance"),n("span",{class:"token punctuation"},"("),s("new_size"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      
      `),n("span",{class:"token keyword"},"let"),s(" lamports_diff "),n("span",{class:"token operator"},"="),s(" new_minimum_balance"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"saturating_sub"),n("span",{class:"token punctuation"},"("),s("pda_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"lamports"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      `),n("span",{class:"token function"},"invoke"),n("span",{class:"token punctuation"},"("),s(`
          `),n("span",{class:"token operator"},"&"),n("span",{class:"token namespace"},[s("system_instruction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"transfer"),n("span",{class:"token punctuation"},"("),s("funding_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(" pda_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(" lamports_diff"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s(`
              funding_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
              pda_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
              system_program`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

      pda_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"realloc"),n("span",{class:"token punctuation"},"("),s("new_size"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

      pda_account_state`),n("span",{class:"token punctuation"},"."),s("white_list"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("key"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
      pda_account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" pda_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},".."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

      `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br"),n("span",{class:"line-number"},"93"),n("br"),n("span",{class:"line-number"},"94"),n("br"),n("span",{class:"line-number"},"95"),n("br"),n("span",{class:"line-number"},"96"),n("br"),n("span",{class:"line-number"},"97"),n("br"),n("span",{class:"line-number"},"98"),n("br"),n("span",{class:"line-number"},"99"),n("br"),n("span",{class:"line-number"},"100"),n("br"),n("span",{class:"line-number"},"101"),n("br"),n("span",{class:"line-number"},"102"),n("br"),n("span",{class:"line-number"},"103"),n("br"),n("span",{class:"line-number"},"104"),n("br"),n("span",{class:"line-number"},"105"),n("br"),n("span",{class:"line-number"},"106"),n("br"),n("span",{class:"line-number"},"107"),n("br"),n("span",{class:"line-number"},"108"),n("br"),n("span",{class:"line-number"},"109"),n("br"),n("span",{class:"line-number"},"110"),n("br"),n("span",{class:"line-number"},"111"),n("br"),n("span",{class:"line-number"},"112"),n("br"),n("span",{class:"line-number"},"113"),n("br"),n("span",{class:"line-number"},"114"),n("br"),n("span",{class:"line-number"},"115"),n("br"),n("span",{class:"line-number"},"116"),n("br"),n("span",{class:"line-number"},"117"),n("br"),n("span",{class:"line-number"},"118"),n("br"),n("span",{class:"line-number"},"119"),n("br")])],-1),U=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"// adding a publickey to the account"),s(`
`),n("span",{class:"token keyword"},"let"),s(" new_size "),n("span",{class:"token operator"},"="),s(" pda_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"32"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"let"),s(" rent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"let"),s(" new_minimum_balance "),n("span",{class:"token operator"},"="),s(" rent"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"minimum_balance"),n("span",{class:"token punctuation"},"("),s("new_size"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"let"),s(" lamports_diff "),n("span",{class:"token operator"},"="),s(" new_minimum_balance"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"saturating_sub"),n("span",{class:"token punctuation"},"("),s("pda_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"lamports"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token function"},"invoke"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token operator"},"&"),n("span",{class:"token namespace"},[s("system_instruction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"transfer"),n("span",{class:"token punctuation"},"("),s("funding_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(" pda_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(" lamports_diff"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s(`
        funding_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        pda_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        system_program`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

pda_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"realloc"),n("span",{class:"token punctuation"},"("),s("new_size"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br")])],-1),Y=p('<h2 id="\u8DE8\u7A0B\u5E8F\u8ABF\u7528\u7684\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u8DE8\u7A0B\u5E8F\u8ABF\u7528\u7684\u65B9\u6CD5" aria-hidden="true">#</a> \u8DE8\u7A0B\u5E8F\u8ABF\u7528\u7684\u65B9\u6CD5</h2><p>\u8DE8\u7A0B\u5E8F\u8ABF\u7528\uFF0C\u7C21\u55AE\u4F86\u8AAA\uFF0C\u5C31\u662F\u5728\u6211\u5011\u7684\u7A0B\u5E8F\u4E2D\u8ABF\u7528\u53E6\u4E00\u500B\u7A0B\u5E8F\u7684\u6307\u4EE4\u3002\u4E00\u500B\u5F88\u597D\u7684\u4F8B\u5B50\u662F<code>Uniswap</code>\u7684<code>swap</code>\u529F\u80FD\u3002<code>UniswapV2Router</code>\u5408\u7D04\u8ABF\u7528\u5FC5\u8981\u7684\u908F\u8F2F\u9032\u884C\u4EA4\u63DB\uFF0C\u4E26\u8ABF\u7528<code>ERC20</code>\u5408\u7D04\u7684transfer\u51FD\u6578\u5C07\u4EE3\u5E63\u5F9E\u4E00\u500B\u4EBA\u8F49\u79FB\u5230\u53E6\u4E00\u500B\u4EBA\u3002\u540C\u6A23\u7684\u65B9\u5F0F\uFF0C\u6211\u5011\u53EF\u4EE5\u8ABF\u7528\u7A0B\u5E8F\u7684\u6307\u4EE4\u4F86\u5BE6\u73FE\u591A\u7A2E\u76EE\u7684\u3002</p><p>\u8B93\u6211\u5011\u4F86\u770B\u770B\u6211\u5011\u7684\u7B2C\u4E00\u500B\u4F8B\u5B50\uFF0C\u5373<code>SPL Token Program</code>\u7684<code>transfer</code>\u6307\u4EE4\u3002\u9032\u884C\u8F49\u8CEC\u6240\u9700\u7684\u8CEC\u6236\u5305\u62EC\uFF1A</p><ol><li>\u6E90\u4EE3\u5E63\u8CEC\u6236\uFF08\u6211\u5011\u6301\u6709\u4EE3\u5E63\u7684\u8CEC\u6236\uFF09</li><li>\u76EE\u6A19\u4EE3\u5E63\u8CEC\u6236\uFF08\u6211\u5011\u8981\u5C07\u4EE3\u5E63\u8F49\u79FB\u81F3\u7684\u8CEC\u6236\uFF09</li><li>\u6E90\u4EE3\u5E63\u8CEC\u6236\u7684\u6301\u6709\u8005\uFF08\u6211\u5011\u5C07\u7232\u5176\u7C3D\u540D\u7684\u9322\u5305\u5730\u5740\uFF09</li></ol>',4),z=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    entrypoint`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program"),n("span",{class:"token punctuation"},"::")]),s("invoke"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("spl_token"),n("span",{class:"token punctuation"},"::"),s("instruction"),n("span",{class:"token punctuation"},"::")]),s("transfer"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token macro property"},"entrypoint!"),n("span",{class:"token punctuation"},"("),s("process_instruction"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Accounts required"),s(`
`),n("span",{class:"token comment"},"/// 1. [writable] Source Token Account"),s(`
`),n("span",{class:"token comment"},"/// 2. [writable] Destination Token Account"),s(`
`),n("span",{class:"token comment"},"/// 3. [signer] Source Token Account holder's PubKey"),s(`
`),n("span",{class:"token comment"},"/// 4. [] Token Program"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
    _program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Accounts required for token transfer"),s(`

    `),n("span",{class:"token comment"},"// 1. Token account we hold"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" source_token_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 2. Token account to send to"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" destination_token_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 3. Our wallet address"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" source_token_account_holder "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 4. Token Program"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" token_program "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Parsing the token transfer amount from instruction data"),s(`
    `),n("span",{class:"token comment"},"// a. Getting the 0th to 8th index of the u8 byte array"),s(`
    `),n("span",{class:"token comment"},"// b. Converting the obtained non zero u8 to a proper u8 (as little endian integers)"),s(`
    `),n("span",{class:"token comment"},"// c. Converting the little endian integers to a u64 number"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" token_transfer_amount "),n("span",{class:"token operator"},"="),s(` instruction_data
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},".."),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"and_then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("slice"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(" slice"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},"::"),s("from_le_bytes"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ok_or"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token string"},'"Transferring {} tokens from {} to {}"'),n("span",{class:"token punctuation"},","),s(`
        token_transfer_amount`),n("span",{class:"token punctuation"},","),s(`
        source_token_account`),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        destination_token_account`),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Creating a new TransactionInstruction"),s(`
    `),n("span",{class:"token comment"},`/*
        Internal representation of the instruction's return value (Result<Instruction, ProgramError>)

        Ok(Instruction {
            program_id: *token_program_id, // PASSED FROM USER
            accounts,
            data,
        })
    */`),s(`

    `),n("span",{class:"token keyword"},"let"),s(" transfer_tokens_instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"transfer"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token operator"},"&"),s("token_program"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("source_token_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("destination_token_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("source_token_account_holder"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token operator"},"&"),s("source_token_account_holder"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        token_transfer_amount`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(" required_accounts_for_transfer "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s(`
        source_token_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        destination_token_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        source_token_account_holder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Passing the TransactionInstruction to send"),s(`
    `),n("span",{class:"token function"},"invoke"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token operator"},"&"),s("transfer_tokens_instruction"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("required_accounts_for_transfer"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Transfer successful"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br")])],-1),M=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"let"),s(" token_transfer_amount "),n("span",{class:"token operator"},"="),s(` instruction_data
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},".."),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"and_then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("slice"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(" slice"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},"::"),s("from_le_bytes"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ok_or"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"let"),s(" transfer_tokens_instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"transfer"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token operator"},"&"),s("token_program"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),s("source_token_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),s("destination_token_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),s("source_token_account_holder"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token operator"},"&"),s("source_token_account_holder"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    token_transfer_amount`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"let"),s(" required_accounts_for_transfer "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s(`
    source_token_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    destination_token_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    source_token_account_holder`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token function"},"invoke"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token operator"},"&"),s("transfer_tokens_instruction"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),s("required_accounts_for_transfer"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br")])],-1),L=n("br",null,null,-1),B=s(" \u76F8\u61C9\u7684\u5BA2\u6236\u7AEF\u6307\u4EE4\u5982\u4E0B\u6240\u793A\u3002\u6709\u95DC\u4E86\u89E3\u9444\u5E63\u548C\u4EE3\u5E63\u5275\u5EFA\u6307\u4EE4\uFF0C\u8ACB\u53C3\u8003\u9644\u8FD1\u7684\u5B8C\u6574\u4EE3\u78BC\u3002 "),H=n("br",null,null,-1),q=n("br",null,null,-1),G=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  clusterApiUrl`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(`
  PublicKey`),n("span",{class:"token punctuation"},","),s(`
  SystemProgram`),n("span",{class:"token punctuation"},","),s(`
  Transaction`),n("span",{class:"token punctuation"},","),s(`
  TransactionInstruction`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  AccountLayout`),n("span",{class:"token punctuation"},","),s(`
  MintLayout`),n("span",{class:"token punctuation"},","),s(`
  Token`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
  u64`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/spl-token"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token constant"},"BN"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"bn.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Users"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),s(),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"RECEIVER_KEYPAIR"),s(),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Mint and token accounts"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"TOKEN_MINT_ACCOUNT"),s(),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"SOURCE_TOKEN_ACCOUNT"),s(),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"DESTINATION_TOKEN_ACCOUNT"),s(),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Numbers"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"DEFAULT_DECIMALS_COUNT"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"9"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"TOKEN_TRANSFER_AMOUNT"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"50"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"10"),s(),n("span",{class:"token operator"},"**"),s(),n("span",{class:"token constant"},"DEFAULT_DECIMALS_COUNT"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"TOKEN_TRANSFER_AMOUNT_BUFFER"),s(),n("span",{class:"token operator"},"="),s(" Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),s(`
  Uint8Array`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"of"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},[n("span",{class:"token constant"},"BN")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TOKEN_TRANSFER_AMOUNT"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toArray"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"le"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"EfYK91eN3AqTwY1C34W6a33qGAtQ8HJYVhNv7cV4uMZj"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" mintDataSpace "),n("span",{class:"token operator"},"="),s(" MintLayout"),n("span",{class:"token punctuation"},"."),s("span"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" mintRentRequired "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMinimumBalanceForRentExemption"),n("span",{class:"token punctuation"},"("),s(`
    mintDataSpace
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" tokenDataSpace "),n("span",{class:"token operator"},"="),s(" AccountLayout"),n("span",{class:"token punctuation"},"."),s("span"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" tokenRentRequired "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMinimumBalanceForRentExemption"),n("span",{class:"token punctuation"},"("),s(`
    tokenDataSpace
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Airdropping some SOL"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Allocating space and rent for mint account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" createMintAccountIx "),n("span",{class:"token operator"},"="),s(" SystemProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    fromPubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" mintRentRequired"),n("span",{class:"token punctuation"},","),s(`
    newAccountPubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"TOKEN_MINT_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    programId`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
    space`),n("span",{class:"token operator"},":"),s(" mintDataSpace"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Initializing mint with decimals and authority"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" initializeMintIx "),n("span",{class:"token operator"},"="),s(" Token"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createInitMintInstruction"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"TOKEN_MINT_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"DEFAULT_DECIMALS_COUNT"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// mintAuthority"),s(`
    `),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey "),n("span",{class:"token comment"},"// freezeAuthority"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Allocating space and rent for source token account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" createSourceTokenAccountIx "),n("span",{class:"token operator"},"="),s(" SystemProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    fromPubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    newAccountPubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"SOURCE_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" tokenRentRequired"),n("span",{class:"token punctuation"},","),s(`
    programId`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
    space`),n("span",{class:"token operator"},":"),s(" tokenDataSpace"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Initializing token account with mint and owner"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" initializeSourceTokenAccountIx "),n("span",{class:"token operator"},"="),s(" Token"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createInitAccountInstruction"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"TOKEN_MINT_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"SOURCE_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s(`publicKey
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Minting tokens to the source token account for transferring later to destination account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" mintTokensIx "),n("span",{class:"token operator"},"="),s(" Token"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createMintToInstruction"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"TOKEN_MINT_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"SOURCE_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"["),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"TOKEN_TRANSFER_AMOUNT"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Allocating space and rent for destination token account"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" createDestinationTokenAccountIx "),n("span",{class:"token operator"},"="),s(" SystemProgram"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createAccount"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    fromPubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    newAccountPubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"DESTINATION_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
    lamports`),n("span",{class:"token operator"},":"),s(" tokenRentRequired"),n("span",{class:"token punctuation"},","),s(`
    programId`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
    space`),n("span",{class:"token operator"},":"),s(" tokenDataSpace"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Initializing token account with mint and owner"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" initializeDestinationTokenAccountIx "),n("span",{class:"token operator"},"="),s(`
    Token`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"createInitAccountInstruction"),n("span",{class:"token punctuation"},"("),s(`
      `),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token constant"},"TOKEN_MINT_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token constant"},"DESTINATION_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token constant"},"RECEIVER_KEYPAIR"),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Our program's CPI instruction (transfer)"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" transferTokensIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    data`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"TOKEN_TRANSFER_AMOUNT_BUFFER"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"SOURCE_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"DESTINATION_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},"// Adding up all the above instructions"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s(`
    createMintAccountIx`),n("span",{class:"token punctuation"},","),s(`
    initializeMintIx`),n("span",{class:"token punctuation"},","),s(`
    createSourceTokenAccountIx`),n("span",{class:"token punctuation"},","),s(`
    initializeSourceTokenAccountIx`),n("span",{class:"token punctuation"},","),s(`
    mintTokensIx`),n("span",{class:"token punctuation"},","),s(`
    createDestinationTokenAccountIx`),n("span",{class:"token punctuation"},","),s(`
    initializeDestinationTokenAccountIx`),n("span",{class:"token punctuation"},","),s(`
    transferTokensIx
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"TOKEN_MINT_ACCOUNT"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"SOURCE_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"DESTINATION_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Token transfer CPI success: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("txHash"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br"),n("span",{class:"line-number"},"93"),n("br"),n("span",{class:"line-number"},"94"),n("br"),n("span",{class:"line-number"},"95"),n("br"),n("span",{class:"line-number"},"96"),n("br"),n("span",{class:"line-number"},"97"),n("br"),n("span",{class:"line-number"},"98"),n("br"),n("span",{class:"line-number"},"99"),n("br"),n("span",{class:"line-number"},"100"),n("br"),n("span",{class:"line-number"},"101"),n("br"),n("span",{class:"line-number"},"102"),n("br"),n("span",{class:"line-number"},"103"),n("br"),n("span",{class:"line-number"},"104"),n("br"),n("span",{class:"line-number"},"105"),n("br"),n("span",{class:"line-number"},"106"),n("br"),n("span",{class:"line-number"},"107"),n("br"),n("span",{class:"line-number"},"108"),n("br"),n("span",{class:"line-number"},"109"),n("br"),n("span",{class:"line-number"},"110"),n("br"),n("span",{class:"line-number"},"111"),n("br"),n("span",{class:"line-number"},"112"),n("br"),n("span",{class:"line-number"},"113"),n("br"),n("span",{class:"line-number"},"114"),n("br"),n("span",{class:"line-number"},"115"),n("br"),n("span",{class:"line-number"},"116"),n("br"),n("span",{class:"line-number"},"117"),n("br"),n("span",{class:"line-number"},"118"),n("br"),n("span",{class:"line-number"},"119"),n("br"),n("span",{class:"line-number"},"120"),n("br"),n("span",{class:"line-number"},"121"),n("br"),n("span",{class:"line-number"},"122"),n("br"),n("span",{class:"line-number"},"123"),n("br"),n("span",{class:"line-number"},"124"),n("br"),n("span",{class:"line-number"},"125"),n("br"),n("span",{class:"line-number"},"126"),n("br"),n("span",{class:"line-number"},"127"),n("br"),n("span",{class:"line-number"},"128"),n("br"),n("span",{class:"line-number"},"129"),n("br"),n("span",{class:"line-number"},"130"),n("br"),n("span",{class:"line-number"},"131"),n("br"),n("span",{class:"line-number"},"132"),n("br"),n("span",{class:"line-number"},"133"),n("br"),n("span",{class:"line-number"},"134"),n("br"),n("span",{class:"line-number"},"135"),n("br"),n("span",{class:"line-number"},"136"),n("br"),n("span",{class:"line-number"},"137"),n("br"),n("span",{class:"line-number"},"138"),n("br"),n("span",{class:"line-number"},"139"),n("br"),n("span",{class:"line-number"},"140"),n("br"),n("span",{class:"line-number"},"141"),n("br"),n("span",{class:"line-number"},"142"),n("br"),n("span",{class:"line-number"},"143"),n("br"),n("span",{class:"line-number"},"144"),n("br"),n("span",{class:"line-number"},"145"),n("br"),n("span",{class:"line-number"},"146"),n("br"),n("span",{class:"line-number"},"147"),n("br"),n("span",{class:"line-number"},"148"),n("br"),n("span",{class:"line-number"},"149"),n("br"),n("span",{class:"line-number"},"150"),n("br"),n("span",{class:"line-number"},"151"),n("br"),n("span",{class:"line-number"},"152"),n("br"),n("span",{class:"line-number"},"153"),n("br"),n("span",{class:"line-number"},"154"),n("br"),n("span",{class:"line-number"},"155"),n("br"),n("span",{class:"line-number"},"156"),n("br"),n("span",{class:"line-number"},"157"),n("br"),n("span",{class:"line-number"},"158"),n("br"),n("span",{class:"line-number"},"159"),n("br"),n("span",{class:"line-number"},"160"),n("br"),n("span",{class:"line-number"},"161"),n("br"),n("span",{class:"line-number"},"162"),n("br"),n("span",{class:"line-number"},"163"),n("br"),n("span",{class:"line-number"},"164"),n("br"),n("span",{class:"line-number"},"165"),n("br"),n("span",{class:"line-number"},"166"),n("br"),n("span",{class:"line-number"},"167"),n("br"),n("span",{class:"line-number"},"168"),n("br"),n("span",{class:"line-number"},"169"),n("br"),n("span",{class:"line-number"},"170"),n("br")])],-1),F=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"EfYK91eN3AqTwY1C34W6a33qGAtQ8HJYVhNv7cV4uMZj"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transferTokensIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    data`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"TOKEN_TRANSFER_AMOUNT_BUFFER"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"SOURCE_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"DESTINATION_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"TOKEN_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("transferTokensIx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"TOKEN_MINT_ACCOUNT"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"SOURCE_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"DESTINATION_TOKEN_ACCOUNT"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Token transfer CPI success: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("txHash"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br")])],-1),W=p("<p>\u73FE\u5728\u8B93\u6211\u5011\u4F86\u770B\u53E6\u4E00\u500B\u4F8B\u5B50\uFF0C\u5373<code>System Program</code>\u7684<code>create_account</code>\u6307\u4EE4\u3002\u9019\u88CF\u8207\u4E0A\u9762\u63D0\u5230\u7684\u6307\u4EE4\u6709\u4E00\u9EDE\u4E0D\u540C\u3002\u5728\u4E0A\u8FF0\u4F8B\u5B50\u4E2D\uFF0C\u6211\u5011\u4E0D\u9700\u8981\u5728<code>invoke</code>\u51FD\u6578\u4E2D\u5C07<code>token_program</code>\u4F5C\u7232\u8CEC\u6236\u4E4B\u4E00\u50B3\u905E\u3002\u7136\u800C\uFF0C\u5728\u67D0\u4E9B\u60C5\u6CC1\u4E0B\uFF0C\u60A8\u9700\u8981\u50B3\u905E\u8ABF\u7528\u6307\u4EE4\u7684<code>program_id</code>\u3002\u5728\u6211\u5011\u7684\u4F8B\u5B50\u4E2D\uFF0C\u5B83\u5C07\u662F<code>System Program</code>\u7684<code>program_id</code>\uFF08&quot;11111111111111111111111111111111&quot;\uFF09\u3002\u6240\u4EE5\u73FE\u5728\u6240\u9700\u7684\u8CEC\u6236\u5305\u62EC\uFF1A</p><ol><li>\u8CA0\u8CAC\u652F\u4ED8\u79DF\u91D1\u7684\u652F\u4ED8\u8CEC\u6236</li><li>\u5C07\u8981\u5275\u5EFA\u7684\u8CEC\u6236</li><li>\u7CFB\u7D71\u7A0B\u5E8F\uFF08System Program\uFF09\u8CEC\u6236</li></ol>",2),V=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    entrypoint`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program"),n("span",{class:"token punctuation"},"::")]),s("invoke"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("rent"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("system_instruction"),n("span",{class:"token punctuation"},"::")]),s("create_account"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("sysvar"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Sysvar"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token macro property"},"entrypoint!"),n("span",{class:"token punctuation"},"("),s("process_instruction"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Accounts required"),s(`
`),n("span",{class:"token comment"},"/// 1. [signer, writable] Payer Account"),s(`
`),n("span",{class:"token comment"},"/// 2. [signer, writable] General State Account"),s(`
`),n("span",{class:"token comment"},"/// 3. [] System Program"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
    program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Accounts required for token transfer"),s(`

    `),n("span",{class:"token comment"},"// 1. Payer account for the state account creation"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" payer_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 2. Token account we hold"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" general_state_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 3. System Program"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" system_program "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token string"},'"Creating account for {}"'),n("span",{class:"token punctuation"},","),s(`
        general_state_account`),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Parsing the token transfer amount from instruction data"),s(`
    `),n("span",{class:"token comment"},"// a. Getting the 0th to 8th index of the u8 byte array"),s(`
    `),n("span",{class:"token comment"},"// b. Converting the obtained non zero u8 to a proper u8 (as little endian integers)"),s(`
    `),n("span",{class:"token comment"},"// c. Converting the little endian integers to a u64 number"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_span "),n("span",{class:"token operator"},"="),s(` instruction_data
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},".."),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"and_then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("slice"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(" slice"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},"::"),s("from_le_bytes"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ok_or"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(" lamports_required "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"minimum_balance"),n("span",{class:"token punctuation"},"("),s("account_span "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Creating a new TransactionInstruction"),s(`
    `),n("span",{class:"token comment"},`/*
        Internal representation of the instruction's return value (Instruction)

        Instruction::new_with_bincode(
            system_program::id(), // NOT PASSED FROM USER
            &SystemInstruction::CreateAccount {
                lamports,
                space,
                owner: *owner,
            },
            account_metas,
        )
    */`),s(`

    `),n("span",{class:"token keyword"},"let"),s(" create_account_instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"create_account"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token operator"},"&"),s("payer_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("general_state_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
        lamports_required`),n("span",{class:"token punctuation"},","),s(`
        account_span`),n("span",{class:"token punctuation"},","),s(`
        program_id`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(" required_accounts_for_create "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s(`
        payer_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        general_state_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        system_program`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Passing the TransactionInstruction to send (with the issused program_id)"),s(`
    `),n("span",{class:"token function"},"invoke"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("create_account_instruction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("required_accounts_for_create"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Transfer successful"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br")])],-1),j=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"let"),s(" account_span "),n("span",{class:"token operator"},"="),s(` instruction_data
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},".."),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"and_then"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("slice"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(" slice"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"u64"),n("span",{class:"token punctuation"},"::"),s("from_le_bytes"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ok_or"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"let"),s(" lamports_required "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"minimum_balance"),n("span",{class:"token punctuation"},"("),s("account_span "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"let"),s(" create_account_instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"create_account"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token operator"},"&"),s("payer_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),s("general_state_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
    lamports_required`),n("span",{class:"token punctuation"},","),s(`
    account_span`),n("span",{class:"token punctuation"},","),s(`
    program_id`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"let"),s(" required_accounts_for_create "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s(`
    payer_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    general_state_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    system_program`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token function"},"invoke"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("create_account_instruction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("required_accounts_for_create"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br")])],-1),J=n("p",null,"\u5C0D\u61C9\u7684\u5BA2\u6236\u7AEF\u4EE3\u78BC\u5982\u4E0B\u6240\u793A\uFF1A",-1),Q=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" clusterApiUrl"),n("span",{class:"token punctuation"},","),s(" Connection"),n("span",{class:"token punctuation"},","),s(" Keypair "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(" PublicKey"),n("span",{class:"token punctuation"},","),s(" SystemProgram "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Transaction"),n("span",{class:"token punctuation"},","),s(" TransactionInstruction "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token constant"},"BN"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"bn.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Users"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),s(),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"GENERAL_STATE_KEYPAIR"),s(),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"ACCOUNT_SPACE_BUFFER"),s(),n("span",{class:"token operator"},"="),s(" Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),s(`
  Uint8Array`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"of"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},[n("span",{class:"token constant"},"BN")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"100"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toArray"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"le"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"DkuQ5wsndkzXfgqDB6Lgf4sDjBi4gkLSak1dM5Mn2RuQ"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Airdropping some SOL"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Our program's CPI instruction (create_account)"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" createAccountIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    data`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"ACCOUNT_SPACE_BUFFER"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"GENERAL_STATE_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" SystemProgram"),n("span",{class:"token punctuation"},"."),s("programId"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},"// Adding up all the above instructions"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("createAccountIx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"GENERAL_STATE_KEYPAIR"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Create Account CPI Success: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("txHash"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br")])],-1),$=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"DkuQ5wsndkzXfgqDB6Lgf4sDjBi4gkLSak1dM5Mn2RuQ"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Airdropping some SOL"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Our program's CPI instruction (create_account)"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" creataAccountIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    data`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"ACCOUNT_SPACE_BUFFER"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"GENERAL_STATE_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" SystemProgram"),n("span",{class:"token punctuation"},"."),s("programId"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},"// Adding up all the above instructions"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("creataAccountIx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"GENERAL_STATE_KEYPAIR"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Create Account CPI Success: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("txHash"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br")])],-1),X=n("h2",{id:"\u5982\u4F55\u5275\u5EFApda",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5982\u4F55\u5275\u5EFApda","aria-hidden":"true"},"#"),s(" \u5982\u4F55\u5275\u5EFAPDA")],-1),Z=n("p",null,[s('\u7A0B\u5E8F\u6D3E\u751F\u5730\u5740\uFF08Program Derived Address\uFF0CPDA\uFF09\u662F\u7A0B\u5E8F\u64C1\u6709\u7684\u8CEC\u6236\uFF0C\u4F46\u6C92\u6709\u79C1\u9470\u3002\u76F8\u53CD\uFF0C\u5B83\u7684\u7C3D\u540D\u662F\u901A\u904E\u4E00\u7D44\u7A2E\u5B50\u548C\u4E00\u500B\u963B\u7919\u503C\uFF08\u4E00\u500B\u78BA\u4FDD\u5176\u4E0D\u5728\u66F2\u7DDA\u4E0A\u7684\u96A8\u6A5F\u6578\uFF09\u7372\u53D6\u7684\u3002"\u751F\u6210"\u7A0B\u5E8F\u5730\u5740\u8207"\u5275\u5EFA"\u5B83\u662F\u4E0D\u540C\u7684\u3002\u53EF\u4EE5\u4F7F\u7528'),n("code",null,"Pubkey::find_program_address"),s("\u4F86\u751F\u6210PDA\u3002\u5275\u5EFAPDA\u5BE6\u8CEA\u4E0A\u610F\u5473\u7740\u521D\u59CB\u5316\u8A72\u5730\u5740\u7684\u7A7A\u9593\u4E26\u5C07\u5176\u72C0\u614B\u8A2D\u7F6E\u7232\u521D\u59CB\u72C0\u614B\u3002\u666E\u901A\u7684\u5BC6\u9470\u5C0D\u8CEC\u6236\u53EF\u4EE5\u5728\u6211\u5011\u7684\u7A0B\u5E8F\u4E4B\u5916\u5275\u5EFA\uFF0C\u7136\u5F8C\u5C07\u5176\u7528\u65BC\u521D\u59CB\u5316PDA\u7684\u72C0\u614B\u3002\u4E0D\u5E78\u7684\u662F\uFF0C\u5C0D\u65BCPDA\u4F86\u8AAA\uFF0C\u5B83\u5FC5\u9808\u5728\u93C8\u4E0A\u5275\u5EFA\uFF0C\u56E0\u7232\u5B83\u672C\u8EAB\u7121\u6CD5\u4EE3\u8868\u81EA\u5DF1\u9032\u884C\u7C3D\u540D\u3002\u56E0\u6B64\uFF0C\u6211\u5011\u4F7F\u7528"),n("code",null,"invoke_signed"),s("\u4F86\u50B3\u905EPDA\u7684\u7A2E\u5B50\uFF0C\u4EE5\u53CA\u8CC7\u91D1\u8CEC\u6236\u7684\u7C3D\u540D\uFF0C\u5F9E\u800C\u5BE6\u73FE\u4E86PDA\u7684\u8CEC\u6236\u5275\u5EFA\u3002")],-1),nn=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    entrypoint`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program"),n("span",{class:"token punctuation"},"::")]),s("invoke_signed"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("rent"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},","),s(`
    system_instruction`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("sysvar"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Sysvar"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token macro property"},"entrypoint!"),n("span",{class:"token punctuation"},"("),s("process_instruction"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(BorshSerialize, BorshDeserialize, Debug)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"HelloState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Accounts required"),s(`
`),n("span",{class:"token comment"},"/// 1. [signer, writable] Funding account"),s(`
`),n("span",{class:"token comment"},"/// 2. [writable] PDA account"),s(`
`),n("span",{class:"token comment"},"/// 3. [] System Program"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
    program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"ACCOUNT_DATA_LEN"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Getting required accounts"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" funding_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" pda_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" system_program "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Getting PDA Bump from instruction data"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("pda_bump"),n("span",{class:"token punctuation"},","),s(" _"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(` instruction_data
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"split_first"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ok_or"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidInstructionData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Checking if passed PDA and expected PDA are equal"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" signers_seeds"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token string"},'b"customaddress"'),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("funding_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_bytes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token operator"},"*"),s("pda_bump"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" pda "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"create_program_address"),n("span",{class:"token punctuation"},"("),s("signers_seeds"),n("span",{class:"token punctuation"},","),s(" program_id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"if"),s(" pda"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ne"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("pda_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Assessing required lamports and creating transaction instruction"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" lamports_required "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"minimum_balance"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"ACCOUNT_DATA_LEN"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" create_pda_account_ix "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token namespace"},[s("system_instruction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"create_account"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token operator"},"&"),s("funding_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("pda_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
        lamports_required`),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token constant"},"ACCOUNT_DATA_LEN"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),s("program_id"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Invoking the instruction but with PDAs as additional signer"),s(`
    `),n("span",{class:"token function"},"invoke_signed"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token operator"},"&"),s("create_pda_account_ix"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s(`
            funding_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            pda_account`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            system_program`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s("signers_seeds"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Setting state for PDA"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" pda_account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"HelloState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("pda_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    pda_account_state`),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    pda_account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" pda_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},".."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br")])],-1),sn=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"let"),s(" create_pda_account_ix "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token namespace"},[s("system_instruction"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"create_account"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token operator"},"&"),s("funding_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),s("pda_account"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},","),s(`
    lamports_required`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"ACCOUNT_DATA_LEN"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),s("program_id"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token function"},"invoke_signed"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token operator"},"&"),s("create_pda_account_ix"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s("funding_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(" pda_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s("signers_seeds"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br")])],-1),an=n("p",null,"\u53EF\u4EE5\u901A\u904E\u5BA2\u6236\u7AEF\u6309\u5982\u4E0B\u65B9\u5F0F\u767C\u9001\u6240\u9700\u7684\u8CEC\u6236\uFF1A",-1),tn=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  clusterApiUrl`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(`
  PublicKey`),n("span",{class:"token punctuation"},","),s(`
  SystemProgram`),n("span",{class:"token punctuation"},","),s(`
  Transaction`),n("span",{class:"token punctuation"},","),s(`
  TransactionInstruction`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),s(),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"6eW5nnSosr2LpkUGCdznsjRGDhVb26tLmiM1P8RV1QQp"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Airdop to Payer"),s(`
  `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("pda"),n("span",{class:"token punctuation"},","),s(" bump"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" PublicKey"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"findProgramAddress"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token punctuation"},"["),s("Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"customaddress"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBuffer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    programId
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"PDA Pubkey: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("pda"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" createPDAIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    data`),n("span",{class:"token operator"},":"),s(" Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),s("Uint8Array"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"of"),n("span",{class:"token punctuation"},"("),s("bump"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" pda"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" SystemProgram"),n("span",{class:"token punctuation"},"."),s("programId"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("createPDAIx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"Created PDA successfully. Tx Hash: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("txHash"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br")])],-1),en=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),s(),n("span",{class:"token operator"},"="),s(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" connection "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"clusterApiUrl"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"devnet"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" programId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"6eW5nnSosr2LpkUGCdznsjRGDhVb26tLmiM1P8RV1QQp"'),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("pda"),n("span",{class:"token punctuation"},","),s(" bump"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" PublicKey"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"findProgramAddress"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token punctuation"},"["),s("Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"customaddress"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBuffer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    programId
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" createPDAIx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    programId`),n("span",{class:"token operator"},":"),s(" programId"),n("span",{class:"token punctuation"},","),s(`
    data`),n("span",{class:"token operator"},":"),s(" Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),s("Uint8Array"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"of"),n("span",{class:"token punctuation"},"("),s("bump"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" pda"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        isSigner`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        isWritable`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        pubkey`),n("span",{class:"token operator"},":"),s(" SystemProgram"),n("span",{class:"token punctuation"},"."),s("programId"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" transaction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("createPDAIx"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token keyword"},"const"),s(" txHash "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendTransaction"),n("span",{class:"token punctuation"},"("),s("transaction"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token constant"},"PAYER_KEYPAIR"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br")])],-1),on=n("h2",{id:"\u5982\u4F55\u8B80\u53D6\u8CEC\u6236",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5982\u4F55\u8B80\u53D6\u8CEC\u6236","aria-hidden":"true"},"#"),s(" \u5982\u4F55\u8B80\u53D6\u8CEC\u6236")],-1),cn=n("p",null,[s("\u5728Solana\u4E2D\uFF0C\u5E7E\u4E4E\u6240\u6709\u7684\u6307\u4EE4\u90FD\u81F3\u5C11\u9700\u89812-3\u500B\u8CEC\u6236\uFF0C\u4E26\u4E14\u5728\u6307\u4EE4\u8655\u7406\u7A0B\u5E8F\u4E2D\u6703\u8AAA\u660E\u5B83\u671F\u671B\u7684\u8CEC\u6236\u9806\u5E8F\u3002\u5982\u679C\u6211\u5011\u5229\u7528Rust\u4E2D\u7684"),n("code",null,"iter()"),s("\u65B9\u6CD5\uFF0C\u800C\u4E0D\u662F\u624B\u52D5\u7D22\u5F15\u8CEC\u6236\uFF0C\u90A3\u9EBC\u9019\u5C07\u975E\u5E38\u7C21\u55AE\u3002"),n("code",null,"next_account_info"),s("\u65B9\u6CD5\u57FA\u672C\u4E0A\u662F\u5C0D\u53EF\u8FED\u4EE3\u5C0D\u8C61\u7684\u7B2C\u4E00\u500B\u7D22\u5F15\u9032\u884C\u5207\u7247\uFF0C\u4E26\u8FD4\u56DE\u8CEC\u6236\u6578\u7D44\u4E2D\u5B58\u5728\u7684\u8CEC\u6236\u3002\u8B93\u6211\u5011\u770B\u4E00\u500B\u7C21\u55AE\u7684\u6307\u4EE4\uFF0C\u5B83\u671F\u671B\u4E00\u5806\u8CEC\u6236\u4E26\u9700\u8981\u89E3\u6790\u6BCF\u500B\u8CEC\u6236\u3002")],-1),pn=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    entrypoint`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token macro property"},"entrypoint!"),n("span",{class:"token punctuation"},"("),s("process_instruction"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(BorshSerialize, BorshDeserialize, Debug)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"HelloState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Accounts required"),s(`
`),n("span",{class:"token comment"},"/// 1. [signer] Payer"),s(`
`),n("span",{class:"token comment"},"/// 2. [writable] Hello state account"),s(`
`),n("span",{class:"token comment"},"/// 3. [] Rent account"),s(`
`),n("span",{class:"token comment"},"/// 4. [] System Program"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
    _program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    _instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Fetching all the accounts as a iterator (facilitating for loops and iterations)"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Payer account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" payer_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Hello state account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" hello_state_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Rent account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" rent_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// System Program"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" system_program "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br")])],-1),ln=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
    _program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    _instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Fetching all the accounts as a iterator (facilitating for loops and iterations)"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Payer account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" payer_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Hello state account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" hello_state_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Rent account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" rent_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// System Program"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" system_program "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br")])],-1),un=n("h2",{id:"\u5982\u4F55\u9A57\u8B49\u8CEC\u6236",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5982\u4F55\u9A57\u8B49\u8CEC\u6236","aria-hidden":"true"},"#"),s(" \u5982\u4F55\u9A57\u8B49\u8CEC\u6236")],-1),rn=n("p",null,"\u7531\u65BCSolana\u4E2D\u7684\u7A0B\u5E8F\u662F\u7121\u72C0\u614B\u7684\uFF0C\u4F5C\u7232\u7A0B\u5E8F\u5275\u5EFA\u8005\uFF0C\u6211\u5011\u5FC5\u9808\u5118\u53EF\u80FD\u9A57\u8B49\u50B3\u905E\u7684\u8CEC\u6236\uFF0C\u4EE5\u907F\u514D\u4EFB\u4F55\u60E1\u610F\u8CEC\u6236\u7684\u9032\u5165\u3002\u53EF\u4EE5\u9032\u884C\u7684\u57FA\u672C\u6AA2\u67E5\u5305\u62EC\uFF1A",-1),kn=n("ol",null,[n("li",null,"\u6AA2\u67E5\u9810\u671F\u7684\u7C3D\u540D\u8CEC\u6236\u662F\u5426\u5DF2\u7C3D\u540D\u3002"),n("li",null,"\u6AA2\u67E5\u9810\u671F\u7684\u72C0\u614B\u8CEC\u6236\u662F\u5426\u5DF2\u6A19\u8A18\u7232\u53EF\u5BEB\u3002"),n("li",null,"\u6AA2\u67E5\u9810\u671F\u7684\u72C0\u614B\u8CEC\u6236\u7684\u6240\u6709\u8005\u662F\u5426\u7232\u8ABF\u7528\u7A0B\u5E8F\u7684\u7A0B\u5E8FID\u3002"),n("li",null,"\u5982\u679C\u9996\u6B21\u521D\u59CB\u5316\u72C0\u614B\uFF0C\u8ACB\u6AA2\u67E5\u8CEC\u6236\u662F\u5426\u5DF2\u7D93\u521D\u59CB\u5316\u3002"),n("li",null,"\u6AA2\u67E5\u662F\u5426\u6309\u9810\u671F\u50B3\u905E\u4E86\u4EFB\u4F55\u8DE8\u7A0B\u5E8F\u7684ID\uFF08\u5728\u9700\u8981\u6642\uFF09\u3002")],-1),bn=n("p",null,"\u4E0B\u9762\u662F\u4E00\u500B\u57FA\u672C\u7684\u6307\u4EE4\uFF0C\u5B83\u4F7F\u7528\u4E0A\u8FF0\u6AA2\u67E5\u521D\u59CB\u5316\u82F1\u96C4\u72C0\u614B\u8CEC\u6236\u7684\u793A\u4F8B\uFF1A",-1),mn=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("account_info"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("next_account_info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("clock"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Clock"),n("span",{class:"token punctuation"},","),s(`
    entrypoint`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    msg`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("rent"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("system_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token constant"},"ID"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token constant"},"SYSTEM_PROGRAM_ID"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("sysvar"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Sysvar"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token macro property"},"entrypoint!"),n("span",{class:"token punctuation"},"("),s("process_instruction"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(BorshSerialize, BorshDeserialize, Debug)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"HelloState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Accounts required"),s(`
`),n("span",{class:"token comment"},"/// 1. [signer] Payer"),s(`
`),n("span",{class:"token comment"},"/// 2. [writable] Hello state account"),s(`
`),n("span",{class:"token comment"},"/// 3. [] System Program"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
    program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    _instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Payer account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" payer_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Hello state account"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" hello_state_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// System Program"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" system_program "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(" rent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Checking if payer account is the signer"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token operator"},"!"),s("payer_account"),n("span",{class:"token punctuation"},"."),s("is_signer "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"MissingRequiredSignature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Checking if hello state account is rent exempt"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token operator"},"!"),s("rent"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_exempt"),n("span",{class:"token punctuation"},"("),s("hello_state_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"lamports"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"AccountNotRentExempt"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Checking if hello state account is writable"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token operator"},"!"),s("hello_state_account"),n("span",{class:"token punctuation"},"."),s("is_writable "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Checking if hello state account's owner is the current program"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" hello_state_account"),n("span",{class:"token punctuation"},"."),s("owner"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ne"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("program_id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"IllegalOwner"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Checking if the system program is valid"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" system_program"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ne"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token constant"},"SYSTEM_PROGRAM_ID"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"IncorrectProgramId"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" hello_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"HelloState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("hello_state_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Checking if the state has already been initialized"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" hello_state"),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"AccountAlreadyInitialized"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    hello_state`),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    hello_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" hello_state_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},".."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Account initialized :)"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br")])],-1),dn=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"process_instruction"),n("span",{class:"token punctuation"},"("),s(`
    program_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    _instruction_data`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" accounts_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" payer_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" hello_state_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" system_program "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("accounts_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(" rent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Rent"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Checking if payer account is the signer"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token operator"},"!"),s("payer_account"),n("span",{class:"token punctuation"},"."),s("is_signer "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"MissingRequiredSignature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Checking if hello state account is rent exempt"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token operator"},"!"),s("rent"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_exempt"),n("span",{class:"token punctuation"},"("),s("hello_state_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"lamports"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"AccountNotRentExempt"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Checking if hello state account is writable"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token operator"},"!"),s("hello_state_account"),n("span",{class:"token punctuation"},"."),s("is_writable "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Checking if hello state account's owner is the current program"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" hello_state_account"),n("span",{class:"token punctuation"},"."),s("owner"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ne"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("program_id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"IllegalOwner"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// Checking if the system program is valid"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" system_program"),n("span",{class:"token punctuation"},"."),s("key"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"ne"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token constant"},"SYSTEM_PROGRAM_ID"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"IncorrectProgramId"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" hello_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"HelloState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("hello_state_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// Checking if the state has already been initialized"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" hello_state"),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"AccountAlreadyInitialized"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    hello_state`),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    hello_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" hello_state_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},".."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Account initialized :)"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br")])],-1),_n=n("h2",{id:"\u5982\u4F55\u5F9E\u4E00\u500B\u4EA4\u6613\u4E2D\u8B80\u53D6\u591A\u500B\u6307\u4EE4",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5982\u4F55\u5F9E\u4E00\u500B\u4EA4\u6613\u4E2D\u8B80\u53D6\u591A\u500B\u6307\u4EE4","aria-hidden":"true"},"#"),s(" \u5982\u4F55\u5F9E\u4E00\u500B\u4EA4\u6613\u4E2D\u8B80\u53D6\u591A\u500B\u6307\u4EE4")],-1),yn=n("p",null,"Solana\u5141\u8A31\u6211\u5011\u67E5\u770B\u7576\u524D\u4EA4\u6613\u4E2D\u7684\u6240\u6709\u6307\u4EE4\u3002\u6211\u5011\u53EF\u4EE5\u5C07\u5B83\u5011\u5B58\u5132\u5728\u4E00\u500B\u8B8A\u91CF\u4E2D\uFF0C\u4E26\u5C0D\u5176\u9032\u884C\u8FED\u4EE3\u3002\u6211\u5011\u53EF\u4EE5\u5229\u7528\u9019\u4E00\u9EDE\u505A\u8A31\u591A\u4E8B\u60C5\uFF0C\u6BD4\u5982\u6AA2\u67E5\u53EF\u7591\u7684\u4EA4\u6613\u3002",-1),fn=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("anchor_lang"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("prelude"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
        sysvar`),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token namespace"},[s("serialize_utils"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("read_pubkey"),n("span",{class:"token punctuation"},","),s("read_u16"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`


`),n("span",{class:"token macro property"},"declare_id!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"8DJXJRV8DBFjJDYyU9cTHBVK1F1CTCi6JUBDVfyBxqsT"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[program]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"mod"),s(),n("span",{class:"token module-declaration namespace"},"cookbook"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token keyword"},"super"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"read_multiple_instruction"),n("span",{class:"token operator"},"<"),n("span",{class:"token lifetime-annotation symbol"},"'info"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"("),s("ctx"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Context"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"ReadMultipleInstruction"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(" creator_bump"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" instruction_sysvar_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),s("ctx"),n("span",{class:"token punctuation"},"."),s("accounts"),n("span",{class:"token punctuation"},"."),s("instruction_sysvar_account"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"let"),s(" instruction_sysvar_account_info "),n("span",{class:"token operator"},"="),s(" instruction_sysvar_account"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_account_info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"let"),s(" id "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"8DJXJRV8DBFjJDYyU9cTHBVK1F1CTCi6JUBDVfyBxqsT"'),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"let"),s(" instruction_sysvar "),n("span",{class:"token operator"},"="),s(" instruction_sysvar_account_info"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" idx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"let"),s(" num_instructions "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"read_u16"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" idx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("instruction_sysvar"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("_"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token class-name"},"MyError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"NoInstructionFound"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"for"),s(" index "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},".."),s("num_instructions "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" current "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"2"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token punctuation"},"("),s("index "),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token keyword"},"let"),s(" start "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"read_u16"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" current"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("instruction_sysvar"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

            current `),n("span",{class:"token operator"},"="),s(" start "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token keyword"},"let"),s(" num_accounts "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"read_u16"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" current"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("instruction_sysvar"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            current `),n("span",{class:"token operator"},"+="),s(),n("span",{class:"token punctuation"},"("),s("num_accounts "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"32"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token keyword"},"let"),s(" program_id "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"read_pubkey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" current"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("instruction_sysvar"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

            `),n("span",{class:"token keyword"},"if"),s(" program_id "),n("span",{class:"token operator"},"!="),s(` id
            `),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Transaction had ix with program id {}"'),n("span",{class:"token punctuation"},","),s(" program_id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"MyError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"SuspiciousTransaction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`

        `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(Accounts)]"),s(`
`),n("span",{class:"token attribute attr-name"},"#[instruction(creator_bump:u8)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"ReadMultipleInstruction"),n("span",{class:"token operator"},"<"),n("span",{class:"token lifetime-annotation symbol"},"'info"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token attribute attr-name"},"#[account(address = sysvar::instructions::id())]"),s(`
    instruction_sysvar_account`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"UncheckedAccount"),n("span",{class:"token operator"},"<"),n("span",{class:"token lifetime-annotation symbol"},"'info"),n("span",{class:"token operator"},">"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token attribute attr-name"},"#[error_code]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"enum"),s(),n("span",{class:"token type-definition class-name"},"MyError"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token attribute attr-name"},[s("#[msg("),n("span",{class:"token string"},'"No instructions found"'),s(")]")]),s(`
    `),n("span",{class:"token class-name"},"NoInstructionFound"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token attribute attr-name"},[s("#[msg("),n("span",{class:"token string"},'"Suspicious transaction detected"'),s(")]")]),s(`
    `),n("span",{class:"token class-name"},"SuspiciousTransaction"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br")])],-1),wn=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" idx "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"let"),s(" num_instructions "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"read_u16"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" idx"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("instruction_sysvar"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("_"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token class-name"},"MyError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"NoInstructionFound"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`


`),n("span",{class:"token keyword"},"for"),s(" index "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},".."),s("num_instructions "),n("span",{class:"token punctuation"},"{"),s(`
    
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" current "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"2"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token punctuation"},"("),s("index "),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" start "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"read_u16"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" current"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("instruction_sysvar"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    current `),n("span",{class:"token operator"},"="),s(" start "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" num_accounts "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"read_u16"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" current"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("instruction_sysvar"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    current `),n("span",{class:"token operator"},"+="),s(),n("span",{class:"token punctuation"},"("),s("num_accounts "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"32"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br")])],-1);function gn(hn,An){const l=c("CodeGroupItem"),u=c("CodeGroup"),e=c("SolanaCodeGroupItem"),o=c("SolanaCodeGroup");return i(),k(b,null,[d,_,y,f,t(u,null,{default:a(()=>[t(l,{title:"Program"},{default:a(()=>[w]),_:1})]),_:1}),g,t(o,null,{default:a(()=>[t(e,{title:"Rust",active:""},{default:a(()=>[h]),preview:a(()=>[A]),_:1})]),_:1}),P,t(o,null,{default:a(()=>[t(e,{title:"TS",active:""},{default:a(()=>[I]),preview:a(()=>[T]),_:1})]),_:1}),E,R,t(o,null,{default:a(()=>[t(e,{title:"Rust",active:""},{default:a(()=>[S]),preview:a(()=>[x]),_:1})]),_:1}),v,t(o,null,{default:a(()=>[t(e,{title:"TS",active:""},{default:a(()=>[C]),preview:a(()=>[K]),_:1})]),_:1}),O,N,t(o,null,{default:a(()=>[t(e,{title:"Rust",active:""},{default:a(()=>[D]),preview:a(()=>[U]),_:1})]),_:1}),Y,t(o,null,{default:a(()=>[t(e,{title:"Rust",active:""},{default:a(()=>[z]),preview:a(()=>[M]),_:1})]),_:1}),L,B,H,q,t(o,null,{default:a(()=>[t(e,{title:"TS",active:""},{default:a(()=>[G]),preview:a(()=>[F]),_:1})]),_:1}),W,t(o,null,{default:a(()=>[t(e,{title:"Rust",active:""},{default:a(()=>[V]),preview:a(()=>[j]),_:1})]),_:1}),J,t(o,null,{default:a(()=>[t(e,{title:"TS",active:""},{default:a(()=>[Q]),preview:a(()=>[$]),_:1})]),_:1}),X,Z,t(o,null,{default:a(()=>[t(e,{title:"Rust",active:""},{default:a(()=>[nn]),preview:a(()=>[sn]),_:1})]),_:1}),an,t(o,null,{default:a(()=>[t(e,{title:"TS",active:""},{default:a(()=>[tn]),preview:a(()=>[en]),_:1})]),_:1}),on,cn,t(o,null,{default:a(()=>[t(e,{title:"Rust",active:""},{default:a(()=>[pn]),preview:a(()=>[ln]),_:1})]),_:1}),un,rn,kn,bn,t(o,null,{default:a(()=>[t(e,{title:"Rust",active:""},{default:a(()=>[mn]),preview:a(()=>[dn]),_:1})]),_:1}),_n,yn,t(o,null,{default:a(()=>[t(e,{title:"Rust",active:""},{default:a(()=>[fn]),preview:a(()=>[wn]),_:1})]),_:1})],64)}var In=r(m,[["render",gn]]);export{In as default};
