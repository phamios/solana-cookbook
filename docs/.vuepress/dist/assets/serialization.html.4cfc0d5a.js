import{_ as u,r as l,o as r,c as i,b as a,w as t,a as n,F as k,e as p,d as s}from"./app.07ce7a66.js";var b="/assets/ser1.ceec0bad.png",m="/assets/ser2.38d4ca5b.png",d="/assets/ser3.7cdd43c8.png";const y={},f=p('<h1 id="serialisation-des-donnees" tabindex="-1"><a class="header-anchor" href="#serialisation-des-donnees" aria-hidden="true">#</a> S\xE9rialisation des donn\xE9es</h1><p>Lorsque nous parlons de s\xE9rialisation, nous parlons aussi bien de la s\xE9rialisation des donn\xE9es que de leur d\xE9s\xE9rialisation.</p><p>La s\xE9rialisation entre en jeu \xE0 certains moments du cycle de vie des comptes de programmes et du programme de Solana :</p><ol><li>S\xE9rialisation des donn\xE9es d&#39;instruction c\xF4t\xE9 client</li><li>D\xE9s\xE9rialiser des donn\xE9es d&#39;instruction dans le programme</li><li>S\xE9rialisation des donn\xE9es du compte dans le programme</li><li>D\xE9s\xE9rialisation des donn\xE9es du compte c\xF4t\xE9 client</li></ol><p>Il est important que les actions ci-dessus soient toutes prises en charge par la m\xEAme approche de s\xE9rialisation. Les snippets inclus montrent la s\xE9rialisation en utilisant <a href="#ressources">Borsh</a>.</p><p>Les exemples figurant dans la suite de ce document sont des extraits du <a href="#ressources">mod\xE8le de programme CLI de Solana</a></p><h2 id="configuration-pour-la-serialisation-avec-borsh" tabindex="-1"><a class="header-anchor" href="#configuration-pour-la-serialisation-avec-borsh" aria-hidden="true">#</a> Configuration pour la s\xE9rialisation avec Borsh</h2><p>Les biblioth\xE8ques pour Borsh doivent \xEAtre configur\xE9es pour le programme Rust, le client Rust, Node et/ou le client Python.</p>',8),g=n("div",{class:"language-toml ext-toml line-numbers-mode"},[n("pre",{class:"language-toml"},[n("code",null,[n("span",{class:"token punctuation"},"["),n("span",{class:"token table class-name"},"package"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token key property"},"name"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"solana-cli-template-program-bpf"'),s(`
`),n("span",{class:"token key property"},"version"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"0.1.0"'),s(`
`),n("span",{class:"token key property"},"edition"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"2018"'),s(`
`),n("span",{class:"token key property"},"license"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"WTFPL"'),s(`

`),n("span",{class:"token comment"},"# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html"),s(`

`),n("span",{class:"token punctuation"},"["),n("span",{class:"token table class-name"},"features"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token key property"},"no-entrypoint"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),s(`

`),n("span",{class:"token punctuation"},"["),n("span",{class:"token table class-name"},"dependencies"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token key property"},"borsh"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"0.9.0"'),s(`
`),n("span",{class:"token key property"},"lazy_static"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.4.0"'),s(`
`),n("span",{class:"token key property"},"num-derive"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"0.3"'),s(`
`),n("span",{class:"token key property"},"num_enum"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"0.5.1"'),s(`
`),n("span",{class:"token key property"},"num-integer"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"0.1.44"'),s(`
`),n("span",{class:"token key property"},"num-traits"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"0.2"'),s(`
`),n("span",{class:"token key property"},"sol-template-shared"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token key property"},"path"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"../shared"'),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token key property"},"solana-program"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`),n("span",{class:"token key property"},"thiserror"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.0"'),s(`

`),n("span",{class:"token punctuation"},"["),n("span",{class:"token table class-name"},"dev-dependencies"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token key property"},"solana-program-test"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`),n("span",{class:"token key property"},"solana-sdk"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`

`),n("span",{class:"token punctuation"},"["),n("span",{class:"token table class-name"},"lib"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token key property"},"crate-type"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"cdylib"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"lib"'),n("span",{class:"token punctuation"},"]"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br")])],-1),_=n("div",{class:"language-toml ext-toml line-numbers-mode"},[n("pre",{class:"language-toml"},[n("code",null,[n("span",{class:"token punctuation"},"["),n("span",{class:"token table class-name"},"package"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token key property"},"name"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"cli-program-template"'),s(`
`),n("span",{class:"token key property"},"version"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"0.1.5"'),s(`
`),n("span",{class:"token key property"},"edition"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"2018"'),s(`
`),n("span",{class:"token key property"},"license"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"WTFPL"'),s(`
`),n("span",{class:"token key property"},"publish"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token boolean"},"false"),s(`

`),n("span",{class:"token punctuation"},"["),n("span",{class:"token table class-name"},"dependencies"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token key property"},"borsh"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"0.9.0"'),s(`
`),n("span",{class:"token key property"},"clap"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"2.33.3"'),s(`
`),n("span",{class:"token key property"},"lazy_static"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.4.0"'),s(`
`),n("span",{class:"token key property"},"serde"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token key property"},"version"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.0.125"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token key property"},"features"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"derive"'),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token key property"},"serde_yaml"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"0.8.17"'),s(`
`),n("span",{class:"token key property"},"sol-template-shared"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token key property"},"path"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"shared"'),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token key property"},"solana-clap-utils"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`),n("span",{class:"token key property"},"solana-cli-config"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`),n("span",{class:"token key property"},"solana-client"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`),n("span",{class:"token key property"},"solana-logger"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`),n("span",{class:"token key property"},"solana-remote-wallet"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`),n("span",{class:"token key property"},"solana-sdk"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`),n("span",{class:"token key property"},"tokio"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token key property"},"version"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token key property"},"features"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"full"'),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"["),n("span",{class:"token table class-name"},"workspace"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token key property"},"members"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token string"},'"program"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},'"shared"'),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token punctuation"},"["),n("span",{class:"token table class-name"},"dev-dependencies"),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token key property"},"lazy_static"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.4.0"'),s(`
`),n("span",{class:"token key property"},"solana-validator"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`),n("span",{class:"token key property"},"solana-streamer"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token string"},'"1.8.2"'),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br")])],-1),w=n("div",{class:"language-json ext-json line-numbers-mode"},[n("pre",{class:"language-json"},[n("code",null,[n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"name"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"ts-program-template"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"version"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"0.1.0"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"description"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"Sample TS App"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"main"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"client/nmain.ts"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"author"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"keywords"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"workspace"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"client/"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"repository"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"type"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"git"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"url"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"https: //github.com/hashblock/solana-cli-program-template"'),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"homepage"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"https: //github.com/hashblock/solana-cli-program-template"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"scripts"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"test:all"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"npm run build:client && npm run test:client"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"build:client"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"rm -rf ./.dist/client && tsc "'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"start"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"node ./node_modules/.bin/mocha .dist/client/main.js"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"test:client"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"npm run start"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"lint"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"eslint --ext .ts client/* && prettier --check \\"client/**/*.ts\\""'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"lint:fix"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"eslint --ext .ts client/* --fix"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"pretty"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},`"prettier --write '{,client/**/}*.ts'"`),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"devDependencies"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"@tsconfig/recommended"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^1.0.1"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/chai"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^4.3.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/eslint"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^7.28.2"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/eslint-plugin-prettier"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^3.1.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/mkdirp"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^1.0.2"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/mocha"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^9.0.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@types/prettier"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^2.4.1"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@typescript-eslint/eslint-plugin"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^5.6.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"@typescript-eslint/parser"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^5.6.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"chai"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^4.3.4"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"eslint"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^8.2.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"eslint-config-google"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^0.14.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"eslint-config-prettier"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^8.3.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"eslint-plugin-prettier"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^4.0.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"html-webpack-plugin"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^5.5.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"mocha"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^9.1.3"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"prettier"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^2.4.1"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"start-server-and-test"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^1.14.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"ts-node"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^10.4.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"typescript"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^4.5.2"'),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token property"},'"dependencies"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token property"},'"@solana/web3.js"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^1.31.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"borsh"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^0.7.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"env"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^0.0.2"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"fs"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^0.0.1-security"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"mkdirp"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^1.0.4"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"npm-check-updates"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^12.0.3"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"sync-request"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^6.1.0"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"update"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"^0.4.2"'),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br")])],-1),h=n("div",{class:"language-txt ext-txt line-numbers-mode"},[n("pre",{class:"language-txt"},[n("code",null,`borsh-construct==0.1.0
solana==0.20.0
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br")])],-1),S=p('<h2 id="comment-serialiser-les-donnees-d-instruction-cote-client" tabindex="-1"><a class="header-anchor" href="#comment-serialiser-les-donnees-d-instruction-cote-client" aria-hidden="true">#</a> Comment s\xE9rialiser les donn\xE9es d&#39;instruction c\xF4t\xE9 client</h2><img src="'+b+'" alt="Serialize Instruction Data"><p>Si vous s\xE9rialisez des donn\xE9es d&#39;instructions sortantes pour les envoyer \xE0 un programme, vous devez tenir compte de la mani\xE8re dont le programme d\xE9s\xE9rialise les donn\xE9es d&#39;instruction entrantes.</p><p>Dans ce mod\xE8le, un bloc de donn\xE9es d&#39;instruction est un tableau s\xE9rialis\xE9 qui contient par exemple :</p><table><thead><tr><th>Instruction (Indice variable)</th><th>Cl\xE9 de s\xE9rialisation</th><th>Valeur s\xE9rialis\xE9e</th></tr></thead><tbody><tr><td>Initialize (0)</td><td>non applicable pour l&#39;instruction</td><td>non applicable pour l&#39;instruction</td></tr><tr><td>Mint (1)</td><td>&quot;foo&quot;</td><td>&quot;bar&quot;</td></tr><tr><td>Transfer (2)</td><td>&quot;foo&quot;</td><td>non applicable pour l&#39;instruction</td></tr><tr><td>Burn (2)</td><td>&quot;foo&quot;</td><td>non applicable pour l&#39;instruction</td></tr></tbody></table><p>Dans l&#39;exemple suivant, nous supposons que le compte propri\xE9taire du programme a \xE9t\xE9 initialis\xE9</p>',6),v=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// Include borsh functionality"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" serialize"),n("span",{class:"token punctuation"},","),s(" deserialize"),n("span",{class:"token punctuation"},","),s(" deserializeUnchecked "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"borsh"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Buffer "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"buffer"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Get Solana"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  PublicKey`),n("span",{class:"token punctuation"},","),s(`
  Transaction`),n("span",{class:"token punctuation"},","),s(`
  TransactionInstruction`),n("span",{class:"token punctuation"},","),s(`
  sendAndConfirmTransaction`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Flexible class that takes properties and imbues them"),s(`
`),n("span",{class:"token comment"},"// to the object instance"),s(`
`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Assignable"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),s("properties"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"keys"),n("span",{class:"token punctuation"},"("),s("properties"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"["),s("key"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" properties"),n("span",{class:"token punctuation"},"["),s("key"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Our instruction payload vocabulary"),s(`
`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Payload"),s(),n("span",{class:"token keyword"},"extends"),s(),n("span",{class:"token class-name"},"Assignable"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Borsh needs a schema describing the payload"),s(`
`),n("span",{class:"token keyword"},"const"),s(" payloadSchema "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s(`
  `),n("span",{class:"token punctuation"},"["),s(`
    Payload`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
      kind`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"struct"'),n("span",{class:"token punctuation"},","),s(`
      fields`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"id"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"u8"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"key"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"string"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"value"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"string"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Instruction variant indexes"),s(`
`),n("span",{class:"token keyword"},"enum"),s(" InstructionVariant "),n("span",{class:"token punctuation"},"{"),s(`
  InitializeAccount `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
  MintKeypair`),n("span",{class:"token punctuation"},","),s(`
  TransferKeypair`),n("span",{class:"token punctuation"},","),s(`
  BurnKeypair`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Mint a key value pair to account
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("Connection"),n("span",{class:"token punctuation"},"}"),s(` connection - Solana RPC connection
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("PublicKey"),n("span",{class:"token punctuation"},"}"),s(` progId - Sample Program public key
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("PublicKey"),n("span",{class:"token punctuation"},"}"),s(` account - Target program owned account for Mint
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("Keypair"),n("span",{class:"token punctuation"},"}"),s(` wallet - Wallet for signing and payment
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}"),s(` mintKey - The key being minted key
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}"),s(` mintValue - The value being minted
 * `),n("span",{class:"token keyword"},"@return"),s(),n("span",{class:"token punctuation"},"{"),s("Promise<Keypair>"),n("span",{class:"token punctuation"},"}"),s(` - Keypair
 */`)]),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"mintKV"),n("span",{class:"token punctuation"},"("),s(`
  connection`),n("span",{class:"token operator"},":"),s(" Connection"),n("span",{class:"token punctuation"},","),s(`
  progId`),n("span",{class:"token operator"},":"),s(" PublicKey"),n("span",{class:"token punctuation"},","),s(`
  account`),n("span",{class:"token operator"},":"),s(" PublicKey"),n("span",{class:"token punctuation"},","),s(`
  wallet`),n("span",{class:"token operator"},":"),s(" Keypair"),n("span",{class:"token punctuation"},","),s(`
  mintKey`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},","),s(`
  mintValue`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(`
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"Promise"),n("span",{class:"token operator"},"<"),n("span",{class:"token builtin"},"string"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// Construct the payload"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" mint "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Payload"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    id`),n("span",{class:"token operator"},":"),s(" InstructionVariant"),n("span",{class:"token punctuation"},"."),s("MintKeypair"),n("span",{class:"token punctuation"},","),s(`
    key`),n("span",{class:"token operator"},":"),s(" mintKey"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// 'ts key'"),s(`
    value`),n("span",{class:"token operator"},":"),s(" mintValue"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// 'ts first value'"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Serialize the payload"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" mintSerBuf "),n("span",{class:"token operator"},"="),s(" Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),s("payloadSchema"),n("span",{class:"token punctuation"},","),s(" mint"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},"// console.log(mintSerBuf)"),s(`
  `),n("span",{class:"token comment"},"// => <Buffer 01 06 00 00 00 74 73 20 6b 65 79 0e 00 00 00 74 73 20 66 69 72 73 74 20 76 61 6c 75 65>"),s(`
  `),n("span",{class:"token comment"},"// let mintPayloadCopy = deserialize(schema, Payload, mintSerBuf)"),s(`
  `),n("span",{class:"token comment"},"// console.log(mintPayloadCopy)"),s(`
  `),n("span",{class:"token comment"},"// => Payload { id: 1, key: 'ts key', value: 'ts first value' }"),s(`

  `),n("span",{class:"token comment"},"// Create Solana Instruction"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransactionInstruction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    data`),n("span",{class:"token operator"},":"),s(" mintSerBuf"),n("span",{class:"token punctuation"},","),s(`
    keys`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token punctuation"},"{"),s(" pubkey"),n("span",{class:"token operator"},":"),s(" account"),n("span",{class:"token punctuation"},","),s(" isSigner"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(" isWritable"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(" pubkey"),n("span",{class:"token operator"},":"),s(" wallet"),n("span",{class:"token punctuation"},"."),s("publicKey"),n("span",{class:"token punctuation"},","),s(" isSigner"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(" isWritable"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    programId`),n("span",{class:"token operator"},":"),s(" progId"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Send Solana Transaction"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" transactionSignature "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"sendAndConfirmTransaction"),n("span",{class:"token punctuation"},"("),s(`
    connection`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("instruction"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"["),s("wallet"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
      commitment`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"singleGossip"'),n("span",{class:"token punctuation"},","),s(`
      preflightCommitment`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"singleGossip"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Signature = "'),n("span",{class:"token punctuation"},","),s(" transactionSignature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"return"),s(" transactionSignature"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br"),n("span",{class:"line-number"},"93"),n("br"),n("span",{class:"line-number"},"94"),n("br"),n("span",{class:"line-number"},"95"),n("br"),n("span",{class:"line-number"},"96"),n("br"),n("span",{class:"line-number"},"97"),n("br"),n("span",{class:"line-number"},"98"),n("br"),n("span",{class:"line-number"},"99"),n("br"),n("span",{class:"line-number"},"100"),n("br"),n("span",{class:"line-number"},"101"),n("br"),n("span",{class:"line-number"},"102"),n("br"),n("span",{class:"line-number"},"103"),n("br"),n("span",{class:"line-number"},"104"),n("br"),n("span",{class:"line-number"},"105"),n("br"),n("span",{class:"line-number"},"106"),n("br"),n("span",{class:"line-number"},"107"),n("br"),n("span",{class:"line-number"},"108"),n("br")])],-1),T=n("div",{class:"language-python ext-py line-numbers-mode"},[n("pre",{class:"language-python"},[n("code",null,[n("span",{class:"token keyword"},"from"),s(" borsh_construct "),n("span",{class:"token keyword"},"import"),s(" String"),n("span",{class:"token punctuation"},","),s(" CStruct"),n("span",{class:"token punctuation"},","),s(` U8
`),n("span",{class:"token keyword"},"from"),s(" enum "),n("span",{class:"token keyword"},"import"),s(` IntEnum
`),n("span",{class:"token keyword"},"from"),s(" solana"),n("span",{class:"token punctuation"},"."),s("transaction "),n("span",{class:"token keyword"},"import"),s(` Transaction
`),n("span",{class:"token keyword"},"from"),s(" solders"),n("span",{class:"token punctuation"},"."),s("pubkey "),n("span",{class:"token keyword"},"import"),s(` Pubkey
`),n("span",{class:"token keyword"},"from"),s(" solders"),n("span",{class:"token punctuation"},"."),s("keypair "),n("span",{class:"token keyword"},"import"),s(` Keypair
`),n("span",{class:"token keyword"},"from"),s(" solders"),n("span",{class:"token punctuation"},"."),s("instruction "),n("span",{class:"token keyword"},"import"),s(" Instruction"),n("span",{class:"token punctuation"},","),s(` AccountMeta
`),n("span",{class:"token keyword"},"from"),s(" solders"),n("span",{class:"token punctuation"},"."),s("rpc"),n("span",{class:"token punctuation"},"."),s("responses "),n("span",{class:"token keyword"},"import"),s(` SendTransactionResp
`),n("span",{class:"token keyword"},"from"),s(" solana"),n("span",{class:"token punctuation"},"."),s("rpc"),n("span",{class:"token punctuation"},"."),s("api "),n("span",{class:"token keyword"},"import"),s(` Client


`),n("span",{class:"token comment"},"# Instruction variants for target program"),s(`
`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"InstructionVariant"),n("span",{class:"token punctuation"},"("),s("IntEnum"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    INITIALIZE `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
    MINT `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),s(`
    TRANSFER `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"2"),s(`
    BURN `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"3"),s(`


`),n("span",{class:"token comment"},"# Schema for sending instructionVariants to on-chain sample program"),s(`
payload_schema `),n("span",{class:"token operator"},"="),s(" CStruct"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"id"'),s(),n("span",{class:"token operator"},"/"),s(" U8"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"key"'),s(),n("span",{class:"token operator"},"/"),s(" String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"value"'),s(),n("span",{class:"token operator"},"/"),s(" String"),n("span",{class:"token punctuation"},")"),s(`


`),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"construct_payload"),n("span",{class:"token punctuation"},"("),s("instruction_variant"),n("span",{class:"token punctuation"},":"),s(" InstructionVariant"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token builtin"},"str"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token builtin"},"str"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token triple-quoted-string string"},'"""Generate a serialized instructionVariant"""'),s(`
    `),n("span",{class:"token keyword"},"return"),s(" payload_schema"),n("span",{class:"token punctuation"},"."),s("build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token string"},'"id"'),n("span",{class:"token punctuation"},":"),s(" instruction_variant"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"key"'),n("span",{class:"token punctuation"},":"),s(" key"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"value"'),n("span",{class:"token punctuation"},":"),s(" value"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`


`),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"mint_kv"),n("span",{class:"token punctuation"},"("),s(`
    client`),n("span",{class:"token punctuation"},":"),s(" Client"),n("span",{class:"token punctuation"},","),s(`
    program_pk`),n("span",{class:"token punctuation"},":"),s(" Pubkey"),n("span",{class:"token punctuation"},","),s(`
    account_pk`),n("span",{class:"token punctuation"},":"),s(" Pubkey"),n("span",{class:"token punctuation"},","),s(`
    wallet_kp`),n("span",{class:"token punctuation"},":"),s(" Keypair"),n("span",{class:"token punctuation"},","),s(`
    mint_key`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token builtin"},"str"),n("span",{class:"token punctuation"},","),s(`
    mint_value`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token builtin"},"str"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),n("span",{class:"token operator"},">"),s(" SendTransactionResp"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token triple-quoted-string string"},'"""Mint with a key/value pair to an account"""'),s(`
    `),n("span",{class:"token comment"},"# Construct the program payload for Mint invariant"),s(`
    payload_ser `),n("span",{class:"token operator"},"="),s(" construct_payload"),n("span",{class:"token punctuation"},"("),s("InstructionVariant"),n("span",{class:"token punctuation"},"."),s("MINT"),n("span",{class:"token punctuation"},","),s(" mint_key"),n("span",{class:"token punctuation"},","),s(" mint_value"),n("span",{class:"token punctuation"},")"),s(`

    `),n("span",{class:"token comment"},"# print(payload_ser)"),s(`
    `),n("span",{class:"token comment"},"# => b'\\x01\\n\\x00\\x00\\x00python key\\x0c\\x00\\x00\\x00python value'"),s(`
    `),n("span",{class:"token comment"},"# mint_payload_copy = payload_schema.parse(payload_ser)"),s(`
    `),n("span",{class:"token comment"},"# print(mint_payload_copy)"),s(`
    `),n("span",{class:"token comment"},"# => Container:"),s(`
    `),n("span",{class:"token comment"},"# =>     initialized = 1"),s(`
    `),n("span",{class:"token comment"},"# =>     key = u'python key' (total 10)"),s(`
    `),n("span",{class:"token comment"},"# =>     value = u'python value' (total 12)"),s(`

    `),n("span",{class:"token comment"},"# Construct the transaction with instructionVariant"),s(`
    txn `),n("span",{class:"token operator"},"="),s(" Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("add"),n("span",{class:"token punctuation"},"("),s(`
        Instruction`),n("span",{class:"token punctuation"},"("),s(`
            accounts`),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"["),s("AccountMeta"),n("span",{class:"token punctuation"},"("),s("account_pk"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"False"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"True"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" program_id"),n("span",{class:"token operator"},"="),s("program_pk"),n("span",{class:"token punctuation"},","),s(" data"),n("span",{class:"token operator"},"="),s(`payload_ser
        `),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" client"),n("span",{class:"token punctuation"},"."),s("send_transaction"),n("span",{class:"token punctuation"},"("),s("txn"),n("span",{class:"token punctuation"},","),s(" wallet_kp"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"# => {'jsonrpc': '2.0', 'result': '4ZdpWNdovdVaLextWSiqEBWp67k9rNTTUaX3qviHDXWY9c98bVtaRt5sasPhYzMVXHqhex78gzNKytcBnVH5CSTZ', 'id': 2}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br")])],-1),z=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[s(`
`),n("span",{class:"token comment"},"/// Instruction payload gets serialized"),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshSerialize)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"Payload"),n("span",{class:"token operator"},"<"),n("span",{class:"token lifetime-annotation symbol"},"'a"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
    variant`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},","),s(`
    key`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token lifetime-annotation symbol"},"'a"),s(),n("span",{class:"token keyword"},"str"),n("span",{class:"token punctuation"},","),s(`
    value`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token lifetime-annotation symbol"},"'a"),s(),n("span",{class:"token keyword"},"str"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Perform a mint transaction consisting of a key/value pair"),s(`
`),n("span",{class:"token comment"},"/// See submit_transaction below"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"mint_transaction"),n("span",{class:"token punctuation"},"("),s(`
    rpc_client`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"RpcClient"),n("span",{class:"token punctuation"},","),s(`
    accounts`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountMeta"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    wallet_signer`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token class-name"},"Signer"),n("span",{class:"token punctuation"},","),s(`
    mint_key`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"str"),n("span",{class:"token punctuation"},","),s(`
    mint_value`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"str"),n("span",{class:"token punctuation"},","),s(`
    mint_instruction_id`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},","),s(`
    commitment_config`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"CommitmentConfig"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Signature"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Setup the payload. `mint_instruction_id` is instruction variant index = 1"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" data "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Payload"),n("span",{class:"token operator"},"<"),s("`_"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        variant`),n("span",{class:"token punctuation"},":"),s(" mint_instruction_id"),n("span",{class:"token punctuation"},","),s(`
        key`),n("span",{class:"token punctuation"},":"),s(" mint_key"),n("span",{class:"token punctuation"},","),s(`
        value`),n("span",{class:"token punctuation"},":"),s(" mint_value"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" instruction "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_with_borsh"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"PROG_KEY"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pubkey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("data"),n("span",{class:"token punctuation"},","),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"submit_transaction"),n("span",{class:"token punctuation"},"("),s("rpc_client"),n("span",{class:"token punctuation"},","),s(" wallet_signer"),n("span",{class:"token punctuation"},","),s(" instruction"),n("span",{class:"token punctuation"},","),s(" commitment_config"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Submits the program instruction as per the"),s(`
`),n("span",{class:"token comment"},"/// instruction definition"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"submit_transaction"),n("span",{class:"token punctuation"},"("),s(`
    rpc_client`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"RpcClient"),n("span",{class:"token punctuation"},","),s(`
    wallet_signer`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token class-name"},"Signer"),n("span",{class:"token punctuation"},","),s(`
    instruction`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"Instruction"),n("span",{class:"token punctuation"},","),s(`
    commitment_config`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"CommitmentConfig"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Signature"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" transaction "),n("span",{class:"token operator"},"="),s(`
        `),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_unsigned"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Message"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),s("instruction"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("wallet_signer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pubkey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("recent_blockhash"),n("span",{class:"token punctuation"},","),s(" _fee_calculator"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(` rpc_client
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get_recent_blockhash"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("err"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"error: unable to get recent blockhash: {}"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    transaction
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_sign"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token macro property"},"vec!"),n("span",{class:"token punctuation"},"["),s("wallet_signer"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" recent_blockhash"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("err"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"error: failed to sign transaction: {}"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" signature "),n("span",{class:"token operator"},"="),s(` rpc_client
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send_and_confirm_transaction_with_spinner_and_commitment"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("transaction"),n("span",{class:"token punctuation"},","),s(" commitment_config"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map_err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token closure-params"},[n("span",{class:"token closure-punctuation punctuation"},"|"),s("err"),n("span",{class:"token closure-punctuation punctuation"},"|")]),s(),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"error: send transaction: {}"'),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),s("signature"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br")])],-1),C=n("h2",{id:"comment-deserialiser-les-donnees-d-instruction-dans-le-programme",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#comment-deserialiser-les-donnees-d-instruction-dans-le-programme","aria-hidden":"true"},"#"),s(" Comment d\xE9s\xE9rialiser les donn\xE9es d'instruction dans le programme")],-1),x=n("img",{src:m,alt:"Deserialize Instruction Data"},null,-1),A=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"//! instruction Contains the main ProgramInstruction enum"),s(`

`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"crate"),n("span",{class:"token module-declaration namespace"},[n("span",{class:"token punctuation"},"::"),s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"SampleError"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::"),s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[derive(Debug, PartialEq)]"),s(`
`),n("span",{class:"token comment"},"/// All custom program instructions"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"enum"),s(),n("span",{class:"token type-definition class-name"},"ProgramInstruction"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token class-name"},"InitializeAccount"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"MintToAccount"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"TransferBetweenAccounts"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"BurnFromAccount"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"MintToAccountWithFee"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"TransferBetweenAccountsWithFee"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token class-name"},"BurnFromAccountWithFee"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Generic Payload Deserialization"),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, Debug)]"),s(`
`),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"Payload"),s(),n("span",{class:"token punctuation"},"{"),s(`
    variant`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},","),s(`
    arg1`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(`
    arg2`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"ProgramInstruction"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"/// Unpack inbound buffer to associated Instruction"),s(`
    `),n("span",{class:"token comment"},"/// The expected format for input is a Borsh serialized vector"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"unpack"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" payload "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Payload"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),s("input"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"match"),s(" payload"),n("span",{class:"token punctuation"},"."),s("variant "),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token number"},"0"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramInstruction"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InitializeAccount"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"1"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"MintToAccount"),s(),n("span",{class:"token punctuation"},"{"),s(`
                key`),n("span",{class:"token punctuation"},":"),s(" payload"),n("span",{class:"token punctuation"},"."),s("arg1"),n("span",{class:"token punctuation"},","),s(`
                value`),n("span",{class:"token punctuation"},":"),s(" payload"),n("span",{class:"token punctuation"},"."),s("arg2"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"2"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"TransferBetweenAccounts"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(" payload"),n("span",{class:"token punctuation"},"."),s("arg1 "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"3"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"BurnFromAccount"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(" payload"),n("span",{class:"token punctuation"},"."),s("arg1 "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"4"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"MintToAccountWithFee"),s(),n("span",{class:"token punctuation"},"{"),s(`
                key`),n("span",{class:"token punctuation"},":"),s(" payload"),n("span",{class:"token punctuation"},"."),s("arg1"),n("span",{class:"token punctuation"},","),s(`
                value`),n("span",{class:"token punctuation"},":"),s(" payload"),n("span",{class:"token punctuation"},"."),s("arg2"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"5"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"TransferBetweenAccountsWithFee"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(" payload"),n("span",{class:"token punctuation"},"."),s("arg1 "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"6"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"BurnFromAccountWithFee"),s(),n("span",{class:"token punctuation"},"{"),s(" key"),n("span",{class:"token punctuation"},":"),s(" payload"),n("span",{class:"token punctuation"},"."),s("arg1 "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            _ `),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"SampleError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"DeserializationFailure"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br")])],-1),P=p('<h2 id="comment-serialiser-des-donnees-du-compte-dans-le-programme" tabindex="-1"><a class="header-anchor" href="#comment-serialiser-des-donnees-du-compte-dans-le-programme" aria-hidden="true">#</a> Comment s\xE9rialiser des donn\xE9es du compte dans le programme</h2><img src="'+d+'" alt="Account Data Serialization"><p>Le bloc de donn\xE9es du compte du programme (provenant du r\xE9pertoire d&#39;exemples) est structur\xE9 comme suit</p><table><thead><tr><th>Byte 0</th><th>Bytes 1-4</th><th>Bytes restants jusqu&#39;\xE0 1019</th></tr></thead><tbody><tr><td>Drapeau d&#39;initialisation</td><td>longueur de la BTreeMap s\xE9rialis\xE9e</td><td>BTreeMap (o\xF9 les paires cl\xE9-valeur sont stock\xE9es)</td></tr></tbody></table><h3 id="pack" tabindex="-1"><a class="header-anchor" href="#pack" aria-hidden="true">#</a> Pack</h3>',5),E=s("Un mot sur le trait "),B={href:"https://github.com/solana-labs/solana/blob/22a18a68e3ee68ae013d647e62e12128433d7230/sdk/program/src/program_pack.rs",target:"_blank",rel:"noopener noreferrer"},I=s("Pack"),R=p("<p>Le trait pack permet de cacher plus facilement les d\xE9tails de la s\xE9rialisation/d\xE9s\xE9rialisation des donn\xE9es de compte dans les instructions de traitement de votre programme principal. Ainsi, au lieu de mettre tout le processus de s\xE9rialisation/d\xE9s\xE9rialisation dans le code de traitement du programme, il encapsule les d\xE9tails derri\xE8re (3) fonctions :</p><ol><li><code>unpack_unchecked</code> - Permet de d\xE9s\xE9rialiser un compte sans v\xE9rifier s&#39;il a \xE9t\xE9 initialis\xE9. Ceci est utile lorsque vous traitez la fonction d&#39;initialisation (indice 0).</li><li><code>unpack</code> - Appelle votre impl\xE9mentation de <code>unpack_from_slice</code> et v\xE9rifie si le compte a \xE9t\xE9 initialis\xE9</li><li><code>pack</code> - Appelle votre impl\xE9mentation de <code>pack_into_slice</code></li></ol><p>Voici l&#39;impl\xE9mentation du trait Pack pour notre programme d&#39;exemple. Vient ensuite le traitement effectif des donn\xE9es du compte \xE0 l&#39;aide de borsh.</p>",3),O=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"//! @brief account_state manages account data"),s(`

`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token keyword"},"crate"),n("span",{class:"token module-declaration namespace"},[n("span",{class:"token punctuation"},"::"),s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"SampleError"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("sol_template_shared"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("entrypoint"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramResult"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("program_pack"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"IsInitialized"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Pack"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Sealed"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("collections"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Maintains global accumulator"),s(`
`),n("span",{class:"token attribute attr-name"},"#[derive(Debug, Default, PartialEq)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
    btree_storage`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"/// Returns indicator if this account has been initialized"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"set_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s("is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Adds a new key/value pair to the account"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"match"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s("btree_storage"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"contains_key"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token boolean"},"true"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"SampleError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"KeyAlreadyExists"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s("btree_storage"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"insert"),n("span",{class:"token punctuation"},"("),s("key"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"/// Removes a key from account and returns the keys value"),s(`
    `),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"remove"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"str"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"SampleError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"match"),s(),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s("btree_storage"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"contains_key"),n("span",{class:"token punctuation"},"("),s("key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token boolean"},"true"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s("btree_storage"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"remove"),n("span",{class:"token punctuation"},"("),s("key"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"SampleError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"KeyNotFoundInAccount"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"Sealed"),s(),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Pack expects the implementation to satisfy whether the"),s(`
`),n("span",{class:"token comment"},"// account is initialzed."),s(`
`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"IsInitialized"),s(),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"is_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token keyword"},"bool"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s(`is_initialized
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"impl"),s(),n("span",{class:"token class-name"},"Pack"),s(),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"LEN"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"/// Store 'state' of account to its data area"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"pack_into_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},","),s(" dst"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token namespace"},[s("sol_template_shared"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"pack_into_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s("is_initialized"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"self"),n("span",{class:"token punctuation"},"."),s("btree_storage"),n("span",{class:"token punctuation"},","),s(" dst"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"/// Retrieve 'state' of account from account data area"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"unpack_from_slice"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"Self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"match"),s(),n("span",{class:"token namespace"},[s("sol_template_shared"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token function"},"unpack_from_slice"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("is_initialized"),n("span",{class:"token punctuation"},","),s(" btree_map"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramAccountState"),s(),n("span",{class:"token punctuation"},"{"),s(`
                is_initialized`),n("span",{class:"token punctuation"},","),s(`
                btree_storage`),n("span",{class:"token punctuation"},":"),s(" btree_map"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),s("_"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"ProgramError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"InvalidAccountData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br")])],-1),N=p('<h3 id="serialisation-deserialisation" tabindex="-1"><a class="header-anchor" href="#serialisation-deserialisation" aria-hidden="true">#</a> S\xE9rialisation/D\xE9s\xE9rialisation</h3><p>Pour compl\xE9ter la s\xE9rialisation et la d\xE9s\xE9rialisation sous-jacentes :</p><ol><li><code>sol_template_shared::pack_into_slice</code> - O\xF9 la s\xE9rialisation se produit effectivement</li><li><code>sol_template_shared::unpack_from_slice</code> - O\xF9 la d\xE9s\xE9rialisation se produit effectivement</li></ol><p><strong>Veuillez noter</strong> que dans ce qui suit, nous avons une partition <code>u32</code> (4 bytes) dans la configuration des donn\xE9es pour <code>BTREE_LENGTH</code> qui pr\xE9c\xE8de <code>BTREE_STORAGE</code>. Cela est d\xFB au fait que borsh, pendant la d\xE9s\xE9rialisation, v\xE9rifie que la longueur de la portion que vous d\xE9s\xE9rialisez correspond \xE0 la quantit\xE9 de donn\xE9es qu&#39;il lit avant de recombiner effectivement l&#39;objet de r\xE9ception. L&#39;approche pr\xE9sent\xE9e ci-dessous lit d&#39;abord le <code>BTREE_LENGTH</code> pour obtenir la taille \xE0 <code>slice</code> \xE0 partir du pointeur <code>BTREE_STORAGE</code>.</p>',4),M=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("arrayref"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::"),s("program_memory"),n("span",{class:"token punctuation"},"::")]),s("sol_memcpy"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token namespace"},[s("collections"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Initialization flag size for account state"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"INITIALIZED_BYTES"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Storage for the serialized size of the BTreeMap control"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"BTREE_LENGTH"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Storage for the serialized BTreeMap container"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"BTREE_STORAGE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1019"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"/// Sum of all account state lengths"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"usize"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token constant"},"INITIALIZED_BYTES"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"BTREE_LENGTH"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token constant"},"BTREE_STORAGE"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"/// Packs the initialized flag and data content into destination slice"),s(`
`),n("span",{class:"token attribute attr-name"},"#[allow(clippy::ptr_offset_with_cast)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"pack_into_slice"),n("span",{class:"token punctuation"},"("),s(`
    is_initialized`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(`
    btree_storage`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(`
    dst`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" dst "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"array_mut_ref!"),n("span",{class:"token punctuation"},"["),s("dst"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Setup pointers to key areas of account state data"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("is_initialized_dst"),n("span",{class:"token punctuation"},","),s(" data_len_dst"),n("span",{class:"token punctuation"},","),s(" data_dst"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(`
        `),n("span",{class:"token macro property"},"mut_array_refs!"),n("span",{class:"token punctuation"},"["),s("dst"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"INITIALIZED_BYTES"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"BTREE_LENGTH"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"BTREE_STORAGE"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Set the initialized flag"),s(`
    is_initialized_dst`),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" is_initialized "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Store the core data length and serialized content"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" keyval_store_data "),n("span",{class:"token operator"},"="),s(" btree_storage"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"try_to_vec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" data_len "),n("span",{class:"token operator"},"="),s(" keyval_store_data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" data_len "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token constant"},"BTREE_STORAGE"),s(),n("span",{class:"token punctuation"},"{"),s(`
        data_len_dst`),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},".."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"copy_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"("),s("data_len "),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"u32"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"to_le_bytes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token function"},"sol_memcpy"),n("span",{class:"token punctuation"},"("),s("data_dst"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),s("keyval_store_data"),n("span",{class:"token punctuation"},","),s(" data_len"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token macro property"},"panic!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"/// Unpacks the data from slice and return the initialized flag and data content"),s(`
`),n("span",{class:"token attribute attr-name"},"#[allow(clippy::ptr_offset_with_cast)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"unpack_from_slice"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" src "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"array_ref!"),n("span",{class:"token punctuation"},"["),s("src"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Setup pointers to key areas of account state data"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("is_initialized_src"),n("span",{class:"token punctuation"},","),s(" data_len_src"),n("span",{class:"token punctuation"},","),s(" data_src"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(`
        `),n("span",{class:"token macro property"},"array_refs!"),n("span",{class:"token punctuation"},"["),s("src"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"INITIALIZED_BYTES"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"BTREE_LENGTH"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"BTREE_STORAGE"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(" is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"match"),s(" is_initialized_src "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        _ `),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Box"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),s(`
                `),n("span",{class:"token string"},'"unrecognized initialization flag \\"{:?}\\". in account"'),n("span",{class:"token punctuation"},","),s(`
                is_initialized_src
            `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Get current size of content in data area"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" data_len "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"u32"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"from_le_bytes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("data_len_src"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// If emptry, create a default"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" data_len "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("is_initialized"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" data_dser "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("data_src"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},".."),s("data_len"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("is_initialized"),n("span",{class:"token punctuation"},","),s(" data_dser"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br")])],-1),U=n("h3",{id:"utilisation",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#utilisation","aria-hidden":"true"},"#"),s(" Utilisation")],-1),D=n("p",null,[s("Ce qui suit regroupe tout cela et montre comment le programme interagit avec le "),n("code",null,"ProgramAccountState"),s(" qui encapsule le drapeau d'initialisation ainsi que le "),n("code",null,"BTreeMap"),s(" correspondant \xE0 nos paires cl\xE9/valeur.")],-1),K=n("p",null,"D'abord quand nous voulons initialiser un tout nouveau compte :",-1),G=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"/// Initialize a new program account, which is the first in AccountInfo array"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"initialize_account"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Initialize account"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" program_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_data "),n("span",{class:"token operator"},"="),s(" program_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Here we use unpack_unchecked as we have yet to initialize"),s(`
    `),n("span",{class:"token comment"},"// Had we tried to use unpack it would fail because, well, chicken and egg"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack_unchecked"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// We double check that we haven't already initialized this accounts data"),s(`
    `),n("span",{class:"token comment"},"// more than once. If we are good, we set the initialized flag"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" account_state"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"SampleError"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"AlreadyInitializedState"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"into"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set_initialized"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"// Finally, we store back to the accounts space"),s(`
    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"pack"),n("span",{class:"token punctuation"},"("),s("account_state"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br")])],-1),q=n("p",null,"Nous pouvons maintenant op\xE9rer sur nos autres instructions comme nous pouvons le voir en cr\xE9ant une nouvelle paire cl\xE9/valeur que nous avons pr\xE9c\xE9demment montr\xE9e lors de l'envoi d'instructions depuis un client :",-1),L=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token comment"},"/// Mint a key/pair to the programs account, which is the first in accounts"),s(`
`),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"mint_keypair_to_account"),n("span",{class:"token punctuation"},"("),s("accounts"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token class-name"},"AccountInfo"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"ProgramResult"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token macro property"},"msg!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Mint to account"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" account_info_iter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" accounts"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"iter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" program_account "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"next_account_info"),n("span",{class:"token punctuation"},"("),s("account_info_iter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_data "),n("span",{class:"token operator"},"="),s(" program_account"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"borrow_mut"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Unpacking an uninitialized account state will fail"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token keyword"},"mut"),s(" account_state "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"unpack"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Add the key value pair to the underlying BTreeMap"),s(`
    account_state`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("key"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Finally, serialize back to the accounts data"),s(`
    `),n("span",{class:"token class-name"},"ProgramAccountState"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"pack"),n("span",{class:"token punctuation"},"("),s("account_state"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token keyword"},"mut"),s(" account_data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br")])],-1),F=n("h2",{id:"comment-deserialisation-des-donnees-du-compte-cote-client",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#comment-deserialisation-des-donnees-du-compte-cote-client","aria-hidden":"true"},"#"),s(" Comment d\xE9s\xE9rialisation des donn\xE9es du compte c\xF4t\xE9 client")],-1),V=n("p",null,"Les clients peuvent appeler Solana pour r\xE9cup\xE9rer un compte appartenant \xE0 un programme, dans lequel le bloc de donn\xE9es s\xE9rialis\xE9es fait partie du r\xE9sultat. La d\xE9s\xE9rialisation n\xE9cessite de conna\xEEtre la structure des blocs de donn\xE9es.",-1),j=n("p",null,[s("Celle-ci a \xE9t\xE9 d\xE9crite "),n("a",{href:"#account-data-serialization"},"Ici")],-1),H=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" serialize"),n("span",{class:"token punctuation"},","),s(" deserialize"),n("span",{class:"token punctuation"},","),s(" deserializeUnchecked "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"borsh"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Buffer "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"buffer"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(`
  Keypair`),n("span",{class:"token punctuation"},","),s(`
  AccountMeta`),n("span",{class:"token punctuation"},","),s(`
  Connection`),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),s(`
  PublicKey`),n("span",{class:"token punctuation"},","),s(`
  SystemProgram`),n("span",{class:"token punctuation"},","),s(`
  Transaction`),n("span",{class:"token punctuation"},","),s(`
  TransactionInstruction`),n("span",{class:"token punctuation"},","),s(`
  sendAndConfirmTransaction`),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Flexible class that takes properties and imbues them"),s(`
`),n("span",{class:"token comment"},"// to the object instance"),s(`
`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Assignable"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),s("properties"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"keys"),n("span",{class:"token punctuation"},"("),s("properties"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"["),s("key"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" properties"),n("span",{class:"token punctuation"},"["),s("key"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"AccoundData"),s(),n("span",{class:"token keyword"},"extends"),s(),n("span",{class:"token class-name"},"Assignable"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"const"),s(" dataSchema "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s(`
  `),n("span",{class:"token punctuation"},"["),s(`
    AccoundData`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
      kind`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"struct"'),n("span",{class:"token punctuation"},","),s(`
      fields`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"initialized"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"u8"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"tree_length"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"u32"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"map"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(" kind"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"map"'),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"string"'),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"string"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Fetch program account data
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("Connection"),n("span",{class:"token punctuation"},"}"),s(` connection - Solana RPC connection
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("PublicKey"),n("span",{class:"token punctuation"},"}"),s(` account - Public key for account whose data we want
 * `),n("span",{class:"token keyword"},"@return"),s(),n("span",{class:"token punctuation"},"{"),s("Promise<AccoundData>"),n("span",{class:"token punctuation"},"}"),s(` - Keypair
 */`)]),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"getAccountData"),n("span",{class:"token punctuation"},"("),s(`
  connection`),n("span",{class:"token operator"},":"),s(" Connection"),n("span",{class:"token punctuation"},","),s(`
  account`),n("span",{class:"token operator"},":"),s(` PublicKey
`),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"Promise"),n("span",{class:"token operator"},"<"),s("AccoundData"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"let"),s(" nameAccount "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getAccountInfo"),n("span",{class:"token punctuation"},"("),s("account"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"processed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"deserializeUnchecked"),n("span",{class:"token punctuation"},"("),s("dataSchema"),n("span",{class:"token punctuation"},","),s(" AccoundData"),n("span",{class:"token punctuation"},","),s(" nameAccount"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br")])],-1),Y=n("div",{class:"language-python ext-py line-numbers-mode"},[n("pre",{class:"language-python"},[n("code",null,[n("span",{class:"token keyword"},"from"),s(" borsh_construct "),n("span",{class:"token keyword"},"import"),s(" CStruct"),n("span",{class:"token punctuation"},","),s(" U8"),n("span",{class:"token punctuation"},","),s(" U32"),n("span",{class:"token punctuation"},","),s(" HashMap"),n("span",{class:"token punctuation"},","),s(` String
`),n("span",{class:"token keyword"},"from"),s(" solana"),n("span",{class:"token punctuation"},"."),s("rpc"),n("span",{class:"token punctuation"},"."),s("commitment "),n("span",{class:"token keyword"},"import"),s(` Confirmed
`),n("span",{class:"token keyword"},"from"),s(" solders"),n("span",{class:"token punctuation"},"."),s("pubkey "),n("span",{class:"token keyword"},"import"),s(` Pubkey
`),n("span",{class:"token keyword"},"from"),s(" solana"),n("span",{class:"token punctuation"},"."),s("rpc"),n("span",{class:"token punctuation"},"."),s("api "),n("span",{class:"token keyword"},"import"),s(` Client


`),n("span",{class:"token comment"},"# Schema to deserialize program's account data"),s(`
account_schema `),n("span",{class:"token operator"},"="),s(" CStruct"),n("span",{class:"token punctuation"},"("),s(`
    `),n("span",{class:"token string"},'"initialized"'),s(),n("span",{class:"token operator"},"/"),s(" U8"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},'"map_length"'),s(),n("span",{class:"token operator"},"/"),s(" U32"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},'"map"'),s(),n("span",{class:"token operator"},"/"),s(" HashMap"),n("span",{class:"token punctuation"},"("),s("String"),n("span",{class:"token punctuation"},","),s(" String"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),s(`


`),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"get_account_info"),n("span",{class:"token punctuation"},"("),s("client"),n("span",{class:"token punctuation"},":"),s(" Client"),n("span",{class:"token punctuation"},","),s(" account_pk"),n("span",{class:"token punctuation"},":"),s(" Pubkey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token triple-quoted-string string"},'"""Fetch account information from RPC, parse out the data and deserialize"""'),s(`
    res `),n("span",{class:"token operator"},"="),s(" client"),n("span",{class:"token punctuation"},"."),s("get_account_info"),n("span",{class:"token punctuation"},"("),s("account_pk"),n("span",{class:"token punctuation"},","),s(" Confirmed"),n("span",{class:"token punctuation"},","),s(" encoding"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'base64'"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" account_schema"),n("span",{class:"token punctuation"},"."),s("parse"),n("span",{class:"token punctuation"},"("),s("res"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"# Results in or similar"),s(`
`),n("span",{class:"token comment"},"# => Container:"),s(`
`),n("span",{class:"token comment"},"# =>     initialized = 1"),s(`
`),n("span",{class:"token comment"},"# =>     map_length = 109"),s(`
`),n("span",{class:"token comment"},"# =>     map = {'Happy': 'New Year!', 'newKey': 'A new value',"),s(`
`),n("span",{class:"token comment"},"# =>            'python key': 'python value', 'ts key': 'ts first value'}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br")])],-1),W=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token namespace"},[s("arrayref"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token namespace"},[s("collections"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("error"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Error"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token attribute attr-name"},"#[allow(clippy::ptr_offset_with_cast)]"),s(`
`),n("span",{class:"token keyword"},"pub"),s(),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"unpack_from_slice"),n("span",{class:"token punctuation"},"("),s("src"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token operator"},"<"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"bool"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Box"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" src "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"array_ref!"),n("span",{class:"token punctuation"},"["),s("src"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"ACCOUNT_STATE_SPACE"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Setup pointers to key areas of account state data"),s(`
    `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("is_initialized_src"),n("span",{class:"token punctuation"},","),s(" data_len_src"),n("span",{class:"token punctuation"},","),s(" data_src"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(`
        `),n("span",{class:"token macro property"},"array_refs!"),n("span",{class:"token punctuation"},"["),s("src"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"INITIALIZED_BYTES"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"BTREE_LENGTH"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"BTREE_STORAGE"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"let"),s(" is_initialized "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"match"),s(" is_initialized_src "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
        _ `),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Err"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Box"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"dyn"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),n("span",{class:"token macro property"},"format!"),n("span",{class:"token punctuation"},"("),s(`
                `),n("span",{class:"token string"},'"unrecognized initialization flag \\"{:?}\\". in account"'),n("span",{class:"token punctuation"},","),s(`
                is_initialized_src
            `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Get current size of content in data area"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" data_len "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"u32"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"from_le_bytes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("data_len_src"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"as"),s(),n("span",{class:"token keyword"},"usize"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// If emptry, create a default"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" data_len "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("is_initialized"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" data_dser "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("data_src"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},".."),s("data_len"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"Ok"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("is_initialized"),n("span",{class:"token punctuation"},","),s(" data_dser"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br")])],-1),X=n("h2",{id:"mappages-courants-de-solana-ts-js",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#mappages-courants-de-solana-ts-js","aria-hidden":"true"},"#"),s(" Mappages courants de Solana TS/JS")],-1),Z=n("p",null,[s("La "),n("a",{href:"#ressources"},"Sp\xE9cification de Borsh"),s(" contient la plupart des mappages pour les types de donn\xE9es primitifs et compos\xE9s.")],-1),J=n("p",null,"La cl\xE9 pour TS/JS et Python est la cr\xE9ation d'un sch\xE9ma Borsh avec une d\xE9finition appropri\xE9e afin que les fonctions de s\xE9rialisation et de d\xE9s\xE9rialisation puissent g\xE9n\xE9rer ou parcourir les entr\xE9es respectives.",-1),Q=n("p",null,"Nous pr\xE9sentons ici la s\xE9rialisation de primitives (nombres, cha\xEEnes de caract\xE8res) et de types compos\xE9s (tableau \xE0 taille fixe, Map) d'abord en Typescript, puis en Python et enfin la d\xE9s\xE9rialisation \xE9quivalente du c\xF4t\xE9 de Rust :",-1),$=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token hashbang comment"},"#!/usr/bin/env node"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" serialize"),n("span",{class:"token punctuation"},","),s(" deserialize"),n("span",{class:"token punctuation"},","),s(" deserializeUnchecked "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"borsh"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Buffer "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"buffer"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" expect "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"chai"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" PublicKey"),n("span",{class:"token punctuation"},","),s(" Struct "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Primitive extends the Struct type from Solana Library
 * for convenience of dynamic property setting
 * `),n("span",{class:"token keyword"},"@extends"),s(),n("span",{class:"token punctuation"},"{"),s("Struct"),n("span",{class:"token punctuation"},"}"),s(` Solana JS Struct class
 */`)]),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Primitive"),s(),n("span",{class:"token keyword"},"extends"),s(),n("span",{class:"token class-name"},"Struct"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),s("properties"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"super"),n("span",{class:"token punctuation"},"("),s("properties"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},`/**
 * Entry point for script *
 */`),s(`
`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"entry"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// Emulate BTreeMap"),s(`
  `),n("span",{class:"token keyword"},"let"),s(" map "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  map`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"cookbook"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"recipe"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  map`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"recipe"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"ingredient"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

  `),n("span",{class:"token comment"},"// Setup a Primitive for all basic and a few"),s(`
  `),n("span",{class:"token comment"},"// compound types"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" value "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Primitive"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token constant"},"U8"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"255"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"U16"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"65535"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"U32"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"4294967295"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"FIXED_STRING_ARRAY"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"hello"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"world"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"FIXED_U8_ARRAY"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token constant"},"MAP_STRING_STRING"),n("span",{class:"token operator"},":"),s(" map"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},"// Define our schema"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" schema "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token punctuation"},"["),s(`
      Primitive`),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        kind`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"struct"'),n("span",{class:"token punctuation"},","),s(`
        fields`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
          `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"U8"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"u8"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"U16"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"u16"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"U32"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"u32"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"FIXED_STRING_ARRAY"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"string"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"FIXED_U8_ARRAY"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"u8"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"["),s(`
            `),n("span",{class:"token string"},'"MAP_STRING_STRING"'),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token punctuation"},"{"),s(" kind"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"map"'),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"string"'),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"string"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Value = "'),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},"// Serialize then deserialize"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" dser "),n("span",{class:"token operator"},"="),s(" Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),s("schema"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("dser"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" newValue "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"deserialize"),n("span",{class:"token punctuation"},"("),s("schema"),n("span",{class:"token punctuation"},","),s(" Primitive"),n("span",{class:"token punctuation"},","),s(" dser"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},"// Viola!"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"New value = "'),n("span",{class:"token punctuation"},","),s(" newValue"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Fixed string array = "'),n("span",{class:"token punctuation"},","),s(" newValue"),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"FIXED_STRING_ARRAY"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Fixed u8 array = "'),n("span",{class:"token punctuation"},","),s(" newValue"),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"FIXED_U8_ARRAY"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Map = "'),n("span",{class:"token punctuation"},","),s(" newValue"),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"MAP_STRING_STRING"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token function"},"entry"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br")])],-1),nn=n("div",{class:"language-python ext-py line-numbers-mode"},[n("pre",{class:"language-python"},[n("code",null,[n("span",{class:"token keyword"},"from"),s(" borsh_construct "),n("span",{class:"token keyword"},"import"),s(" U8"),n("span",{class:"token punctuation"},","),s(" U16"),n("span",{class:"token punctuation"},","),s(" U32"),n("span",{class:"token punctuation"},","),s(" String"),n("span",{class:"token punctuation"},","),s(` HashMap

`),n("span",{class:"token comment"},"# Schema to deserialize various types"),s(`
primitive_schema `),n("span",{class:"token operator"},"="),s(" CStruct"),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token string"},'"U8"'),s(),n("span",{class:"token operator"},"/"),s(" U8"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"U16"'),s(),n("span",{class:"token operator"},"/"),s(" U16"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"U32"'),s(),n("span",{class:"token operator"},"/"),s(" U32"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"FIXED_STRING_ARRAY"'),s(),n("span",{class:"token operator"},"/"),s(" String"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"FIXED_U8_ARRAY"'),s(),n("span",{class:"token operator"},"/"),s(" U8"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"MAP_STRING_STRING"'),s(),n("span",{class:"token operator"},"/"),s(" HashMap"),n("span",{class:"token punctuation"},"("),s("String"),n("span",{class:"token punctuation"},","),s(" String"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),s(`


`),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"common"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    mapping `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token string"},'"cookbook"'),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"recipe"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"recipe"'),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"ingredient"'),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"# Serialize"),s(`
    dser `),n("span",{class:"token operator"},"="),s(" primitive_schema"),n("span",{class:"token punctuation"},"."),s("build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token string"},"'U8'"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token number"},"255"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'U16'"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token number"},"65535"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'U32'"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token number"},"4294967295"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"FIXED_STRING_ARRAY"'),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'hello'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'world'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"FIXED_U8_ARRAY"'),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"MAP_STRING_STRING"'),n("span",{class:"token punctuation"},":"),s(" mapping"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"print"),n("span",{class:"token punctuation"},"("),s("dser"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"# => b'\\xff\\xff\\xff\\xff\\xff\\xff\\xff\\x05\\x00\\x00\\x00hello\\x05\\x00\\x00\\x00world\\x01\\x02\\x03\\x04\\x05\\x02\\x00\\x00\\x00\\x08\\x00\\x00\\x00cookbook\\x06\\x00\\x00\\x00recipe\\x06\\x00\\x00\\x00recipe\\n\\x00\\x00\\x00ingredient'"),s(`
    `),n("span",{class:"token comment"},"# Deserialize"),s(`
    new_value `),n("span",{class:"token operator"},"="),s(" primitive_schema"),n("span",{class:"token punctuation"},"."),s("parse"),n("span",{class:"token punctuation"},"("),s("dser"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"# Viola"),s(`
    `),n("span",{class:"token keyword"},"print"),n("span",{class:"token punctuation"},"("),s("new_value"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"# => Container:"),s(`
    `),n("span",{class:"token comment"},"# =>    U8 = 255"),s(`
    `),n("span",{class:"token comment"},"# =>    U16 = 65535"),s(`
    `),n("span",{class:"token comment"},"# =>    U32 = 4294967295"),s(`
    `),n("span",{class:"token comment"},"# =>    FIXED_STRING_ARRAY = ListContainer:"),s(`
    `),n("span",{class:"token comment"},"# =>        hello"),s(`
    `),n("span",{class:"token comment"},"# =>        world"),s(`
    `),n("span",{class:"token comment"},"# =>    FIXED_U8_ARRAY = ListContainer:"),s(`
    `),n("span",{class:"token comment"},"# =>        1"),s(`
    `),n("span",{class:"token comment"},"# =>        2"),s(`
    `),n("span",{class:"token comment"},"# =>        3"),s(`
    `),n("span",{class:"token comment"},"# =>        4"),s(`
    `),n("span",{class:"token comment"},"# =>        5"),s(`
    `),n("span",{class:"token comment"},"# =>    MAP_STRING_STRING = {'cookbook': 'recipe', 'recipe': 'ingredient'}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br")])],-1),sn=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token attribute attr-name"},"#[cfg(test)]"),s(`
`),n("span",{class:"token keyword"},"mod"),s(),n("span",{class:"token module-declaration namespace"},"tests"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("borsh"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token class-name"},"BorshDeserialize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"BorshSerialize"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("std"),n("span",{class:"token punctuation"},"::"),s("collections"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token attribute attr-name"},"#[test]"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"primitives"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" prim "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s(`
            `),n("span",{class:"token number"},"255u8"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"255"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"255"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"255"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"255"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"255"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"255"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"104"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"101"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"108"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"108"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"111"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"119"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"111"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"114"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"108"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"100"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"99"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"111"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"111"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"107"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"98"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"111"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"111"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"107"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"114"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"101"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"99"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"105"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"112"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"101"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"114"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"101"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"99"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"105"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"112"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"101"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"105"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"110"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"103"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"114"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"101"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"100"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"105"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"101"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"110"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"116"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug)]"),s(`
        `),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"Primitive"),n("span",{class:"token punctuation"},"("),s(`
            `),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token keyword"},"u16"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token keyword"},"u32"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token class-name"},"BTreeMap"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"String"),n("span",{class:"token operator"},">"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" x "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Primitive"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("prim"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token macro property"},"println!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"{:?}"'),n("span",{class:"token punctuation"},","),s(" x"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br")])],-1),an=n("h2",{id:"constructions-avancees",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#constructions-avancees","aria-hidden":"true"},"#"),s(" Constructions Avanc\xE9es")],-1),tn=n("p",null,"Nous avons montr\xE9 comment cr\xE9er des chargements simples dans les exemples pr\xE9c\xE9dents. Cette section montrera le mappage appropri\xE9 entre TS/JS et Rust pour les g\xE9rer.",-1),en=n("h3",{id:"coption",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#coption","aria-hidden":"true"},"#"),s(" COption")],-1),on=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token hashbang comment"},"#!/usr/bin/env node"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" serialize"),n("span",{class:"token punctuation"},","),s(" deserialize"),n("span",{class:"token punctuation"},","),s(" deserializeUnchecked "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"borsh"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Buffer "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"buffer"'),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" PublicKey"),n("span",{class:"token punctuation"},","),s(" Struct "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * COption is meant to mirror the
 * \`solana_program::options::COption\`
 *
 * This type stores a u32 flag (0 | 1) indicating
 * the presence or not of a underlying PublicKey
 *
 * Similar to a Rust Option
 * `),n("span",{class:"token keyword"},"@extends"),s(),n("span",{class:"token punctuation"},"{"),s("Struct"),n("span",{class:"token punctuation"},"}"),s(` Solana JS Struct class
 * `),n("span",{class:"token keyword"},"@implements"),s(),n("span",{class:"token punctuation"},"{"),s("encode"),n("span",{class:"token punctuation"},"}"),s(`
 */`)]),s(`
`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"COption"),s(),n("span",{class:"token keyword"},"extends"),s(),n("span",{class:"token class-name"},"Struct"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),s("properties"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"super"),n("span",{class:"token punctuation"},"("),s("properties"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token doc-comment comment"},[s(`/**
   * Creates a COption from a PublicKey
   * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("PublicKey?"),n("span",{class:"token punctuation"},"}"),s(` akey
   * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("COption"),n("span",{class:"token punctuation"},"}"),s(` COption
   */`)]),s(`
  `),n("span",{class:"token keyword"},"static"),s(),n("span",{class:"token function"},"fromPublicKey"),n("span",{class:"token punctuation"},"("),s("akey"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(" PublicKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(" COption "),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("akey "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token keyword"},"undefined"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"COption"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
        noneOrSome`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
        pubKeyBuffer`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"32"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"COption"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
        noneOrSome`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(`
        pubKeyBuffer`),n("span",{class:"token operator"},":"),s(" akey"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBytes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token doc-comment comment"},[s(`/**
   * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("Buffer"),n("span",{class:"token punctuation"},"}"),s(` Serialized COption (this)
   */`)]),s(`
  `),n("span",{class:"token function"},"encode"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(" Buffer "),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"COPTIONSCHEMA"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token doc-comment comment"},[s(`/**
   * Safe deserializes a borsh serialized buffer to a COption
   * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("Buffer"),n("span",{class:"token punctuation"},"}"),s(` data - Buffer containing borsh serialized data
   * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("COption"),n("span",{class:"token punctuation"},"}"),s(` COption object
   */`)]),s(`
  `),n("span",{class:"token keyword"},"static"),s(),n("span",{class:"token function"},"decode"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(" COption "),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"deserialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"COPTIONSCHEMA"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},","),s(" data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token doc-comment comment"},[s(`/**
   * Unsafe deserializes a borsh serialized buffer to a COption
   * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token punctuation"},"{"),s("Buffer"),n("span",{class:"token punctuation"},"}"),s(` data - Buffer containing borsh serialized data
   * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token punctuation"},"{"),s("COption"),n("span",{class:"token punctuation"},"}"),s(` COption object
   */`)]),s(`
  `),n("span",{class:"token keyword"},"static"),s(),n("span",{class:"token function"},"decodeUnchecked"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},":"),s(" COption "),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"deserializeUnchecked"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"COPTIONSCHEMA"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},","),s(" data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Defines the layout of the COption object
 * for serializing/deserializing
 * `),n("span",{class:"token keyword"},"@type"),s(),n("span",{class:"token punctuation"},"{"),s("Map"),n("span",{class:"token punctuation"},"}"),s(`
 */`)]),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"COPTIONSCHEMA"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s(`
  `),n("span",{class:"token punctuation"},"["),s(`
    COption`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
      kind`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"struct"'),n("span",{class:"token punctuation"},","),s(`
      fields`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"noneOrSome"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"u32"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"pubKeyBuffer"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"32"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token doc-comment comment"},`/**
 * Entry point for script *
 */`),s(`
`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"entry"),n("span",{class:"token punctuation"},"("),s("indata"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(" PublicKey"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"// If we get a PublicKey"),s(`
  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("indata"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// Construct COption instance"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" coption "),n("span",{class:"token operator"},"="),s(" COption"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"fromPublicKey"),n("span",{class:"token punctuation"},"("),s("indata"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Testing COption with "'),s(),n("span",{class:"token operator"},"+"),s(" indata"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBase58"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Serialize it"),s(`
    `),n("span",{class:"token keyword"},"let"),s(" copt_ser "),n("span",{class:"token operator"},"="),s(" coption"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"encode"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"copt_ser "'),n("span",{class:"token punctuation"},","),s(" copt_ser"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Deserialize it"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" tdone "),n("span",{class:"token operator"},"="),s(" COption"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"decode"),n("span",{class:"token punctuation"},"("),s("copt_ser"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("tdone"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Validate contains PublicKey"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("tdone"),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"noneOrSome"'),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"pubkey: "'),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),s("tdone"),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"pubKeyBuffer"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBase58"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},`/*
            Output:
            Testing COption with A94wMjV54C8f8wn7zL8TxNCdNiGoq7XSN7vWGrtd4vwU
            copt_ser  Buffer(36) [1, 0, 0, 0, 135, 202, 71, 214, 68, 105, 98, 176, 211, 130, 105, 2, 55, 187, 86, 186, 109, 176, 80, 208, 77, 100, 221, 101, 20, 203, 149, 166, 96, 171, 119, 35, buffer: ArrayBuffer(8192), byteLength: 36, byteOffset: 1064, length: 36]
            COption {noneOrSome: 1, pubKeyBuffer: Uint8Array(32)}
            pubkey: A94wMjV54C8f8wn7zL8TxNCdNiGoq7XSN7vWGrtd4vwU
        */`),s(`
  `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Testing COption with null"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Construct COption instance"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" coption "),n("span",{class:"token operator"},"="),s(" COption"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"fromPublicKey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Serialize it"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" copt_ser "),n("span",{class:"token operator"},"="),s(" coption"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"encode"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("copt_ser"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Deserialize it"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" tdone1 "),n("span",{class:"token operator"},"="),s(" COption"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"decode"),n("span",{class:"token punctuation"},"("),s("copt_ser"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("tdone1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// Validate does NOT contains PublicKey"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("tdone1"),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"noneOrSome"'),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token function"},"Error"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Expected no public key"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"pubkey: null"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},`/*
            Output:
            Testing COption with null
            Buffer(36)[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, buffer: ArrayBuffer(8192), byteLength: 36, byteOffset: 2272, length: 36]
            COption { noneOrSome: 0, pubKeyBuffer: Uint8Array(32) }
            pubkey: null
        */`),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Test with PublicKey"),s(`
`),n("span",{class:"token function"},"entry"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PublicKey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"A94wMjV54C8f8wn7zL8TxNCdNiGoq7XSN7vWGrtd4vwU"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token comment"},"// Test without PublicKey"),s(`
`),n("span",{class:"token function"},"entry"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br"),n("span",{class:"line-number"},"55"),n("br"),n("span",{class:"line-number"},"56"),n("br"),n("span",{class:"line-number"},"57"),n("br"),n("span",{class:"line-number"},"58"),n("br"),n("span",{class:"line-number"},"59"),n("br"),n("span",{class:"line-number"},"60"),n("br"),n("span",{class:"line-number"},"61"),n("br"),n("span",{class:"line-number"},"62"),n("br"),n("span",{class:"line-number"},"63"),n("br"),n("span",{class:"line-number"},"64"),n("br"),n("span",{class:"line-number"},"65"),n("br"),n("span",{class:"line-number"},"66"),n("br"),n("span",{class:"line-number"},"67"),n("br"),n("span",{class:"line-number"},"68"),n("br"),n("span",{class:"line-number"},"69"),n("br"),n("span",{class:"line-number"},"70"),n("br"),n("span",{class:"line-number"},"71"),n("br"),n("span",{class:"line-number"},"72"),n("br"),n("span",{class:"line-number"},"73"),n("br"),n("span",{class:"line-number"},"74"),n("br"),n("span",{class:"line-number"},"75"),n("br"),n("span",{class:"line-number"},"76"),n("br"),n("span",{class:"line-number"},"77"),n("br"),n("span",{class:"line-number"},"78"),n("br"),n("span",{class:"line-number"},"79"),n("br"),n("span",{class:"line-number"},"80"),n("br"),n("span",{class:"line-number"},"81"),n("br"),n("span",{class:"line-number"},"82"),n("br"),n("span",{class:"line-number"},"83"),n("br"),n("span",{class:"line-number"},"84"),n("br"),n("span",{class:"line-number"},"85"),n("br"),n("span",{class:"line-number"},"86"),n("br"),n("span",{class:"line-number"},"87"),n("br"),n("span",{class:"line-number"},"88"),n("br"),n("span",{class:"line-number"},"89"),n("br"),n("span",{class:"line-number"},"90"),n("br"),n("span",{class:"line-number"},"91"),n("br"),n("span",{class:"line-number"},"92"),n("br"),n("span",{class:"line-number"},"93"),n("br"),n("span",{class:"line-number"},"94"),n("br"),n("span",{class:"line-number"},"95"),n("br"),n("span",{class:"line-number"},"96"),n("br"),n("span",{class:"line-number"},"97"),n("br"),n("span",{class:"line-number"},"98"),n("br"),n("span",{class:"line-number"},"99"),n("br"),n("span",{class:"line-number"},"100"),n("br"),n("span",{class:"line-number"},"101"),n("br"),n("span",{class:"line-number"},"102"),n("br"),n("span",{class:"line-number"},"103"),n("br"),n("span",{class:"line-number"},"104"),n("br"),n("span",{class:"line-number"},"105"),n("br"),n("span",{class:"line-number"},"106"),n("br"),n("span",{class:"line-number"},"107"),n("br"),n("span",{class:"line-number"},"108"),n("br"),n("span",{class:"line-number"},"109"),n("br"),n("span",{class:"line-number"},"110"),n("br"),n("span",{class:"line-number"},"111"),n("br"),n("span",{class:"line-number"},"112"),n("br"),n("span",{class:"line-number"},"113"),n("br"),n("span",{class:"line-number"},"114"),n("br"),n("span",{class:"line-number"},"115"),n("br"),n("span",{class:"line-number"},"116"),n("br"),n("span",{class:"line-number"},"117"),n("br"),n("span",{class:"line-number"},"118"),n("br"),n("span",{class:"line-number"},"119"),n("br"),n("span",{class:"line-number"},"120"),n("br"),n("span",{class:"line-number"},"121"),n("br"),n("span",{class:"line-number"},"122"),n("br"),n("span",{class:"line-number"},"123"),n("br"),n("span",{class:"line-number"},"124"),n("br"),n("span",{class:"line-number"},"125"),n("br"),n("span",{class:"line-number"},"126"),n("br"),n("span",{class:"line-number"},"127"),n("br"),n("span",{class:"line-number"},"128"),n("br"),n("span",{class:"line-number"},"129"),n("br"),n("span",{class:"line-number"},"130"),n("br"),n("span",{class:"line-number"},"131"),n("br"),n("span",{class:"line-number"},"132"),n("br"),n("span",{class:"line-number"},"133"),n("br"),n("span",{class:"line-number"},"134"),n("br"),n("span",{class:"line-number"},"135"),n("br"),n("span",{class:"line-number"},"136"),n("br"),n("span",{class:"line-number"},"137"),n("br"),n("span",{class:"line-number"},"138"),n("br")])],-1),cn=n("div",{class:"language-rust ext-rs line-numbers-mode"},[n("pre",{class:"language-rust"},[n("code",null,[n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token attribute attr-name"},"#[cfg(test)]"),s(`
`),n("span",{class:"token keyword"},"mod"),s(),n("span",{class:"token module-declaration namespace"},"tests"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("arrayref"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),s("array_ref"),n("span",{class:"token punctuation"},","),s(" array_refs"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"use"),s(),n("span",{class:"token namespace"},[s("solana_program"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token punctuation"},"{"),n("span",{class:"token namespace"},[s("program_option"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"COption"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token namespace"},[s("pubkey"),n("span",{class:"token punctuation"},"::")]),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"/// Emulate how COption is 'unpacked'"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"deser_option"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token operator"},"&"),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"->"),s(),n("span",{class:"token class-name"},"COption"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// Map the data block"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" ain "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"array_ref!"),n("span",{class:"token punctuation"},"["),s("data"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"36"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(),n("span",{class:"token punctuation"},"("),s("base"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token macro property"},"array_refs!"),n("span",{class:"token punctuation"},"["),s("ain"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"32"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// Get the SOME or NONE u32"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" nos "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"u32"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"from_le_bytes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("base"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// Construct the COption accordingly"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" opt"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token class-name"},"COption"),n("span",{class:"token operator"},"<"),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"if"),s(" nos "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token class-name"},"COption"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"None"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token class-name"},"COption"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token class-name"},"Some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_from_array"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("key"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
        opt
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token attribute attr-name"},"#[test]"),s(`
    `),n("span",{class:"token keyword"},"fn"),s(),n("span",{class:"token function-definition function"},"btest"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// From Typescript with borsh'ing"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" copt "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s(`
            `),n("span",{class:"token number"},"1u8"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"135"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"202"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"71"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"214"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"68"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"105"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"98"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"176"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"211"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"130"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"105"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"55"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"187"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"86"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"186"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token number"},"109"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"176"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"80"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"208"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"77"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"100"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"221"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"101"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"20"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"203"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"149"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"166"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"96"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"171"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"119"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"35"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// Emulate COption deserialization"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" coption "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"deser_option"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("copt"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"if"),s(" coption"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"is_some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token macro property"},"println!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"{:?}"'),n("span",{class:"token punctuation"},","),s(" coption"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Uh-oh"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token comment"},"// As a Borsh Struct"),s(`
        `),n("span",{class:"token attribute attr-name"},"#[derive(BorshDeserialize, BorshSerialize, Debug)]"),s(`
        `),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token type-definition class-name"},"TOption"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"u32"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token keyword"},"u8"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token number"},"32"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" toption "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"TOption"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"try_from_slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("copt"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"unwrap"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"let"),s(" pkey "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Pubkey"),n("span",{class:"token punctuation"},"::"),n("span",{class:"token function"},"new_from_array"),n("span",{class:"token punctuation"},"("),s("toption"),n("span",{class:"token number"},".1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token macro property"},"println!"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Some = {:?} Pubkey = {:?}"'),n("span",{class:"token punctuation"},","),s(" toption"),n("span",{class:"token number"},".0"),n("span",{class:"token punctuation"},","),s(" pkey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br")])],-1),pn=n("h2",{id:"ressources",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ressources","aria-hidden":"true"},"#"),s(" Ressources")],-1),ln={href:"https://borsh.io/",target:"_blank",rel:"noopener noreferrer"},un=s("Sp\xE9cification de Borsh"),rn={href:"https://github.com/near/borsh-rs",target:"_blank",rel:"noopener noreferrer"},kn=s("Rust Borsh"),bn={href:"https://github.com/near/borsh-js",target:"_blank",rel:"noopener noreferrer"},mn=s("TS/JS Borsh"),dn={href:"https://github.com/near/borsh-construct-py",target:"_blank",rel:"noopener noreferrer"},yn=s("Python Borsh"),fn={href:"https://near.github.io/borsh-construct-py/",target:"_blank",rel:"noopener noreferrer"},gn=s("Documentation de Python Borsh"),_n={href:"https://github.com/hashblock/solana-cli-program-template",target:"_blank",rel:"noopener noreferrer"},wn=s("Mod\xE8le de programme CLI de Solana");function hn(Sn,vn){const e=l("CodeGroupItem"),o=l("CodeGroup"),c=l("ExternalLinkIcon");return r(),i(k,null,[f,a(o,null,{default:t(()=>[a(e,{title:"Program"},{default:t(()=>[g]),_:1}),a(e,{title:"Rust Client",active:""},{default:t(()=>[_]),_:1}),a(e,{title:"Node Client",active:""},{default:t(()=>[w]),_:1}),a(e,{title:"Python Client",active:""},{default:t(()=>[h]),_:1})]),_:1}),S,a(o,null,{default:t(()=>[a(e,{title:"TS Client",active:""},{default:t(()=>[v]),_:1}),a(e,{title:"Python Client",active:""},{default:t(()=>[T]),_:1}),a(e,{title:"Rust Client"},{default:t(()=>[z]),_:1})]),_:1}),C,x,a(o,null,{default:t(()=>[a(e,{title:"Rust Program"},{default:t(()=>[A]),_:1})]),_:1}),P,n("p",null,[E,n("a",B,[I,a(c)])]),R,a(o,null,{default:t(()=>[a(e,{title:"Rust Program"},{default:t(()=>[O]),_:1})]),_:1}),N,a(o,null,{default:t(()=>[a(e,{title:"Rust Program"},{default:t(()=>[M]),_:1})]),_:1}),U,D,K,a(o,null,{default:t(()=>[a(e,{title:"Rust"},{default:t(()=>[G]),_:1})]),_:1}),q,a(o,null,{default:t(()=>[a(e,{title:"Rust"},{default:t(()=>[L]),_:1})]),_:1}),F,V,j,a(o,null,{default:t(()=>[a(e,{title:"TS",active:""},{default:t(()=>[H]),_:1}),a(e,{title:"Python",active:""},{default:t(()=>[Y]),_:1}),a(e,{title:"Rust"},{default:t(()=>[W]),_:1})]),_:1}),X,Z,J,Q,a(o,null,{default:t(()=>[a(e,{title:"TS",active:""},{default:t(()=>[$]),_:1}),a(e,{title:"Python",active:""},{default:t(()=>[nn]),_:1}),a(e,{title:"Rust"},{default:t(()=>[sn]),_:1})]),_:1}),an,tn,en,a(o,null,{default:t(()=>[a(e,{title:"TS",active:""},{default:t(()=>[on]),_:1}),a(e,{title:"Rust"},{default:t(()=>[cn]),_:1})]),_:1}),pn,n("ul",null,[n("li",null,[n("a",ln,[un,a(c)])]),n("li",null,[n("a",rn,[kn,a(c)])]),n("li",null,[n("a",bn,[mn,a(c)])]),n("li",null,[n("a",dn,[yn,a(c)])]),n("li",null,[n("a",fn,[gn,a(c)])]),n("li",null,[n("a",_n,[wn,a(c)])])])],64)}var zn=u(y,[["render",hn]]);export{zn as default};
