<!DOCTYPE html>
<html lang="id-ID">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="title" content="Buku Panduan Solana | Pengujian Paritas Fitur"><meta name="og:title" content="Buku Panduan Solana | Pengujian Paritas Fitur"><meta name="description" content="Fitur bervariasi berdasarkan cluster Solana. Pengujian fitur untuk memastikan hasil yang dapat diprediksi."><meta name="og:description" content="Fitur bervariasi berdasarkan cluster Solana. Pengujian fitur untuk memastikan hasil yang dapat diprediksi."><meta name="og:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="og:image:alt" content="Solana splash card"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@solanacookbook"><meta name="twitter:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="robots" content="index,follow,noodp"><meta name="googlebot" content="index,follow"><link rel="icon" href="/solana_cookbook_lightmode.svg"><script data-domain="solanacookbook.com" src="https://plausible.io/js/plausible.js"></script><title>Pengujian Paritas Fitur | Buku Panduan Solana</title>
    <link rel="modulepreload" href="/assets/app.07ce7a66.js"><link rel="modulepreload" href="/assets/feature-parity-testing.html.abd7566e.js"><link rel="modulepreload" href="/assets/feature-parity-testing.html.7eebcb7c.js">
    <link rel="stylesheet" href="/assets/style.fecd2c41.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/id/" class=""><!----><span class="site-name can-hide">Buku Panduan Solana</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Kontribusi"><!--[--><!--]--> Kontribusi <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/feature-parity-testing.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guides/feature-parity-testing.html" class="" aria-label="中文（简体）"><!--[--><!--]--> 中文（简体） <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guides/feature-parity-testing.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pt/guides/feature-parity-testing.html" class="" aria-label="Português"><!--[--><!--]--> Português <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/guides/feature-parity-testing.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/guides/feature-parity-testing.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/guides/feature-parity-testing.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fr/guides/feature-parity-testing.html" class="" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/id/guides/feature-parity-testing.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/guides/feature-parity-testing.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tr/guides/feature-parity-testing.html" class="" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ja/guides/feature-parity-testing.html" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fil/guides/feature-parity-testing.html" class="" aria-label="Filipino"><!--[--><!--]--> Filipino <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Kontribusi"><!--[--><!--]--> Kontribusi <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/feature-parity-testing.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guides/feature-parity-testing.html" class="" aria-label="中文（简体）"><!--[--><!--]--> 中文（简体） <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guides/feature-parity-testing.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pt/guides/feature-parity-testing.html" class="" aria-label="Português"><!--[--><!--]--> Português <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/guides/feature-parity-testing.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/guides/feature-parity-testing.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/guides/feature-parity-testing.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fr/guides/feature-parity-testing.html" class="" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/id/guides/feature-parity-testing.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/guides/feature-parity-testing.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tr/guides/feature-parity-testing.html" class="" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ja/guides/feature-parity-testing.html" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fil/guides/feature-parity-testing.html" class="" aria-label="Filipino"><!--[--><!--]--> Filipino <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Memulai <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/id/" class="sidebar-item" aria-label="Buku Panduan Solana"><!--[--><!--]--> Buku Panduan Solana <!--[--><!--]--></a><!----></li><li><a href="/id/getting-started/installation.html" class="sidebar-item" aria-label="Instalasi"><!--[--><!--]--> Instalasi <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Konsep Utama <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/id/core-concepts/accounts.html" class="sidebar-item" aria-label="Akun"><!--[--><!--]--> Akun <!--[--><!--]--></a><!----></li><li><a href="/id/core-concepts/programs.html" class="sidebar-item" aria-label="Program"><!--[--><!--]--> Program <!--[--><!--]--></a><!----></li><li><a href="/id/core-concepts/transactions.html" class="sidebar-item" aria-label="Transaksi"><!--[--><!--]--> Transaksi <!--[--><!--]--></a><!----></li><li><a href="/id/core-concepts/pdas.html" class="sidebar-item" aria-label="Program Derived Addresses (PDAs)"><!--[--><!--]--> Program Derived Addresses (PDAs) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Panduan <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/id/guides/get-program-accounts.html" class="sidebar-item" aria-label="Mendapatkan Akun Program"><!--[--><!--]--> Mendapatkan Akun Program <!--[--><!--]--></a><!----></li><li><a href="/id/guides/serialization.html" class="sidebar-item" aria-label="Serialisasi Data"><!--[--><!--]--> Serialisasi Data <!--[--><!--]--></a><!----></li><li><a href="/id/guides/data-migration.html" class="sidebar-item" aria-label="Migrasi Akun Data Program"><!--[--><!--]--> Migrasi Akun Data Program <!--[--><!--]--></a><!----></li><li><a href="/id/guides/account-maps.html" class="sidebar-item" aria-label="Peta Akun"><!--[--><!--]--> Peta Akun <!--[--><!--]--></a><!----></li><li><a href="/id/guides/debugging-solana-programs.html" class="sidebar-item" aria-label="Debug Program Solana"><!--[--><!--]--> Debug Program Solana <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/id/guides/feature-parity-testing.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Pengujian Paritas Fitur"><!--[--><!--]--> Pengujian Paritas Fitur <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#fakta" class="router-link-active router-link-exact-active sidebar-item" aria-label="Fakta"><!--[--><!--]--> Fakta <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#skenario" class="router-link-active router-link-exact-active sidebar-item" aria-label="Skenario"><!--[--><!--]--> Skenario <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#status-fitur" class="router-link-active router-link-exact-active sidebar-item" aria-label="Status Fitur"><!--[--><!--]--> Status Fitur <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#uji-paritas" class="router-link-active router-link-exact-active sidebar-item" aria-label="Uji Paritas"><!--[--><!--]--> Uji Paritas <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#demonstrasi-sederhana" class="router-link-active router-link-exact-active sidebar-item" aria-label="Demonstrasi Sederhana"><!--[--><!--]--> Demonstrasi Sederhana <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#semua-fitur-diaktifkan" class="router-link-active router-link-exact-active sidebar-item" aria-label="Semua fitur diaktifkan"><!--[--><!--]--> Semua fitur diaktifkan <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#fitur-selektif-dinonaktifkan" class="router-link-active router-link-exact-active sidebar-item" aria-label="Fitur selektif dinonaktifkan"><!--[--><!--]--> Fitur selektif dinonaktifkan <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#uji-paritas-penuh" class="router-link-active router-link-exact-active sidebar-item" aria-label="Uji Paritas Penuh"><!--[--><!--]--> Uji Paritas Penuh <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#uji-paritas-penuh-secara-terprogram" class="router-link-active router-link-exact-active sidebar-item" aria-label="Uji Paritas Penuh Secara Terprogram"><!--[--><!--]--> Uji Paritas Penuh Secara Terprogram <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/id/guides/feature-parity-testing.html#resources" class="router-link-active router-link-exact-active sidebar-item" aria-label="Resources"><!--[--><!--]--> Resources <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Referensi <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/id/references/local-development.html" class="sidebar-item" aria-label="Development Lokal"><!--[--><!--]--> Development Lokal <!--[--><!--]--></a><!----></li><li><a href="/id/references/keypairs-and-wallets.html" class="sidebar-item" aria-label="Keypairs &amp; Wallets"><!--[--><!--]--> Keypairs &amp; Wallets <!--[--><!--]--></a><!----></li><li><a href="/id/references/basic-transactions.html" class="sidebar-item" aria-label="Mengirim Transaksi"><!--[--><!--]--> Mengirim Transaksi <!--[--><!--]--></a><!----></li><li><a href="/id/references/accounts.html" class="sidebar-item" aria-label="Akun"><!--[--><!--]--> Akun <!--[--><!--]--></a><!----></li><li><a href="/id/references/programs.html" class="sidebar-item" aria-label="Menulis Program"><!--[--><!--]--> Menulis Program <!--[--><!--]--></a><!----></li><li><a href="/id/references/token.html" class="sidebar-item" aria-label="Interaksi dengan Token"><!--[--><!--]--> Interaksi dengan Token <!--[--><!--]--></a><!----></li><li><a href="/id/references/staking.html" class="sidebar-item" aria-label="Staking"><!--[--><!--]--> Staking <!--[--><!--]--></a><!----></li><li><a href="/id/references/nfts.html" class="sidebar-item" aria-label="NFT"><!--[--><!--]--> NFT <!--[--><!--]--></a><!----></li><li><a href="/id/references/offline-transactions.html" class="sidebar-item" aria-label="Mengirim Transaksi Offline"><!--[--><!--]--> Mengirim Transaksi Offline <!--[--><!--]--></a><!----></li><li><a href="/id/references/name-service.html" class="sidebar-item" aria-label="Name Service"><!--[--><!--]--> Name Service <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="pengujian-paritas-fitur" tabindex="-1"><a class="header-anchor" href="#pengujian-paritas-fitur" aria-hidden="true">#</a> Pengujian Paritas Fitur</h1><p>Saat menguji program Anda, jaminan bahwa program akan berjalan sama di berbagai cluster sangatlah penting untuk kualitas dan menghasilkan hasil yang diharapkan.</p><h2 id="fakta" tabindex="-1"><a class="header-anchor" href="#fakta" aria-hidden="true">#</a> Fakta</h2><div class="custom-container tip"><p class="custom-container-title">Lembar Fakta</p><ul><li>Fitur adalah kemampuan yang diperkenalkan ke validator Solana dan memerlukan aktivasi untuk digunakan.</li><li>Fitur dapat diaktifkan di satu cluster (misalnya testnet) tetapi tidak di cluster lain (misalnya mainnet-beta).</li><li>Namun; saat menjalankan <code>solana-test-validator</code> default secara lokal, semua fitur yang tersedia di Solana versi Anda diaktifkan secara otomatis. Hasilnya adalah ketika menguji secara lokal, kemampuan dan hasil dari pengujian Anda mungkin tidak sama saat menerapkan dan menjalankan di cluster yang berbeda!</li></ul></div><h2 id="skenario" tabindex="-1"><a class="header-anchor" href="#skenario" aria-hidden="true">#</a> Skenario</h2><p>Asumsikan Anda memiliki Transaksi yang berisi tiga (3) instruksi dan setiap instruksi mengkonsumsi kira-kira 100_000 Compute Unit (CU). Saat menjalankan dalam versi Solana 1.8.x, Anda akan mengamati konsumsi CU instruksi Anda mirip dengan:</p><table><thead><tr><th>Instruksi</th><th>Mulai CU</th><th>Eksekusi</th><th>Sisa CU</th></tr></thead><tbody><tr><td>1</td><td>200_000</td><td>-100_000</td><td>100_000</td></tr><tr><td>2</td><td>200_000</td><td>-100_000</td><td>100_000</td></tr><tr><td>3</td><td>200_000</td><td>-100_000</td><td>100_000</td></tr></tbody></table><p>Di Solana 1.9.2 fitur yang disebut &#39;transaction wide compute cap&#39; diperkenalkan di mana Transaksi, secara default, memiliki anggaran 200_000 CU dan instruksi yang dienkapsulasi <strong><em>draw down</em></strong> dari anggaran Transaksi tersebut. Menjalankan transaksi yang sama seperti yang sebelumnya akan menunjukkan hasil yang sangat berbeda:</p><table><thead><tr><th>Instruksi</th><th>Mulai CU</th><th>Eksekusi</th><th>Sisa CU</th></tr></thead><tbody><tr><td>1</td><td>200_000</td><td>-100_000</td><td>100_000</td></tr><tr><td>2</td><td>100_000</td><td>-100_000</td><td>0</td></tr><tr><td>3</td><td>0</td><td>GAGAL!!!</td><td>GAGAL!!!</td></tr></tbody></table><p>Astaga! Jika Anda tidak menyadari hal ini, Anda mungkin akan frustrasi karena tidak ada perubahan pada behavior instruksi Anda yang akan menyebabkan ini. Di devnet itu berfungsi dengan baik, tetapi secara lokal gagal?!?</p><p>Ada kemampuan untuk meningkatkan keseluruhan anggaran Transaksi, katakanlah 300_000 CU, dan selamatkan kewarasan Anda, namun ini menunjukkan mengapa pengujian dengan <strong><em>Feature Parity</em></strong> memberikan cara proaktif untuk menghindari kebingungan.</p><h2 id="status-fitur" tabindex="-1"><a class="header-anchor" href="#status-fitur" aria-hidden="true">#</a> Status Fitur</h2><p>Cukup mudah untuk memeriksa fitur apa yang diaktifkan untuk cluster tertentu dengan perintah <code>solana feature status</code>.</p><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana feature status -ud   // Displays by feature status for devnet
solana feature status -ut   // Displays for testnet
solana feature status -um   // Displays for mainnet-beta
solana feature status -ul   // Displays for local, requires running solana-test-validator
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Atau, Anda dapat menggunakan alat seperti <a href="#resources">scfsd</a> untuk mengamati status semua fitur di seluruh cluster yang akan ditampilkan, sebagian layar ditampilkan di sini, dan tidak memerlukan <code>solana-test-validator</code> untuk dijalankan:</p><img src="/assets/scfsd.cc67ec33.png" alt="Heatmap dari Status Fitur"><img src="/assets/scfsd.cc67ec33.png" alt="Feature Status Heatmap"><h2 id="uji-paritas" tabindex="-1"><a class="header-anchor" href="#uji-paritas" aria-hidden="true">#</a> Uji Paritas</h2><p>Seperti disebutkan di atas, <code>solana-test-validator</code> mengaktifkan <strong>semua</strong> fitur secara otomatis. Jadi untuk menjawab pertanyaan &quot;Bagaimana saya bisa menguji secara lokal di lingkungan yang memiliki paritas dengan devnet, testnet atau bahkan mainnet-beta?&quot;.</p><p>Solusi: PR ditambahkan ke Solana 1.9.6 untuk memungkinkan penonaktifan fitur:</p><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana-test-validator --deactivate-feature &lt;FEATURE_PUBKEY&gt; ...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="demonstrasi-sederhana" tabindex="-1"><a class="header-anchor" href="#demonstrasi-sederhana" aria-hidden="true">#</a> Demonstrasi Sederhana</h2><p>Misalkan Anda memiliki program sederhana yang mencatat data yang diterimanya di entry-point. Dan Anda menguji transaksi yang menambahkan dua (2) instruksi untuk program Anda.</p><h3 id="semua-fitur-diaktifkan" tabindex="-1"><a class="header-anchor" href="#semua-fitur-diaktifkan" aria-hidden="true">#</a> Semua fitur diaktifkan</h3><ol><li>Anda memulai validator uji di satu terminal:</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana config set -ul
solana-test-validator -l ./ledger --bpf-program target/deploy/PROGNAME.so --reset`
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>Di terminal lain Anda memulai log streamer:</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana logs
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>Anda kemudian menjalankan transaksi Anda. Anda akan melihat sesuatu yang serupa di terminal log (diedit untuk kejelasan):</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc invoke [1]
Program log: process_instruction: PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc: 0 accounts, data=[0]
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc consumed 12843 of 200000 compute units
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc success
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc invoke [1]
Program log: process_instruction: PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc: 0 accounts, data=[1]
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc consumed 12843 of 187157 compute units
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc success[
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Karena fitur &#39;batas komputasi luas transaksi&#39; kami secara otomatis diaktifkan secara default, kami mengamati masing-masing instruksi penarikan CU dari anggaran awal Transaksi sebesar 200_000 CU.</p><h3 id="fitur-selektif-dinonaktifkan" tabindex="-1"><a class="header-anchor" href="#fitur-selektif-dinonaktifkan" aria-hidden="true">#</a> Fitur selektif dinonaktifkan</h3><ol><li>Untuk menjalankan ini, kami ingin menjalankan agar behavior anggaran CU setara dengan apa yang berjalan di devnet. Menggunakan alat yang dijelaskan dalam <a href="#status-fitur">Status Fitur</a> pun kami mengisolasi kunci publik <code>batasan komputasi luas transaksi</code> dan gunakan <code>--deactivate-feature</code> pada uji startup validator</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana-test-validator -l ./ledger --deactivate-feature 5ekBxc8itEnPv4NzGJtr8BVVQLNMQuLMNQQj7pHoLNZ9 --bpf-program target/deploy/PROGNAME.so --reset`
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>Kami sekarang melihat di log kami bahwa instruksi kami sekarang memiliki anggaran 200_000 CU sendiri (diedit untuk kejelasan) yang saat ini merupakan status di semua cluster hulu:</li></ol><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc invoke [1]
Program log: process_instruction: PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc: 0 accounts, data=[0]
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc consumed 12843 of 200000 compute units
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc success
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc invoke [1]
Program log: process_instruction: PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc: 0 accounts, data=[0]
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc consumed 12843 of 200000 compute units
Program PWDnx8LkjJUn9bAVzG6Fp6BuvB41x7DkBZdo9YLMGcc success
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="uji-paritas-penuh" tabindex="-1"><a class="header-anchor" href="#uji-paritas-penuh" aria-hidden="true">#</a> Uji Paritas Penuh</h2><p>Anda dapat berada dalam paritas penuh dengan cluster tertentu dengan mengidentifikasi setiap fitur yang belum diaktifkan dan tambahkan <code>--deactivate-feature &lt;FEATURE_PUBKEY&gt;</code> untuk masing-masing saat menjalankan <code>solana-test-validator</code>:</p><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana-test-validator --deactivate-feature PUBKEY_1 --deactivate-feature PUBKEY_2 ...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Atau, <a href="#resources">scfsd</a> menyediakan sakelar perintah untuk menampilkan fitur yang dinonaktifkan sepenuhnya setel agar kluster diumpankan langsung ke startup <code>solana-test-validator</code>:</p><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana-test-validator -l ./.ledger $(scfsd -c devnet -k -t)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Jika Anda membuka terminal lain, saat validator sedang berjalan, dan <code>status fitur solana</code> Anda akan melihat fitur dinonaktifkan yang ditemukan dinonaktifkan di devnet</p><h2 id="uji-paritas-penuh-secara-terprogram" tabindex="-1"><a class="header-anchor" href="#uji-paritas-penuh-secara-terprogram" aria-hidden="true">#</a> Uji Paritas Penuh Secara Terprogram</h2><p>Bagi mereka yang mengontrol jalannya validator pengujian dalam kode pengujian mereka, memodifikasi fitur validator uji yang diaktifkan/dinonaktifkan dimungkinkan menggunakan TestValidatorGenesis. Dengan Solana 1.9.6 sebuah fungsi yang telah ditambahkan ke pembuat validator untuk mendukung ini.</p><p>Di root folder program Anda, buat folder baru bernama <code>tests</code> dan tambahkan <code>parity_test.rs</code> mengajukan. Berikut adalah fungsi tempat boiler (boiler-plate jika Anda mau) yang digunakan oleh setiap pengujian</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">Test Boiler Plate</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token attribute attr-name">#[cfg(test)]</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">tests</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span></span><span class="token punctuation">{</span>error<span class="token punctuation">,</span> <span class="token namespace">path<span class="token punctuation">::</span></span><span class="token class-name">PathBuf</span><span class="token punctuation">,</span> <span class="token keyword">str</span><span class="token punctuation">::</span><span class="token class-name">FromStr</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Use gadget-scfs to get interegate feature lists from clusters</span>
    <span class="token comment">// must have `gadgets-scfs = &quot;0.2.0&quot; in Cargo.toml [dev-dependencies] to use</span>
    <span class="token keyword">use</span> <span class="token namespace">gadgets_scfs<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">ScfsCriteria</span><span class="token punctuation">,</span> <span class="token class-name">ScfsMatrix</span><span class="token punctuation">,</span> <span class="token constant">SCFS_DEVNET</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">use</span> <span class="token namespace">solana_client<span class="token punctuation">::</span>rpc_client<span class="token punctuation">::</span></span><span class="token class-name">RpcClient</span><span class="token punctuation">;</span>
    <span class="token keyword">use</span> <span class="token namespace">solana_program<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token namespace">instruction<span class="token punctuation">::</span></span><span class="token class-name">Instruction</span><span class="token punctuation">,</span> <span class="token namespace">message<span class="token punctuation">::</span></span><span class="token class-name">Message</span><span class="token punctuation">,</span> <span class="token namespace">pubkey<span class="token punctuation">::</span></span><span class="token class-name">Pubkey</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span></span><span class="token punctuation">{</span>
        <span class="token comment">// Added in Solana 1.9.2</span>
        <span class="token namespace">compute_budget<span class="token punctuation">::</span></span><span class="token class-name">ComputeBudgetInstruction</span><span class="token punctuation">,</span>
        pubkey<span class="token punctuation">,</span>
        <span class="token namespace">signature<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Keypair</span><span class="token punctuation">,</span> <span class="token class-name">Signature</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token namespace">signer<span class="token punctuation">::</span></span><span class="token class-name">Signer</span><span class="token punctuation">,</span>
        <span class="token namespace">transaction<span class="token punctuation">::</span></span><span class="token class-name">Transaction</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// Extended in Solana 1.9.6</span>
    <span class="token keyword">use</span> <span class="token namespace">solana_test_validator<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">TestValidator</span><span class="token punctuation">,</span> <span class="token class-name">TestValidatorGenesis</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">/// Location/Name of ProgramTestGenesis ledger</span>
    <span class="token keyword">const</span> <span class="token constant">LEDGER_PATH</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span> <span class="token operator">=</span> <span class="token string">&quot;./.ledger&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">/// Path to BPF program (*.so) change if needed</span>
    <span class="token keyword">const</span> <span class="token constant">PROG_PATH</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span> <span class="token operator">=</span> <span class="token string">&quot;target/deploy/&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">/// Program name from program Cargo.toml</span>
    <span class="token comment">/// FILL IN WITH YOUR PROGRAM_NAME</span>
    <span class="token keyword">const</span> <span class="token constant">PROG_NAME</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span> <span class="token operator">=</span> <span class="token string">&quot;PROGRAM_NAME&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">/// Program public key</span>
    <span class="token comment">/// FILL IN WITH YOUR PROGRAM&#39;S PUBLIC KEY str</span>
    <span class="token keyword">const</span> <span class="token constant">PROG_KEY</span><span class="token punctuation">:</span> <span class="token class-name">Pubkey</span> <span class="token operator">=</span> <span class="token macro property">pubkey!</span><span class="token punctuation">(</span><span class="token string">&quot;PROGRAMS_PUBLIC_KEY_BASE58_STRING&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/// &#39;transaction wide compute cap&#39; public key</span>
    <span class="token keyword">const</span> <span class="token constant">TXWIDE_LIMITS</span><span class="token punctuation">:</span> <span class="token class-name">Pubkey</span> <span class="token operator">=</span> <span class="token macro property">pubkey!</span><span class="token punctuation">(</span><span class="token string">&quot;5ekBxc8itEnPv4NzGJtr8BVVQLNMQuLMNQQj7pHoLNZ9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/// Setup the test validator passing features</span>
    <span class="token comment">/// you want to deactivate before running transactions</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">setup_validator</span><span class="token punctuation">(</span>
        invalidate_features<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Pubkey</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token class-name">TestValidator</span><span class="token punctuation">,</span> <span class="token class-name">Keypair</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token namespace">error<span class="token punctuation">::</span></span><span class="token class-name">Error</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Extend environment variable to include our program location</span>
        <span class="token namespace">std<span class="token punctuation">::</span>env<span class="token punctuation">::</span></span><span class="token function">set_var</span><span class="token punctuation">(</span><span class="token string">&quot;BPF_OUT_DIR&quot;</span><span class="token punctuation">,</span> <span class="token constant">PROG_PATH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Instantiate the test validator</span>
        <span class="token keyword">let</span> <span class="token keyword">mut</span> test_validator <span class="token operator">=</span> <span class="token class-name">TestValidatorGenesis</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Once instantiated, TestValidatorGenesis configuration functions follow</span>
        <span class="token comment">// a builder pattern enabling chaining of settings function calls</span>
        <span class="token keyword">let</span> <span class="token punctuation">(</span>test_validator<span class="token punctuation">,</span> kp<span class="token punctuation">)</span> <span class="token operator">=</span> test_validator
            <span class="token comment">// Set the ledger path and name</span>
            <span class="token comment">// maps to `solana-test-validator --ledger &lt;DIR&gt;`</span>
            <span class="token punctuation">.</span><span class="token function">ledger_path</span><span class="token punctuation">(</span><span class="token constant">LEDGER_PATH</span><span class="token punctuation">)</span>
            <span class="token comment">// Load our program. Ignored if reusing ledger</span>
            <span class="token comment">// maps to `solana-test-validator --bpf-program &lt;ADDRESS_OR_PATH BPF_PROGRAM.SO&gt;`</span>
            <span class="token punctuation">.</span><span class="token function">add_program</span><span class="token punctuation">(</span><span class="token constant">PROG_NAME</span><span class="token punctuation">,</span> <span class="token constant">PROG_KEY</span><span class="token punctuation">)</span>
            <span class="token comment">// Identify features to deactivate. Ignored if reusing ledger</span>
            <span class="token comment">// maps to `solana-test-validator --deactivate-feature &lt;FEATURE_PUBKEY&gt;`</span>
            <span class="token punctuation">.</span><span class="token function">deactivate_features</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>invalidate_features<span class="token punctuation">)</span>
            <span class="token comment">// Start the test validator</span>
            <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span>test_validator<span class="token punctuation">,</span> kp<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// Convenience function to remove existing ledger before TestValidatorGenesis setup</span>
    <span class="token comment">/// maps to `solana-test-validator ... --reset`</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">clean_ledger_setup_validator</span><span class="token punctuation">(</span>
        invalidate_features<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Pubkey</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token class-name">TestValidator</span><span class="token punctuation">,</span> <span class="token class-name">Keypair</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token namespace">error<span class="token punctuation">::</span></span><span class="token class-name">Error</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token class-name">PathBuf</span><span class="token punctuation">::</span><span class="token function">from_str</span><span class="token punctuation">(</span><span class="token constant">LEDGER_PATH</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token namespace">std<span class="token punctuation">::</span>fs<span class="token punctuation">::</span></span><span class="token function">remove_dir_all</span><span class="token punctuation">(</span><span class="token constant">LEDGER_PATH</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">setup_validator</span><span class="token punctuation">(</span>invalidate_features<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// Submits a transaction with programs instruction</span>
    <span class="token comment">/// Boiler plate</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">submit_transaction</span><span class="token punctuation">(</span>
        rpc_client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">RpcClient</span><span class="token punctuation">,</span>
        wallet_signer<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">dyn</span> <span class="token class-name">Signer</span><span class="token punctuation">,</span>
        instructions<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Instruction</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">Signature</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token namespace">std<span class="token punctuation">::</span>error<span class="token punctuation">::</span></span><span class="token class-name">Error</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token keyword">mut</span> transaction <span class="token operator">=</span>
            <span class="token class-name">Transaction</span><span class="token punctuation">::</span><span class="token function">new_unsigned</span><span class="token punctuation">(</span><span class="token class-name">Message</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>instructions<span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wallet_signer<span class="token punctuation">.</span><span class="token function">pubkey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> recent_blockhash <span class="token operator">=</span> rpc_client
            <span class="token punctuation">.</span><span class="token function">get_latest_blockhash</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">map_err</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>err<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;error: unable to get recent blockhash: {}&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
        transaction
            <span class="token punctuation">.</span><span class="token function">try_sign</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token macro property">vec!</span><span class="token punctuation">[</span>wallet_signer<span class="token punctuation">]</span><span class="token punctuation">,</span> recent_blockhash<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">map_err</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>err<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;error: failed to sign transaction: {}&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> signature <span class="token operator">=</span> rpc_client
            <span class="token punctuation">.</span><span class="token function">send_and_confirm_transaction</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>transaction<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">map_err</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>err<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;error: send transaction: {}&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
        <span class="token class-name">Ok</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// UNIT TEST FOLLOWS</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token comment">/// Setup the test validator passing features</span>
<span class="token comment">/// you want to deactivate before running transactions</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">setup_validator</span><span class="token punctuation">(</span>
    invalidate_features<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Pubkey</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token class-name">TestValidator</span><span class="token punctuation">,</span> <span class="token class-name">Keypair</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token namespace">error<span class="token punctuation">::</span></span><span class="token class-name">Error</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Extend environment variable to include our program location</span>
    <span class="token namespace">std<span class="token punctuation">::</span>env<span class="token punctuation">::</span></span><span class="token function">set_var</span><span class="token punctuation">(</span><span class="token string">&quot;BPF_OUT_DIR&quot;</span><span class="token punctuation">,</span> <span class="token constant">PROG_PATH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Instantiate the test validator</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> test_validator <span class="token operator">=</span> <span class="token class-name">TestValidatorGenesis</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Once instantiated, TestValidatorGenesis configuration functions follow</span>
    <span class="token comment">// a builder pattern enabling chaining of settings function calls</span>
    <span class="token keyword">let</span> <span class="token punctuation">(</span>test_validator<span class="token punctuation">,</span> kp<span class="token punctuation">)</span> <span class="token operator">=</span> test_validator
        <span class="token comment">// Set the ledger path and name</span>
        <span class="token comment">// maps to `solana-test-validator --ledger &lt;DIR&gt;`</span>
        <span class="token punctuation">.</span><span class="token function">ledger_path</span><span class="token punctuation">(</span><span class="token constant">LEDGER_PATH</span><span class="token punctuation">)</span>
        <span class="token comment">// Load our program. Ignored if reusing ledger</span>
        <span class="token comment">// maps to `solana-test-validator --bpf-program &lt;ADDRESS_OR_PATH BPF_PROGRAM.SO&gt;`</span>
        <span class="token punctuation">.</span><span class="token function">add_program</span><span class="token punctuation">(</span><span class="token constant">PROG_NAME</span><span class="token punctuation">,</span> <span class="token constant">PROG_KEY</span><span class="token punctuation">)</span>
        <span class="token comment">// Identify features to deactivate. Ignored if reusing ledger</span>
        <span class="token comment">// maps to `solana-test-validator --deactivate-feature &lt;FEATURE_PUBKEY&gt;`</span>
        <span class="token punctuation">.</span><span class="token function">deactivate_features</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>invalidate_features<span class="token punctuation">)</span>
        <span class="token comment">// Start the test validator</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span>test_validator<span class="token punctuation">,</span> kp<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/// Convenience function to remove existing ledger before TestValidatorGenesis setup</span>
<span class="token comment">/// maps to `solana-test-validator ... --reset`</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">clean_ledger_setup_validator</span><span class="token punctuation">(</span>
    invalidate_features<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Pubkey</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token class-name">TestValidator</span><span class="token punctuation">,</span> <span class="token class-name">Keypair</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token namespace">error<span class="token punctuation">::</span></span><span class="token class-name">Error</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token class-name">PathBuf</span><span class="token punctuation">::</span><span class="token function">from_str</span><span class="token punctuation">(</span><span class="token constant">LEDGER_PATH</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token namespace">std<span class="token punctuation">::</span>fs<span class="token punctuation">::</span></span><span class="token function">remove_dir_all</span><span class="token punctuation">(</span><span class="token constant">LEDGER_PATH</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setup_validator</span><span class="token punctuation">(</span>invalidate_features<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/// Submits a transaction with programs instruction</span>
<span class="token comment">/// Boiler plate</span>
<span class="token keyword">fn</span> <span class="token function-definition function">submit_transaction</span><span class="token punctuation">(</span>
    rpc_client<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">RpcClient</span><span class="token punctuation">,</span>
    wallet_signer<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">dyn</span> <span class="token class-name">Signer</span><span class="token punctuation">,</span>
    instructions<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Instruction</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">Signature</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token namespace">std<span class="token punctuation">::</span>error<span class="token punctuation">::</span></span><span class="token class-name">Error</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> transaction <span class="token operator">=</span>
        <span class="token class-name">Transaction</span><span class="token punctuation">::</span><span class="token function">new_unsigned</span><span class="token punctuation">(</span><span class="token class-name">Message</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>instructions<span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wallet_signer<span class="token punctuation">.</span><span class="token function">pubkey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> recent_blockhash <span class="token operator">=</span> rpc_client
        <span class="token punctuation">.</span><span class="token function">get_latest_blockhash</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map_err</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>err<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;error: unable to get recent blockhash: {}&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
    transaction
        <span class="token punctuation">.</span><span class="token function">try_sign</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token macro property">vec!</span><span class="token punctuation">[</span>wallet_signer<span class="token punctuation">]</span><span class="token punctuation">,</span> recent_blockhash<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map_err</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>err<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;error: failed to sign transaction: {}&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> signature <span class="token operator">=</span> rpc_client
        <span class="token punctuation">.</span><span class="token function">send_and_confirm_transaction</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>transaction<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map_err</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>err<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;error: send transaction: {}&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><!--]--></div></div><!--]--></div><p>Kita sekarang dapat menambahkan fungsi pengujian di badan <code>mod test {...}</code> untuk mendemonstrasikan default penyiapan validator (semua fitur diaktifkan) lalu nonaktifkan <code>batas komputasi luas transaksi</code> sebagai per contoh sebelumnya menjalankan <code>solana-test-validator</code> dari CLI.</p><p>We can now add test functions in the body of <code>mod test {...}</code> to demonstrate default validator setup (all features enabled) and then disabling the <code>transaction wide compute cap</code> as per previous examples running <code>solana-test-validator</code> from the command line.</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">All Features Test</button></li><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">Disable Tx CU Test</button></li></ul></div><!--[--><div class="code-group-item" aria-selected="false"><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token attribute attr-name">#[test]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">test_base_pass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Run with all features activated (default for TestValidatorGenesis)</span>
    <span class="token keyword">let</span> inv_feat <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// Start validator with clean (new) ledger</span>
    <span class="token keyword">let</span> <span class="token punctuation">(</span>test_validator<span class="token punctuation">,</span> main_payer<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">clean_ledger_setup_validator</span><span class="token punctuation">(</span>inv_feat<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Get the RpcClient</span>
    <span class="token keyword">let</span> connection <span class="token operator">=</span> test_validator<span class="token punctuation">.</span><span class="token function">get_rpc_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Capture our programs log statements</span>
    <span class="token namespace">solana_logger<span class="token punctuation">::</span></span><span class="token function">setup_with_default</span><span class="token punctuation">(</span><span class="token string">&quot;solana_runtime::message=debug&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// This example doesn&#39;t require sending any accounts to program</span>
    <span class="token keyword">let</span> accounts <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// Build instruction array and submit transaction</span>
    <span class="token keyword">let</span> txn <span class="token operator">=</span> <span class="token function">submit_transaction</span><span class="token punctuation">(</span>
        <span class="token operator">&amp;</span>connection<span class="token punctuation">,</span>
        <span class="token operator">&amp;</span>main_payer<span class="token punctuation">,</span>
        <span class="token comment">// Add two (2) instructions to transaction to demonstrate</span>
        <span class="token comment">// that each instruction CU draws down from default Transaction CU (200_000)</span>
        <span class="token comment">// Replace with instructions that make sense for your program</span>
        <span class="token punctuation">[</span>
            <span class="token class-name">Instruction</span><span class="token punctuation">::</span><span class="token function">new_with_borsh</span><span class="token punctuation">(</span><span class="token constant">PROG_KEY</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token number">0u8</span><span class="token punctuation">,</span> accounts<span class="token punctuation">.</span><span class="token function">to_vec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Instruction</span><span class="token punctuation">::</span><span class="token function">new_with_borsh</span><span class="token punctuation">(</span><span class="token constant">PROG_KEY</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token number">1u8</span><span class="token punctuation">,</span> accounts<span class="token punctuation">.</span><span class="token function">to_vec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
        <span class="token punctuation">.</span><span class="token function">to_vec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert!</span><span class="token punctuation">(</span>txn<span class="token punctuation">.</span><span class="token function">is_ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><!--]--></div><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token attribute attr-name">#[test]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">test_deactivate_tx_cu_pass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Run with all features activated except &#39;transaction wide compute cap&#39;</span>
    <span class="token keyword">let</span> inv_feat <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token constant">TXWIDE_LIMITS</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// Start validator with clean (new) ledger</span>
    <span class="token keyword">let</span> <span class="token punctuation">(</span>test_validator<span class="token punctuation">,</span> main_payer<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">clean_ledger_setup_validator</span><span class="token punctuation">(</span>inv_feat<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Get the RpcClient</span>
    <span class="token keyword">let</span> connection <span class="token operator">=</span> test_validator<span class="token punctuation">.</span><span class="token function">get_rpc_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Capture our programs log statements</span>
    <span class="token namespace">solana_logger<span class="token punctuation">::</span></span><span class="token function">setup_with_default</span><span class="token punctuation">(</span><span class="token string">&quot;solana_runtime::message=debug&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// This example doesn&#39;t require sending any accounts to program</span>
    <span class="token keyword">let</span> accounts <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// Build instruction array and submit transaction</span>
    <span class="token keyword">let</span> txn <span class="token operator">=</span> <span class="token function">submit_transaction</span><span class="token punctuation">(</span>
        <span class="token operator">&amp;</span>connection<span class="token punctuation">,</span>
        <span class="token operator">&amp;</span>main_payer<span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
            <span class="token comment">// This instruction adds CU to transaction budget (1.9.2) but does nothing</span>
            <span class="token comment">// when we deactivate the &#39;transaction wide compute cap&#39; feature</span>
            <span class="token class-name">ComputeBudgetInstruction</span><span class="token punctuation">::</span><span class="token function">request_units</span><span class="token punctuation">(</span><span class="token number">400_000u32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// Add two (2) instructions to transaction</span>
            <span class="token comment">// Replace with instructions that make sense for your program</span>
            <span class="token comment">// You will see that each instruction has the 1.8.x 200_000 CU per budget</span>
            <span class="token class-name">Instruction</span><span class="token punctuation">::</span><span class="token function">new_with_borsh</span><span class="token punctuation">(</span><span class="token constant">PROG_KEY</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token number">0u8</span><span class="token punctuation">,</span> accounts<span class="token punctuation">.</span><span class="token function">to_vec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Instruction</span><span class="token punctuation">::</span><span class="token function">new_with_borsh</span><span class="token punctuation">(</span><span class="token constant">PROG_KEY</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token number">1u8</span><span class="token punctuation">,</span> accounts<span class="token punctuation">.</span><span class="token function">to_vec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
        <span class="token punctuation">.</span><span class="token function">to_vec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert!</span><span class="token punctuation">(</span>txn<span class="token punctuation">.</span><span class="token function">is_ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><!--]--></div><!--]--></div><p>Atau, <a href="#resources">gadget mesin scfs</a> dapat menghasilkan vektor penuh yang dinonaktifkan fitur untuk sebuah cluster. Berikut ini menunjukkan menggunakan mesin itu untuk mendapatkan daftar dari semua fitur yang dinonaktifkan untuk devnet.</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">Devnet Parity</button></li></ul></div><!--[--><div class="code-group-item" aria-selected="false"><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token attribute attr-name">#[test]</span>
<span class="token keyword">fn</span> <span class="token function-definition function">test_devnet_parity_pass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Use gadget-scfs to get all deactivated features from devnet</span>
    <span class="token comment">// must have `gadgets-scfs = &quot;0.2.0&quot; in Cargo.toml to use</span>
    <span class="token comment">// Here we setup for a run that samples features only</span>
    <span class="token comment">// from devnet</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> my_matrix <span class="token operator">=</span> <span class="token class-name">ScfsMatrix</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token class-name">ScfsCriteria</span> <span class="token punctuation">{</span>
        clusters<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token constant">SCFS_DEVNET</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">..</span><span class="token class-name">Default</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Run the sampler matrix</span>
    <span class="token macro property">assert!</span><span class="token punctuation">(</span>my_matrix<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is_ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Get all deactivated features</span>
    <span class="token keyword">let</span> deactivated <span class="token operator">=</span> my_matrix
        <span class="token punctuation">.</span><span class="token function">get_features</span><span class="token punctuation">(</span><span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token class-name">ScfsMatrix</span><span class="token punctuation">::</span>any_inactive<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Confirm we have them</span>
    <span class="token macro property">assert_ne!</span><span class="token punctuation">(</span>deactivated<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Setup test validator and logging while deactivating all</span>
    <span class="token comment">// features that are deactivated in devnet</span>
    <span class="token keyword">let</span> <span class="token punctuation">(</span>test_validator<span class="token punctuation">,</span> main_payer<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">clean_ledger_setup_validator</span><span class="token punctuation">(</span>deactivated<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> connection <span class="token operator">=</span> test_validator<span class="token punctuation">.</span><span class="token function">get_rpc_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token namespace">solana_logger<span class="token punctuation">::</span></span><span class="token function">setup_with_default</span><span class="token punctuation">(</span><span class="token string">&quot;solana_runtime::message=debug&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> accounts <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> txn <span class="token operator">=</span> <span class="token function">submit_transaction</span><span class="token punctuation">(</span>
        <span class="token operator">&amp;</span>connection<span class="token punctuation">,</span>
        <span class="token operator">&amp;</span>main_payer<span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
            <span class="token comment">// Add two (2) instructions to transaction</span>
            <span class="token comment">// Replace with instructions that make sense for your program</span>
            <span class="token class-name">Instruction</span><span class="token punctuation">::</span><span class="token function">new_with_borsh</span><span class="token punctuation">(</span><span class="token constant">PROG_KEY</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token number">0u8</span><span class="token punctuation">,</span> accounts<span class="token punctuation">.</span><span class="token function">to_vec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Instruction</span><span class="token punctuation">::</span><span class="token function">new_with_borsh</span><span class="token punctuation">(</span><span class="token constant">PROG_KEY</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token number">1u8</span><span class="token punctuation">,</span> accounts<span class="token punctuation">.</span><span class="token function">to_vec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
        <span class="token punctuation">.</span><span class="token function">to_vec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert!</span><span class="token punctuation">(</span>txn<span class="token punctuation">.</span><span class="token function">is_ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><!--]--></div><!--]--></div><p>Selamat menguji!</p><h2 id="resources" tabindex="-1"><a class="header-anchor" href="#resources" aria-hidden="true">#</a> Resources</h2><p><a href="https://github.com/FrankC01/solana-gadgets/tree/main/rust/scfsd" target="_blank" rel="noopener noreferrer">scfsd<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://github.com/FrankC01/solana-gadgets/tree/main/rust/gadgets-scfs" target="_blank" rel="noopener noreferrer">gadget-scfs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: aziz@okadoc.com">akangaziz</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/id/guides/debugging-solana-programs.html" class="" aria-label="Debug Program Solana"><!--[--><!--]--> Debug Program Solana <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.07ce7a66.js" defer></script>
  </body>
</html>
