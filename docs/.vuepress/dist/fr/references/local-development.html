<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="title" content="Solana Cookbook | Développement Local"><meta name="og:title" content="Solana Cookbook | Développement Local"><meta name="description" content="Configurer un Validateur Local pour avoir un environnement de développement local et faire un Airdrop de SOL. Découvrez le Développement Local et d'autres références pour Construire sur Solana dans le Solana cookbook."><meta name="og:description" content="Configurer un Validateur Local pour avoir un environnement de développement local et faire un Airdrop de SOL. Découvrez le Développement Local et d'autres références pour Construire sur Solana dans le Solana cookbook."><meta name="og:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="og:image:alt" content="Solana splash card"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@solanacookbook"><meta name="twitter:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="robots" content="index,follow,noodp"><meta name="googlebot" content="index,follow"><link rel="icon" href="/solana_cookbook_lightmode.svg"><script data-domain="solanacookbook.com" src="https://plausible.io/js/plausible.js"></script><title>Développement Local | Solana Cookbook</title>
    <link rel="modulepreload" href="/assets/app.07ce7a66.js"><link rel="modulepreload" href="/assets/local-development.html.c3972821.js"><link rel="modulepreload" href="/assets/local-development.html.edd1e5da.js">
    <link rel="stylesheet" href="/assets/style.fecd2c41.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/fr/" class=""><!----><span class="site-name can-hide">Solana Cookbook</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Contribuer"><!--[--><!--]--> Contribuer <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/references/local-development.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/references/local-development.html" class="" aria-label="中文（简体）"><!--[--><!--]--> 中文（简体） <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/references/local-development.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pt/references/local-development.html" class="" aria-label="Português"><!--[--><!--]--> Português <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/references/local-development.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/references/local-development.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/references/local-development.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/fr/references/local-development.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/references/local-development.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/references/local-development.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tr/references/local-development.html" class="" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ja/references/local-development.html" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fil/references/local-development.html" class="" aria-label="Filipino"><!--[--><!--]--> Filipino <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Contribuer"><!--[--><!--]--> Contribuer <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/references/local-development.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/references/local-development.html" class="" aria-label="中文（简体）"><!--[--><!--]--> 中文（简体） <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/references/local-development.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pt/references/local-development.html" class="" aria-label="Português"><!--[--><!--]--> Português <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/references/local-development.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/references/local-development.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/references/local-development.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/fr/references/local-development.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/references/local-development.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/references/local-development.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tr/references/local-development.html" class="" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ja/references/local-development.html" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fil/references/local-development.html" class="" aria-label="Filipino"><!--[--><!--]--> Filipino <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Pour Commencer <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/fr/" class="sidebar-item" aria-label="Solana Cookbook"><!--[--><!--]--> Solana Cookbook <!--[--><!--]--></a><!----></li><li><a href="/fr/getting-started/installation.html" class="sidebar-item" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Concepts Fondamentaux <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/fr/core-concepts/accounts.html" class="sidebar-item" aria-label="Comptes"><!--[--><!--]--> Comptes <!--[--><!--]--></a><!----></li><li><a href="/fr/core-concepts/programs.html" class="sidebar-item" aria-label="Programmes"><!--[--><!--]--> Programmes <!--[--><!--]--></a><!----></li><li><a href="/fr/core-concepts/transactions.html" class="sidebar-item" aria-label="Transactions"><!--[--><!--]--> Transactions <!--[--><!--]--></a><!----></li><li><a href="/fr/core-concepts/pdas.html" class="sidebar-item" aria-label="Adresses dérivées de programmes (PDAs)"><!--[--><!--]--> Adresses dérivées de programmes (PDAs) <!--[--><!--]--></a><!----></li><li><a href="/fr/core-concepts/cpi.html" class="sidebar-item" aria-label="Invocations de Programme Croisé (CPIs)"><!--[--><!--]--> Invocations de Programme Croisé (CPIs) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Guides <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/fr/guides/get-program-accounts.html" class="sidebar-item" aria-label="Obtenir les comptes d&#39;un programme"><!--[--><!--]--> Obtenir les comptes d&#39;un programme <!--[--><!--]--></a><!----></li><li><a href="/fr/guides/serialization.html" class="sidebar-item" aria-label="Sérialisation des données"><!--[--><!--]--> Sérialisation des données <!--[--><!--]--></a><!----></li><li><a href="/fr/guides/data-migration.html" class="sidebar-item" aria-label="Migration des Comptes de Données de Programmes"><!--[--><!--]--> Migration des Comptes de Données de Programmes <!--[--><!--]--></a><!----></li><li><a href="/fr/guides/account-maps.html" class="sidebar-item" aria-label="Maps de Comptes"><!--[--><!--]--> Maps de Comptes <!--[--><!--]--></a><!----></li><li><a href="/fr/guides/debugging-solana-programs.html" class="sidebar-item" aria-label="Débogage des Programmes Solana"><!--[--><!--]--> Débogage des Programmes Solana <!--[--><!--]--></a><!----></li><li><a href="/fr/guides/feature-parity-testing.html" class="sidebar-item" aria-label="Test de Conformité des Fonctionnalités"><!--[--><!--]--> Test de Conformité des Fonctionnalités <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Références <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/fr/references/local-development.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Développement Local"><!--[--><!--]--> Développement Local <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/fr/references/local-development.html#demarrer-un-validateur-local" class="router-link-active router-link-exact-active sidebar-item" aria-label="Démarrer un Validateur Local"><!--[--><!--]--> Démarrer un Validateur Local <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/references/local-development.html#connexion-aux-environnements" class="router-link-active router-link-exact-active sidebar-item" aria-label="Connexion aux Environnements"><!--[--><!--]--> Connexion aux Environnements <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/references/local-development.html#inscription-a-des-evenements" class="router-link-active router-link-exact-active sidebar-item" aria-label="Inscription à des Evénements"><!--[--><!--]--> Inscription à des Evénements <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/references/local-development.html#obtention-de-sol-pour-les-tests" class="router-link-active router-link-exact-active sidebar-item" aria-label="Obtention de SOL pour les Tests"><!--[--><!--]--> Obtention de SOL pour les Tests <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/references/local-development.html#utilisation-des-comptes-et-des-programmes-du-mainnet" class="router-link-active router-link-exact-active sidebar-item" aria-label="Utilisation des Comptes et des Programmes du Mainnet"><!--[--><!--]--> Utilisation des Comptes et des Programmes du Mainnet <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/fr/references/local-development.html#comment-charger-des-comptes-depuis-le-mainnet" class="router-link-active router-link-exact-active sidebar-item" aria-label="Comment charger des comptes depuis le mainnet"><!--[--><!--]--> Comment charger des comptes depuis le mainnet <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/fr/references/local-development.html#comment-charger-des-programmes-depuis-le-mainnet" class="router-link-active router-link-exact-active sidebar-item" aria-label="Comment charger des programmes depuis le mainnet"><!--[--><!--]--> Comment charger des programmes depuis le mainnet <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a href="/fr/references/keypairs-and-wallets.html" class="sidebar-item" aria-label="Paires de Clés et Portefeuilles"><!--[--><!--]--> Paires de Clés et Portefeuilles <!--[--><!--]--></a><!----></li><li><a href="/fr/references/basic-transactions.html" class="sidebar-item" aria-label="Envoyer des Transactions"><!--[--><!--]--> Envoyer des Transactions <!--[--><!--]--></a><!----></li><li><a href="/fr/references/accounts.html" class="sidebar-item" aria-label="Comptes"><!--[--><!--]--> Comptes <!--[--><!--]--></a><!----></li><li><a href="/fr/references/programs.html" class="sidebar-item" aria-label="Écrire des Programmes"><!--[--><!--]--> Écrire des Programmes <!--[--><!--]--></a><!----></li><li><a href="/fr/references/token.html" class="sidebar-item" aria-label="Interaction avec les Jetons"><!--[--><!--]--> Interaction avec les Jetons <!--[--><!--]--></a><!----></li><li><a href="/fr/references/staking.html" class="sidebar-item" aria-label="Staking"><!--[--><!--]--> Staking <!--[--><!--]--></a><!----></li><li><a href="/fr/references/nfts.html" class="sidebar-item" aria-label="NFTs"><!--[--><!--]--> NFTs <!--[--><!--]--></a><!----></li><li><a href="/fr/references/offline-transactions.html" class="sidebar-item" aria-label="Envoi de transactions hors connexion"><!--[--><!--]--> Envoi de transactions hors connexion <!--[--><!--]--></a><!----></li><li><a href="/fr/references/name-service.html" class="sidebar-item" aria-label="Service de Noms"><!--[--><!--]--> Service de Noms <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item collapsible">Gaming <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/fr/gaming/intro.html" class="sidebar-item" aria-label="Introduction au gaming sur Solana"><!--[--><!--]--> Introduction au gaming sur Solana <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/game-sdks.html" class="sidebar-item" aria-label="SDKs pour le gaming sur Solana"><!--[--><!--]--> SDKs pour le gaming sur Solana <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/nfts-in-games.html" class="sidebar-item" aria-label="Gaming avec des NFTs"><!--[--><!--]--> Gaming avec des NFTs <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/hello-world.html" class="sidebar-item" aria-label="Exemple Hello World"><!--[--><!--]--> Exemple Hello World <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/store-sol-in-pda.html" class="sidebar-item" aria-label="Stockage de SOL dans un PDA"><!--[--><!--]--> Stockage de SOL dans un PDA <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/saving-game-state.html" class="sidebar-item" aria-label="Sauvegarder l&#39;état d&#39;un jeu"><!--[--><!--]--> Sauvegarder l&#39;état d&#39;un jeu <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/energy-system.html" class="sidebar-item" aria-label="Système d&#39;Energie"><!--[--><!--]--> Système d&#39;Energie <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/interact-with-tokens.html" class="sidebar-item" aria-label="Comment interagir avec des jetons dans des programmes"><!--[--><!--]--> Comment interagir avec des jetons dans des programmes <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/porting-anchor-to-unity.html" class="sidebar-item" aria-label="Portage d&#39;Anchor vers Unity"><!--[--><!--]--> Portage d&#39;Anchor vers Unity <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/distribution.html" class="sidebar-item" aria-label="Distribution"><!--[--><!--]--> Distribution <!--[--><!--]--></a><!----></li><li><a href="/fr/gaming/game-examples.html" class="sidebar-item" aria-label="Apprendre par l&#39;exemple"><!--[--><!--]--> Apprendre par l&#39;exemple <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="developpement-local" tabindex="-1"><a class="header-anchor" href="#developpement-local" aria-hidden="true">#</a> Développement Local</h1><h2 id="demarrer-un-validateur-local" tabindex="-1"><a class="header-anchor" href="#demarrer-un-validateur-local" aria-hidden="true">#</a> Démarrer un Validateur Local</h2><p>Tester le code de votre programme localement peut être beaucoup plus fiable que de le tester sur le devnet, et peut vous aider à faire des tests avant de l&#39;essayer sur le devnet.</p><p>Vous pouvez configurer votre validateur de test local (local-test-validator) en installant la <a href="/getting-started/installation.html#installer-cli" class="">suite d&#39;outils de solana (solana tool suite)</a> et en exécutant</p><div class="language-console ext-console line-numbers-mode"><pre class="language-console"><code>solana-test-validator
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Les avantages de l&#39;utilisation de local-test-validator sont les suivants :</p><ul><li>Pas de limites de débit RPC</li><li>Pas de limites d&#39;airdrop</li><li>Déploiement direct de programme sur la blockchain (<code>--bpf-program ...</code>)</li><li>Clonage de comptes à partir d&#39;un cluster public, y compris les programmes (<code>--clone ...</code>)</li><li>Possibilité de configurer l&#39;historique de conservation des transactions (<code>--limit-ledger-size ...</code>)</li><li>Possibilité de configurer la durée des époques (<code>--slots-per-epoch ...</code>)</li><li>Sauter à un slot précis (<code>--warp-slot ...</code>)</li></ul><h2 id="connexion-aux-environnements" tabindex="-1"><a class="header-anchor" href="#connexion-aux-environnements" aria-hidden="true">#</a> Connexion aux Environnements</h2><p>Lorsque vous développez sur Solana, vous devez vous connecter à un point de terminaison API de RPC en particulier. Solana dispose de 3 environnements de développement publics :</p><ul><li>mainnet-beta https://api.mainnet-beta.solana.com</li><li>devnet https://api.devnet.solana.com</li><li>testnet https://api.testnet.solana.com</li></ul><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TS</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Python</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">C++</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Rust</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">CLI</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> clusterApiUrl<span class="token punctuation">,</span> Connection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@solana/web3.js&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&quot;mainnet-beta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&quot;mainnet-beta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> solana<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>api <span class="token keyword">import</span> Client

client <span class="token operator">=</span> Client<span class="token punctuation">(</span><span class="token string">&quot;https://api.mainnet-beta.solana.com&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>client <span class="token operator">=</span> Client<span class="token punctuation">(</span><span class="token string">&quot;https://api.mainnet-beta.solana.com&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;solana.hpp&quot;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> many<span class="token double-colon punctuation">::</span>solana<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Connection <span class="token function">connection</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.mainnet-beta.solana.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>Connection <span class="token function">connection</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.mainnet-beta.solana.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">solana_client<span class="token punctuation">::</span>rpc_client<span class="token punctuation">::</span></span><span class="token class-name">RpcClient</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span>commitment_config<span class="token punctuation">::</span></span><span class="token class-name">CommitmentConfig</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> rpc_url <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.mainnet-beta.solana.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token class-name">RpcClient</span><span class="token punctuation">::</span><span class="token function">new_with_commitment</span><span class="token punctuation">(</span>rpc_url<span class="token punctuation">,</span> <span class="token class-name">CommitmentConfig</span><span class="token punctuation">::</span><span class="token function">confirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> rpc_url <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.mainnet-beta.solana.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token class-name">RpcClient</span><span class="token punctuation">::</span><span class="token function">new_with_commitment</span><span class="token punctuation">(</span>rpc_url<span class="token punctuation">,</span> <span class="token class-name">CommitmentConfig</span><span class="token punctuation">::</span><span class="token function">confirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana config <span class="token builtin class-name">set</span> --url https://api.mainnet-beta.solana.com
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana config <span class="token builtin class-name">set</span> --url https://api.mainnet-beta.solana.com
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><!--]--></div><p>Enfin, vous pouvez également vous connecter à un cluster privé, qu&#39;il soit local ou fonctionnant à distance avec l&#39;élément suivant :</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TS</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Python</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">C++</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Rust</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">CLI</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Connection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@solana/web3.js&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// This will connect you to your local validator</span>
  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> solana<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>api <span class="token keyword">import</span> Client

client <span class="token operator">=</span> Client<span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>client <span class="token operator">=</span> Client<span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;solana.hpp&quot;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> many<span class="token double-colon punctuation">::</span>solana<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Connection <span class="token function">connection</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>Connection <span class="token function">connection</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">solana_client<span class="token punctuation">::</span>rpc_client<span class="token punctuation">::</span></span><span class="token class-name">RpcClient</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span>commitment_config<span class="token punctuation">::</span></span><span class="token class-name">CommitmentConfig</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> rpc_url <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token class-name">RpcClient</span><span class="token punctuation">::</span><span class="token function">new_with_commitment</span><span class="token punctuation">(</span>rpc_url<span class="token punctuation">,</span> <span class="token class-name">CommitmentConfig</span><span class="token punctuation">::</span><span class="token function">confirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> rpc_url <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token class-name">RpcClient</span><span class="token punctuation">::</span><span class="token function">new_with_commitment</span><span class="token punctuation">(</span>rpc_url<span class="token punctuation">,</span> <span class="token class-name">CommitmentConfig</span><span class="token punctuation">::</span><span class="token function">confirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana config <span class="token builtin class-name">set</span> --url http://privaterpc.com
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana config <span class="token builtin class-name">set</span> --url http://privaterpc.com
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><!--]--></div><h2 id="inscription-a-des-evenements" tabindex="-1"><a class="header-anchor" href="#inscription-a-des-evenements" aria-hidden="true">#</a> Inscription à des Evénements</h2><p>Les Websockets fournissent une interface pub/sub où vous pouvez écouter certains événements. Au lieu d&#39;envoyer une requête à un point de terminaison HTTP classique à intervalles réguliers pour obtenir des mises à jour fréquentes, vous pouvez recevoir ces mises à jour uniquement lorsqu&#39;elles se produisent.</p><p>La classe web3 <a href="https://solana-labs.github.io/solana-web3.js/classes/Connection.html" target="_blank" rel="noopener noreferrer"><code>Connection</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> de Solana génère un point de terminaison websocket et enregistre un client websocket lorsque vous créez une nouvelle instance <code>Connection</code> (voir le code source <a href="https://github.com/solana-labs/solana-web3.js/blob/45923ca00e4cc1ed079d8e55ecbee83e5b4dc174/src/connection.ts#L2100" target="_blank" rel="noopener noreferrer">ici<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>).</p><p>La classe <code>Connection</code> présente des méthodes pub/sub - elles commencent toutes par <code>on</code>, comme les émetteurs d&#39;événements. Lorsque vous appelez ces méthodes d&#39;écoute, un nouvel enregistrement est effectué auprès du client websocket de l&#39;instance <code>Connection</code>. L&#39;exemple de méthode pub/sub que nous utilisons ci-dessous est <a href="https://solana-labs.github.io/solana-web3.js/classes/Connection.html#onAccountChange" target="_blank" rel="noopener noreferrer"><code>onAccountChange</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. Le callback fournira les données d&#39;état mises à jour par le biais d&#39;arguments (voir <a href="https://solana-labs.github.io/solana-web3.js/modules.html#AccountChangeCallback" target="_blank" rel="noopener noreferrer"><code>AccountChangeCallback</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> en guise d&#39;exemple).</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TS</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Python</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">C++</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Rust</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> clusterApiUrl<span class="token punctuation">,</span> Connection<span class="token punctuation">,</span> Keypair <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@solana/web3.js&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Establish new connect to devnet - websocket client connected to devnet will also be registered here</span>
  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&quot;devnet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Create a test wallet to listen to</span>
  <span class="token keyword">const</span> wallet <span class="token operator">=</span> Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Register a callback to listen to the wallet (ws subscription)</span>
  connection<span class="token punctuation">.</span><span class="token function">onAccountChange</span><span class="token punctuation">(</span>
    wallet<span class="token punctuation">.</span><span class="token function">publicKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>updatedAccountInfo<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Updated account info: &quot;</span><span class="token punctuation">,</span> updatedAccountInfo<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;confirmed&quot;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// Establish new connect to devnet - websocket client connected to devnet will also be registered here</span>
<span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&quot;devnet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a test wallet to listen to</span>
<span class="token keyword">const</span> wallet <span class="token operator">=</span> Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Register a callback to listen to the wallet (ws subscription)</span>
connection<span class="token punctuation">.</span><span class="token function">onAccountChange</span><span class="token punctuation">(</span>
  wallet<span class="token punctuation">.</span><span class="token function">publicKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>updatedAccountInfo<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Updated account info: &quot;</span><span class="token punctuation">,</span> updatedAccountInfo<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">&quot;confirmed&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> solders<span class="token punctuation">.</span>keypair <span class="token keyword">import</span> Keypair
<span class="token keyword">from</span> solana<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>websocket_api <span class="token keyword">import</span> connect

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> connect<span class="token punctuation">(</span><span class="token string">&quot;wss://api.devnet.solana.com&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> websocket<span class="token punctuation">:</span>
        <span class="token comment"># Create a Test Wallet</span>
        wallet <span class="token operator">=</span> Keypair<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># Subscribe to the Test wallet to listen for events</span>
        <span class="token keyword">await</span> websocket<span class="token punctuation">.</span>account_subscribe<span class="token punctuation">(</span>wallet<span class="token punctuation">.</span>pubkey<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># Capture response from account subscription </span>
        first_resp <span class="token operator">=</span> <span class="token keyword">await</span> websocket<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Subscription successful with id {}, listening for events \n&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>first_resp<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
        updated_account_info <span class="token operator">=</span> <span class="token keyword">await</span> websocket<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>updated_account_info<span class="token punctuation">)</span>
        
asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">async</span> <span class="token keyword">with</span> connect<span class="token punctuation">(</span><span class="token string">&quot;wss://api.devnet.solana.com&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> websocket<span class="token punctuation">:</span>
    <span class="token comment"># Create a Test Wallet</span>
    wallet <span class="token operator">=</span> Keypair<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># Subscribe to the Test wallet to listen for events</span>
    <span class="token keyword">await</span> websocket<span class="token punctuation">.</span>account_subscribe<span class="token punctuation">(</span>wallet<span class="token punctuation">.</span>pubkey<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># Capture response from account subscription </span>
    first_resp <span class="token operator">=</span> <span class="token keyword">await</span> websocket<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Subscription successful with id {}, listening for events \n&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>first_resp<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
    updated_account_info <span class="token operator">=</span> <span class="token keyword">await</span> websocket<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>updated_account_info<span class="token punctuation">)</span>    
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// clang++ on_account_change.cpp -o on_account_change -std=c++17 -lssl -lcrypto -lsodium</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;solana.hpp&quot;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> many<span class="token double-colon punctuation">::</span>solana<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Connection <span class="token function">connection</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.devnet.solana.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">auto</span> key_pair <span class="token operator">=</span> <span class="token class-name">Keypair</span><span class="token double-colon punctuation">::</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">int</span> subscriptionId <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">on_account_change</span><span class="token punctuation">(</span>key_pair<span class="token punctuation">.</span>public_key<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>Result<span class="token operator">&lt;</span>Account<span class="token operator">&gt;</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Account account <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;owner = &quot;</span> <span class="token operator">&lt;&lt;</span> account<span class="token punctuation">.</span>owner<span class="token punctuation">.</span><span class="token function">to_base58</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;lamports = &quot;</span> <span class="token operator">&lt;&lt;</span> account<span class="token punctuation">.</span>lamports <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;data = &quot;</span> <span class="token operator">&lt;&lt;</span> account<span class="token punctuation">.</span>data <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;executable = &quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>account<span class="token punctuation">.</span>executable <span class="token operator">?</span> <span class="token string">&quot;true&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token double-colon punctuation">::</span>string tx_hash <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">request_airdrop</span><span class="token punctuation">(</span>key_pair<span class="token punctuation">.</span>public_key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;tx hash = &quot;</span> <span class="token operator">&lt;&lt;</span> tx_hash <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    connection<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  connection<span class="token punctuation">.</span><span class="token function">remove_account_listener</span><span class="token punctuation">(</span>subscriptionId<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">auto</span> key_pair <span class="token operator">=</span> <span class="token class-name">Keypair</span><span class="token double-colon punctuation">::</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> subscriptionId <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">on_account_change</span><span class="token punctuation">(</span>key_pair<span class="token punctuation">.</span>public_key<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>Result<span class="token operator">&lt;</span>Account<span class="token operator">&gt;</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Account account <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;owner = &quot;</span> <span class="token operator">&lt;&lt;</span> account<span class="token punctuation">.</span>owner<span class="token punctuation">.</span><span class="token function">to_base58</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;lamports = &quot;</span> <span class="token operator">&lt;&lt;</span> account<span class="token punctuation">.</span>lamports <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;data = &quot;</span> <span class="token operator">&lt;&lt;</span> account<span class="token punctuation">.</span>data <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;executable = &quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>account<span class="token punctuation">.</span>executable <span class="token operator">?</span> <span class="token string">&quot;true&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    connection<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

connection<span class="token punctuation">.</span><span class="token function">remove_account_listener</span><span class="token punctuation">(</span>subscriptionId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">solana_client<span class="token punctuation">::</span>pubsub_client<span class="token punctuation">::</span></span><span class="token class-name">PubsubClient</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_client<span class="token punctuation">::</span>rpc_config<span class="token punctuation">::</span></span><span class="token class-name">RpcAccountInfoConfig</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span>commitment_config<span class="token punctuation">::</span></span><span class="token class-name">CommitmentConfig</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span>signature<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Keypair</span><span class="token punctuation">,</span> <span class="token class-name">Signer</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> wallet <span class="token operator">=</span> <span class="token class-name">Keypair</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> pubkey <span class="token operator">=</span> <span class="token class-name">Signer</span><span class="token punctuation">::</span><span class="token function">pubkey</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wallet<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> ws_url <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;wss://api.devnet.solana.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> ws_url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span>subscription<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token class-name">PubsubClient</span><span class="token punctuation">::</span><span class="token function">account_subscribe</span><span class="token punctuation">(</span>
        <span class="token operator">&amp;</span>ws_url<span class="token punctuation">,</span>
        <span class="token operator">&amp;</span>pubkey<span class="token punctuation">,</span>
        <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token class-name">RpcAccountInfoConfig</span> <span class="token punctuation">{</span>
            encoding<span class="token punctuation">:</span> <span class="token class-name">None</span><span class="token punctuation">,</span>
            data_slice<span class="token punctuation">:</span> <span class="token class-name">None</span><span class="token punctuation">,</span>
            commitment<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token class-name">CommitmentConfig</span><span class="token punctuation">::</span><span class="token function">confirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token keyword">mut</span> ws_client<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token operator">=</span> subscription<span class="token punctuation">;</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Subscription successful, listening for events&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> handle <span class="token operator">=</span> <span class="token namespace">std<span class="token punctuation">::</span>thread<span class="token punctuation">::</span></span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">move</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>
            <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Waiting for a message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">match</span> receiver<span class="token punctuation">.</span><span class="token function">recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Ok</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{:?}&quot;</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">Err</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Connection broke with {:}&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        handle<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ws_client<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Errooooor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">let</span> ws_url <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;wss://api.devnet.solana.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token keyword">mut</span> client<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token class-name">PubsubClient</span><span class="token punctuation">::</span><span class="token function">account_subscribe</span><span class="token punctuation">(</span>
    <span class="token operator">&amp;</span>ws_url<span class="token punctuation">,</span>
    <span class="token operator">&amp;</span>pubkey<span class="token punctuation">,</span>
    <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token class-name">RpcAccountInfoConfig</span> <span class="token punctuation">{</span>
        encoding<span class="token punctuation">:</span> <span class="token class-name">None</span><span class="token punctuation">,</span>
        data_slice<span class="token punctuation">:</span> <span class="token class-name">None</span><span class="token punctuation">,</span>
        commitment<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token class-name">CommitmentConfig</span><span class="token punctuation">::</span><span class="token function">confirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token keyword">match</span> receiver<span class="token punctuation">.</span><span class="token function">recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{:?}&quot;</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><!--]--></div></div><!--]--></div><h2 id="obtention-de-sol-pour-les-tests" tabindex="-1"><a class="header-anchor" href="#obtention-de-sol-pour-les-tests" aria-hidden="true">#</a> Obtention de SOL pour les Tests</h2><p>Lorsque vous travaillez localement, vous avez besoin d&#39;un certain nombre de SOL pour envoyer des transactions. Dans les environnements non-mainnet, vous pouvez recevoir des SOL en les airdroppant à votre adresse.</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TS</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Python</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">C++</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Rust</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">CLI</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Connection<span class="token punctuation">,</span> Keypair<span class="token punctuation">,</span> <span class="token constant">LAMPORTS_PER_SOL</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@solana/web3.js&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keypair <span class="token operator">=</span> Keypair<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8899&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> signature <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">requestAirdrop</span><span class="token punctuation">(</span>
    keypair<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
    <span class="token constant">LAMPORTS_PER_SOL</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> blockhash<span class="token punctuation">,</span> lastValidBlockHeight <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">getLatestBlockhash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">confirmTransaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      blockhash<span class="token punctuation">,</span>
      lastValidBlockHeight<span class="token punctuation">,</span>
      signature
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> airdropSignature <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">requestAirdrop</span><span class="token punctuation">(</span>
  keypair<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
  <span class="token constant">LAMPORTS_PER_SOL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">confirmTransaction</span><span class="token punctuation">(</span>airdropSignature<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> solders<span class="token punctuation">.</span>keypair <span class="token keyword">import</span> Keypair
<span class="token keyword">from</span> solana<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>api <span class="token keyword">import</span> Client

wallet <span class="token operator">=</span> Keypair<span class="token punctuation">(</span><span class="token punctuation">)</span>

client <span class="token operator">=</span> Client<span class="token punctuation">(</span><span class="token string">&quot;https://api.devnet.solana.com&quot;</span><span class="token punctuation">)</span>

<span class="token comment">#Input Airdrop amount in LAMPORTS</span>
client<span class="token punctuation">.</span>request_airdrop<span class="token punctuation">(</span>wallet<span class="token punctuation">.</span>pubkey<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000000000</span><span class="token punctuation">)</span>

<span class="token comment">#Airdrops 1 SOL</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token comment">#Input Airdrop amount in LAMPORTS</span>
client<span class="token punctuation">.</span>request_airdrop<span class="token punctuation">(</span>wallet<span class="token punctuation">.</span>pubkey<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000000000</span><span class="token punctuation">)</span>

<span class="token comment">#Airdrops 1 SOL</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// clang++ request_airdrop.cpp -o request_airdrop -std=c++17 -lssl -lcrypto -lsodium</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;solana.hpp&quot;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> many<span class="token double-colon punctuation">::</span>solana<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Connection <span class="token function">connection</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.devnet.solana.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">auto</span> key_pair <span class="token operator">=</span> <span class="token class-name">Keypair</span><span class="token double-colon punctuation">::</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token double-colon punctuation">::</span>string tx_hash <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">request_airdrop</span><span class="token punctuation">(</span>key_pair<span class="token punctuation">.</span>public_key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;tx hash = &quot;</span> <span class="token operator">&lt;&lt;</span> tx_hash <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>connection<span class="token punctuation">.</span><span class="token function">request_airdrop</span><span class="token punctuation">(</span>key_pair<span class="token punctuation">.</span>public_key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">solana_client<span class="token punctuation">::</span>rpc_client<span class="token punctuation">::</span></span><span class="token class-name">RpcClient</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span>commitment_config<span class="token punctuation">::</span></span><span class="token class-name">CommitmentConfig</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span>native_token<span class="token punctuation">::</span></span><span class="token constant">LAMPORTS_PER_SOL</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span>signature<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Keypair</span><span class="token punctuation">,</span> <span class="token class-name">Signer</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> wallet <span class="token operator">=</span> <span class="token class-name">Keypair</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> pubkey <span class="token operator">=</span> <span class="token class-name">Signer</span><span class="token punctuation">::</span><span class="token function">pubkey</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wallet<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> rpc_url <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;https://api.devnet.solana.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token class-name">RpcClient</span><span class="token punctuation">::</span><span class="token function">new_with_commitment</span><span class="token punctuation">(</span>rpc_url<span class="token punctuation">,</span> <span class="token class-name">CommitmentConfig</span><span class="token punctuation">::</span><span class="token function">confirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">match</span> client<span class="token punctuation">.</span><span class="token function">request_airdrop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>pubkey<span class="token punctuation">,</span> <span class="token constant">LAMPORTS_PER_SOL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Ok</span><span class="token punctuation">(</span>sig<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span>confirmed<span class="token punctuation">)</span> <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">confirm_transaction</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>sig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> confirmed <span class="token punctuation">{</span>
                    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Transaction: {} Status: {}&quot;</span><span class="token punctuation">,</span> sig<span class="token punctuation">,</span> confirmed<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token class-name">Err</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Error requesting airdrop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">match</span> client<span class="token punctuation">.</span><span class="token function">request_airdrop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>pubkey<span class="token punctuation">,</span> <span class="token constant">LAMPORTS_PER_SOL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span>sig<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span>confirmed<span class="token punctuation">)</span> <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">confirm_transaction</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>sig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> confirmed <span class="token punctuation">{</span>
                <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Transaction: {} Status: {}&quot;</span><span class="token punctuation">,</span> sig<span class="token punctuation">,</span> confirmed<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token class-name">Err</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Error requesting airdrop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><!--]--></div></div><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana airdrop <span class="token number">1</span>

<span class="token comment"># Return</span>
<span class="token comment"># &quot;1 SOL&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana airdrop <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><!--]--></div><h2 id="utilisation-des-comptes-et-des-programmes-du-mainnet" tabindex="-1"><a class="header-anchor" href="#utilisation-des-comptes-et-des-programmes-du-mainnet" aria-hidden="true">#</a> Utilisation des Comptes et des Programmes du Mainnet</h2><p>Parfois, les tests locaux reposent sur des programmes et des comptes disponibles uniquement sur le mainnet. Le CLI de Solana permet à la fois de :</p><ul><li>Télécharger des Programmes et des Comptes</li><li>Charger des Programmes et des Comptes dans un validateur local</li></ul><h3 id="comment-charger-des-comptes-depuis-le-mainnet" tabindex="-1"><a class="header-anchor" href="#comment-charger-des-comptes-depuis-le-mainnet" aria-hidden="true">#</a> Comment charger des comptes depuis le mainnet</h3><p>Il est possible de télécharger les comptes de mint du jeton SRM dans un fichier comme suit :</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">CLI</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># solana account -u &lt;source cluster&gt; --output &lt;output format&gt; --output-file &lt;destination file name/path&gt; &lt;address of account to fetch&gt;</span>
solana account -u m --output json-compact --output-file SRM_token.json SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana account -u m --output json-compact --output-file SRM_token.json SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><!--]--></div><p>Le chargement sur votre réseau local se fait ensuite en passant le fichier contenant les comptes et l&#39;adresse de destination (sur le cluster local) lors du démarrage du validateur :</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">CLI</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># solana-test-validator --account &lt;address to load the account to&gt; &lt;path to account file&gt; --reset</span>
solana-test-validator --account SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt SRM_token.json --reset
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana-test-validator --account SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt SRM_token.json --reset
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><!--]--></div><h3 id="comment-charger-des-programmes-depuis-le-mainnet" tabindex="-1"><a class="header-anchor" href="#comment-charger-des-programmes-depuis-le-mainnet" aria-hidden="true">#</a> Comment charger des programmes depuis le mainnet</h3><p>De même, il est possible de télécharger le programme Serum Dex v3 :</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">CLI</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># solana program dump -u &lt;source cluster&gt; &lt;address of account to fetch&gt; &lt;destination file name/path&gt;</span>
solana program dump -u m 9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin serum_dex_v3.so
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana program dump -u m 9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin serum_dex_v3.so
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><!--]--></div><p>Le chargement sur votre réseau local se fait alors en passant le fichier du programme et l&#39;adresse de destination (sur le cluster local) lors du démarrage du validateur :</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><!--[--><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">CLI</button></li><!--]--><li class="flex-grow"></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></button></li><li class="code-group__li"><button class="code-group__nav-tab"><svg width="18" height="18" viewbox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></button></li></ul></div><div><div class="code-info-title">Press &lt;/&gt; button to view full source</div></div><!--[--><div class="code-group-item" aria-selected="false" data-v-6ae3d40e><div class="" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># solana-test-validator --bpf-program &lt;address to load the program to&gt; &lt;path to program file&gt; --reset</span>
solana-test-validator --bpf-program 9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin serum_dex_v3.so --reset
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div><div class="hidden" data-v-6ae3d40e><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>solana-test-validator --bpf-program 9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin serum_dex_v3.so --reset
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div></div><!--]--></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 91437574+partiallysorted@users.noreply.github.com">Partially Sorted</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 35653371+cryptoloutre@users.noreply.github.com">cryptoloutre</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/fr/references/keypairs-and-wallets.html" class="" aria-label="Paires de Clés et Portefeuilles"><!--[--><!--]--> Paires de Clés et Portefeuilles <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.07ce7a66.js" defer></script>
  </body>
</html>
