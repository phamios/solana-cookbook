<!DOCTYPE html>
<html lang="tr-TR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/solana_cookbook_lightmode.svg"><script data-domain="solanacookbook.com" src="https://plausible.io/js/plausible.js"></script><title>Account Maps (Hesap Haritaları) | Solana Cookbook</title><meta name="description" content="">
    <link rel="modulepreload" href="/assets/app.07ce7a66.js"><link rel="modulepreload" href="/assets/account-maps.html.c1ccf667.js"><link rel="modulepreload" href="/assets/account-maps.html.8c6e008e.js">
    <link rel="stylesheet" href="/assets/style.fecd2c41.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/tr/" class=""><!----><span class="site-name can-hide">Solana Cookbook</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Katkı yapmak"><!--[--><!--]--> Katkı yapmak <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/account-maps.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guides/account-maps.html" class="" aria-label="中文（简体）"><!--[--><!--]--> 中文（简体） <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guides/account-maps.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pt/guides/account-maps.html" class="" aria-label="Português"><!--[--><!--]--> Português <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/guides/account-maps.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/guides/account-maps.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/guides/account-maps.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fr/guides/account-maps.html" class="" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guides/account-maps.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/guides/account-maps.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/tr/guides/account-maps.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ja/guides/account-maps.html" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fil/guides/account-maps.html" class="" aria-label="Filipino"><!--[--><!--]--> Filipino <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Katkı yapmak"><!--[--><!--]--> Katkı yapmak <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/account-maps.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guides/account-maps.html" class="" aria-label="中文（简体）"><!--[--><!--]--> 中文（简体） <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guides/account-maps.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pt/guides/account-maps.html" class="" aria-label="Português"><!--[--><!--]--> Português <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/guides/account-maps.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/guides/account-maps.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/guides/account-maps.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fr/guides/account-maps.html" class="" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guides/account-maps.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/guides/account-maps.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/tr/guides/account-maps.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ja/guides/account-maps.html" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fil/guides/account-maps.html" class="" aria-label="Filipino"><!--[--><!--]--> Filipino <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Başlarken <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/tr/" class="sidebar-item" aria-label="Solana Cookbook"><!--[--><!--]--> Solana Cookbook <!--[--><!--]--></a><!----></li><li><a href="/tr/getting-started/installation.html" class="sidebar-item" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Temel Kavramlar <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/tr/core-concepts/accounts.html" class="sidebar-item" aria-label="Accounts (Account’lar)"><!--[--><!--]--> Accounts (Account’lar) <!--[--><!--]--></a><!----></li><li><a href="/tr/core-concepts/programs.html" class="sidebar-item" aria-label="Programs (Programlar)"><!--[--><!--]--> Programs (Programlar) <!--[--><!--]--></a><!----></li><li><a href="/tr/core-concepts/transactions.html" class="sidebar-item" aria-label="Transactions (İşlemler)"><!--[--><!--]--> Transactions (İşlemler) <!--[--><!--]--></a><!----></li><li><a href="/tr/core-concepts/pdas.html" class="sidebar-item" aria-label="Program Derived Addresses (PDAs) (Programdan Türetilmiş Adresler)"><!--[--><!--]--> Program Derived Addresses (PDAs) (Programdan Türetilmiş Adresler) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Kılavuzlar <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/tr/guides/get-program-accounts.html" class="sidebar-item" aria-label="Get Program Accounts"><!--[--><!--]--> Get Program Accounts <!--[--><!--]--></a><!----></li><li><a href="/tr/guides/serialization.html" class="sidebar-item" aria-label="Serializing Data (Serileştirme)"><!--[--><!--]--> Serializing Data (Serileştirme) <!--[--><!--]--></a><!----></li><li><a href="/tr/guides/data-migration.html" class="sidebar-item" aria-label="Migrating a Programs Data Accounts (Programların Data Account’larını Taşıma)"><!--[--><!--]--> Migrating a Programs Data Accounts (Programların Data Account’larını Taşıma) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/tr/guides/account-maps.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Account Maps (Hesap Haritaları)"><!--[--><!--]--> Account Maps (Hesap Haritaları) <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/tr/guides/account-maps.html#deriving-pdas" class="router-link-active router-link-exact-active sidebar-item" aria-label="Deriving PDAs"><!--[--><!--]--> Deriving PDAs <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/tr/guides/account-maps.html#single-map-account" class="router-link-active router-link-exact-active sidebar-item" aria-label="Single Map Account"><!--[--><!--]--> Single Map Account <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/tr/guides/debugging-solana-programs.html" class="sidebar-item" aria-label="Debugging Solana Programs (Solana Programlarında Hata Ayıklama)"><!--[--><!--]--> Debugging Solana Programs (Solana Programlarında Hata Ayıklama) <!--[--><!--]--></a><!----></li><li><a href="/tr/guides/feature-parity-testing.html" class="sidebar-item" aria-label="Feature Parity Testing (Özellik Parite Testi)"><!--[--><!--]--> Feature Parity Testing (Özellik Parite Testi) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Referanslar <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/tr/references/local-development.html" class="sidebar-item" aria-label="Local Development (Yerel Geliştirme)"><!--[--><!--]--> Local Development (Yerel Geliştirme) <!--[--><!--]--></a><!----></li><li><a href="/tr/references/keypairs-and-wallets.html" class="sidebar-item" aria-label="Keypairs and Wallets"><!--[--><!--]--> Keypairs and Wallets <!--[--><!--]--></a><!----></li><li><a href="/tr/references/basic-transactions.html" class="sidebar-item" aria-label="Sending Transactions(İşlem Gönderimi)"><!--[--><!--]--> Sending Transactions(İşlem Gönderimi) <!--[--><!--]--></a><!----></li><li><a href="/tr/references/accounts.html" class="sidebar-item" aria-label="Accounts (Account’lar)"><!--[--><!--]--> Accounts (Account’lar) <!--[--><!--]--></a><!----></li><li><a href="/tr/references/programs.html" class="sidebar-item" aria-label="Writing Programs (Programları Yazma)"><!--[--><!--]--> Writing Programs (Programları Yazma) <!--[--><!--]--></a><!----></li><li><a href="/tr/references/token.html" class="sidebar-item" aria-label="Interacting with Tokens (Token’lar ile Etkileşim)"><!--[--><!--]--> Interacting with Tokens (Token’lar ile Etkileşim) <!--[--><!--]--></a><!----></li><li><a href="/tr/references/staking.html" class="sidebar-item" aria-label="Staking (Stake Etme)"><!--[--><!--]--> Staking (Stake Etme) <!--[--><!--]--></a><!----></li><li><a href="/tr/references/nfts.html" class="sidebar-item" aria-label="Non Fungible Tokens (NFTs)"><!--[--><!--]--> Non Fungible Tokens (NFTs) <!--[--><!--]--></a><!----></li><li><a href="/tr/references/offline-transactions.html" class="sidebar-item" aria-label="Offline Transaction (Çevrimdışı işlem)"><!--[--><!--]--> Offline Transaction (Çevrimdışı işlem) <!--[--><!--]--></a><!----></li><li><a href="/tr/references/name-service.html" class="sidebar-item" aria-label="Name Service (Name Servisi)"><!--[--><!--]--> Name Service (Name Servisi) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="account-maps-hesap-haritaları" tabindex="-1"><a class="header-anchor" href="#account-maps-hesap-haritaları" aria-hidden="true">#</a> Account Maps (Hesap Haritaları)</h1><p>Maps, bir key’i bir tür değerle ilişkilendirmek için programlamada sıklıkla kullandığımız veri yapılarıdır. <strong>Key</strong> ve <strong>değer</strong> herhangi bir türde olabilir ve key, kaydedilmekte olan belirli bir değer için tanımlayıcı görevi görür. Daha sonra, key’i verildiğinde, bu değerleri verimli bir şekilde eklememize, almamıza ve güncellememize izin verir.</p><p>Solana&#39;nın Hesap modeli, bildiğimiz gibi, program verilerinin ve ilgili durum verilerinin farklı account&#39;larda depolanmasını gerektirir. Bu account&#39;ların kendileriyle ilişkili bir adresi vardır. Bu, kendi içinde bir map görevi görür! Solana&#39;nın Hesap modu hakkında daha fazla bilgiyi <a href="https://solanacookbook.com/core-concepts/accounts.html" target="_blank" rel="noopener noreferrer">buradan<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> edinebilirsiniz.</p><p>Bu nedenle, değeri almak için gereken key adresiyle değerlerinizi ayrı account&#39;larda saklamak mantıklı olacaktır. Ancak bu, aşağıdaki gibi birkaç sorunu beraberinde getirir:</p><ul><li><p>Yukarıda bahsedilen adresler, büyük olasılıkla, hatırlayabileceğiniz ve gerekli değeri alabileceğiniz ideal <strong>key</strong>’ler olmayacaktır.</p></li><li><p>Yukarıda bahsedilen adresler, her bir public key’in (veya adresin) kendisiyle ilişkilendirilmiş bir <strong>private key</strong>’e sahip olacağı farklı <strong>Keypair</strong>’lerin public key’lerine atıfta bulunur. Bu private key, gerektiğinde ve gerektiğinde farklı talimatları imzalamak için gerekli olacaktır, bu da private key’i bir yerde saklamamızı gerektirir, ki bu kesinlikle önerilmez!</p></li></ul><p>Bu, birçok Solana geliştiricisinin karşılaştığı ve programlarına <code>Map</code> benzeri bir logic uygulayan bir sorun sunuyor. Bu sorunla nasıl başa çıkacağımıza birkaç yoldan bakalım:</p><h2 id="deriving-pdas" tabindex="-1"><a class="header-anchor" href="#deriving-pdas" aria-hidden="true">#</a> Deriving PDAs</h2><p>PDA, <a href="https://solanacookbook.com/references/accounts.html#program-derived-address" target="_blank" rel="noopener noreferrer">Program Derived Address<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (Programdan Türetilmiş Adres) anlamına gelir ve kısaca, bir dizi seed ve bir program kimliğinden (veya adresinden) türetilen adreslerdir.</p><p>PDA&#39;larla ilgili benzersiz olan şey, bu adreslerin herhangi bir private key ile ilişkili olmamasıdır. Bunun nedeni, bu adreslerin ED25519 eğrisi üzerinde yer almamasıdır. Bu nedenle, yalnızca bu adresin türetildiği program, seedler de sağlanmışsa, key’le bir talimat imzalayabilir. Bu konuda <a href="https://solanacookbook.com/references/programs.html#create-a-program-derived-address" target="_blank" rel="noopener noreferrer">buradan<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> daha fazla bilgi edinebilirsiniz.</p><p>Artık PDA&#39;ların ne olduğu hakkında bir fikrimiz olduğuna göre, onları bazı account&#39;ları eşleştirmek için kullanalım! Bunun nasıl uygulanacağını göstermek için bir <strong>Blog</strong> programı örneği alacağız.</p><p>Bu Blog programında, her <code>Kullanıcı</code>nın(User) tek bir <code>Blog</code>&#39;u olmasını istiyoruz. Bu blog herhangi bir sayıda <code>Post</code> içerebilir. Bu, her kullanıcıyı bir blogla eşleştirdiğimiz (<strong>mapping</strong>) ve her yazının belirli bir blogla eşleştirildiği (<strong>mapped</strong>) anlamına gelir.</p><p>Kısacası, bir kullanıcı ile blogu arasında <code>1:1</code> eşleme varken, blog ve gönderileri arasında <code>1:N</code> eşleme vardır.</p><p><code>1:1</code> eşleme için, bir blog adresinin yalnızca kullanıcısından türetilmesini isteriz; bu, yetkisi (veya kullanıcısı) verildiğinde bir blogu geri almamıza izin verir. Bu nedenle, bir blogun seed’leri, authority&#39;s key’den(otorite anahtarından) ve muhtemelen bir tür tanımlayıcısı olarak işlev görmesi için &quot;blog&quot; ön ekinden oluşacaktır. <code>1:N</code> eşleme için, her bir gönderinin adresinin yalnızca ilişkili olduğu blogdan değil, aynı zamanda blogdaki N sayıda gönderi arasında ayrım yapmamıza izin veren başka bir tanımlayıcıdan türetilmesini isteriz. Aşağıdaki örnekte, her gönderinin adresi, <strong>blog anahtarından</strong>, her gönderiyi tanımlamak için bir <strong>bilgi işaretinden</strong> ve bir tür tanımlayıcısı olarak işlev görmek için &quot;<strong>Post</strong>&quot; ön ekinden türetilmiştir.</p><p>Kod aşağıda gösterildiği gibidir:</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token attribute attr-name">#[derive(Accounts)]</span>
<span class="token attribute attr-name">#[instruction(blog_account_bump: u8)]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">InitializeBlog</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;info</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    #<span class="token punctuation">[</span><span class="token function">account</span><span class="token punctuation">(</span>
        init<span class="token punctuation">,</span>
        seeds <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string">b&quot;blog&quot;</span><span class="token punctuation">.</span><span class="token function">as_ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            authority<span class="token punctuation">.</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as_ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        bump <span class="token operator">=</span> blog_account_bump<span class="token punctuation">,</span>
        payer <span class="token operator">=</span> authority<span class="token punctuation">,</span>
        space <span class="token operator">=</span> <span class="token class-name">Blog</span><span class="token punctuation">::</span><span class="token constant">LEN</span>
    <span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">pub</span> blog_account<span class="token punctuation">:</span> <span class="token class-name">Account</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;info</span><span class="token punctuation">,</span> <span class="token class-name">Blog</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>

    <span class="token attribute attr-name">#[account(mut)]</span>
    <span class="token keyword">pub</span> authority<span class="token punctuation">:</span> <span class="token class-name">Signer</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;info</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>

    <span class="token keyword">pub</span> system_program<span class="token punctuation">:</span> <span class="token class-name">Program</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;info</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[derive(Accounts)]</span>
<span class="token attribute attr-name">#[instruction(post_account_bump: u8, post: Post)]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">CreatePost</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;info</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token attribute attr-name">#[account(mut, has_one = authority)]</span>
    <span class="token keyword">pub</span> blog_account<span class="token punctuation">:</span> <span class="token class-name">Account</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;info</span><span class="token punctuation">,</span> <span class="token class-name">Blog</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>

    #<span class="token punctuation">[</span><span class="token function">account</span><span class="token punctuation">(</span>
        init<span class="token punctuation">,</span>
        seeds <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string">b&quot;post&quot;</span><span class="token punctuation">.</span><span class="token function">as_ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            blog_account<span class="token punctuation">.</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as_ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            post<span class="token punctuation">.</span>slug<span class="token punctuation">.</span><span class="token function">as_ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        bump <span class="token operator">=</span> post_account_bump<span class="token punctuation">,</span>
        payer <span class="token operator">=</span> authority<span class="token punctuation">,</span>
        space <span class="token operator">=</span> <span class="token class-name">Post</span><span class="token punctuation">::</span><span class="token constant">LEN</span>
    <span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">pub</span> post_account<span class="token punctuation">:</span> <span class="token class-name">Account</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;info</span><span class="token punctuation">,</span> <span class="token class-name">Post</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>

    <span class="token attribute attr-name">#[account(mut)]</span>
    <span class="token keyword">pub</span> authority<span class="token punctuation">:</span> <span class="token class-name">Signer</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;info</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    
    <span class="token keyword">pub</span> system_program<span class="token punctuation">:</span> <span class="token class-name">Program</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">&#39;info</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>Client tarafında, gerekli <code>Blog</code> ve <code>Post</code> account&#39;ı adresini almak için <code>PublicKey.findProgramAddress()</code>&#39;i kullanabilirsiniz; bu adresi account verilerini almak için <code>connection.getAccountInfo()</code>&#39;ya aktarabilirsiniz. Aşağıda bir örnek gösterilmiştir:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:8899&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>blogAccount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> PublicKey<span class="token punctuation">.</span><span class="token function">findProgramAddress</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span>Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;blog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>publicKey<span class="token punctuation">.</span><span class="token function">toBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token constant">MY_PROGRAM_ID</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>postAccount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> PublicKey<span class="token punctuation">.</span><span class="token function">findProgramAddress</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span>Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;slug-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>publicKey<span class="token punctuation">.</span><span class="token function">toBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token constant">MY_PROGRAM_ID</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> blogAccountInfo <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">getAccountInfo</span><span class="token punctuation">(</span>blogAccount<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> blogAccountState <span class="token operator">=</span> <span class="token constant">BLOG_ACCOUNT_DATA_LAYOUT</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>
    blogAccountInfo<span class="token punctuation">.</span>data
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Blog account state: &quot;</span><span class="token punctuation">,</span> blogAccountState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> postAccountInfo <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">getAccountInfo</span><span class="token punctuation">(</span>postAccount<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> postAccountState <span class="token operator">=</span> <span class="token constant">POST_ACCOUNT_DATA_LAYOUT</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>
    postAccountInfo<span class="token punctuation">.</span>data
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Post account state: &quot;</span><span class="token punctuation">,</span> postAccountState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="single-map-account" tabindex="-1"><a class="header-anchor" href="#single-map-account" aria-hidden="true">#</a> Single Map Account</h2><p>Mapping uygulamanın başka bir yolu, tek bir account&#39;ta açık olarak saklanan bir <code>BTreeMap</code> veri yapısına sahip olmaktır. Bu account&#39;ın adresi bir PDA veya oluşturulan bir Keypair’in public key’i olabilir.</p><p>Bu yöntem aşağıdaki nedenlerden dolayı ideal değildir:</p><ul><li><p>Gerekli key/value pairs çiftlerini buna eklemeden önce, önce <code>BTreeMap</code>&#39;i depolayan account&#39;ı başlatmanız gerekecektir. Ardından, her seferinde güncellemek için bu account&#39;ın adresini de bir yere kaydetmeniz gerekir.</p></li><li><p>Bir account&#39;ın, bir account&#39;ın maksimum 10 megabayt boyutuna sahip olabileceği ve BTreeMap&#39;in çok sayıda key/value pairs depolamasını kısıtlayan bellek sınırlamaları vardır.</p></li></ul><p>Bu nedenle, kullanım durumunuzu düşündükten sonra, bu yöntemi aşağıda gösterildiği gibi uygulayabilirsiniz:</p><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">process_init_map</span><span class="token punctuation">(</span>accounts<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token class-name">AccountInfo</span><span class="token punctuation">]</span><span class="token punctuation">,</span> program_id<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Pubkey</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">ProgramResult</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> account_info_iter <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> accounts<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> authority_account <span class="token operator">=</span> <span class="token function">next_account_info</span><span class="token punctuation">(</span>account_info_iter<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> map_account <span class="token operator">=</span> <span class="token function">next_account_info</span><span class="token punctuation">(</span>account_info_iter<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> system_program <span class="token operator">=</span> <span class="token function">next_account_info</span><span class="token punctuation">(</span>account_info_iter<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token operator">!</span>authority_account<span class="token punctuation">.</span>is_signer <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Err</span><span class="token punctuation">(</span><span class="token class-name">ProgramError</span><span class="token punctuation">::</span><span class="token class-name">MissingRequiredSignature</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> <span class="token punctuation">(</span>map_pda<span class="token punctuation">,</span> map_bump<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token class-name">Pubkey</span><span class="token punctuation">::</span><span class="token function">find_program_address</span><span class="token punctuation">(</span>
        <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token string">b&quot;map&quot;</span><span class="token punctuation">.</span><span class="token function">as_ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        program_id
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> map_pda <span class="token operator">!=</span> <span class="token operator">*</span>map_account<span class="token punctuation">.</span>key <span class="token operator">||</span> <span class="token operator">!</span>map_account<span class="token punctuation">.</span>is_writable <span class="token operator">||</span> <span class="token operator">!</span>map_account<span class="token punctuation">.</span><span class="token function">data_is_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Err</span><span class="token punctuation">(</span><span class="token class-name">BlogError</span><span class="token punctuation">::</span><span class="token class-name">InvalidMapAccount</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> rent <span class="token operator">=</span> <span class="token class-name">Rent</span><span class="token punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> rent_lamports <span class="token operator">=</span> rent<span class="token punctuation">.</span><span class="token function">minimum_balance</span><span class="token punctuation">(</span><span class="token class-name">MapAccount</span><span class="token punctuation">::</span><span class="token constant">LEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> create_map_ix <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token namespace">system_instruction<span class="token punctuation">::</span></span><span class="token function">create_account</span><span class="token punctuation">(</span>
        authority_account<span class="token punctuation">.</span>key<span class="token punctuation">,</span> 
        map_account<span class="token punctuation">.</span>key<span class="token punctuation">,</span> 
        rent_lamports<span class="token punctuation">,</span> 
        <span class="token class-name">MapAccount</span><span class="token punctuation">::</span><span class="token constant">LEN</span><span class="token punctuation">.</span><span class="token function">try_into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        program_id
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token macro property">msg!</span><span class="token punctuation">(</span><span class="token string">&quot;Creating MapAccount account&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">invoke_signed</span><span class="token punctuation">(</span>
        create_map_ix<span class="token punctuation">,</span> 
        <span class="token operator">&amp;</span><span class="token punctuation">[</span>
            authority_account<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            map_account<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            system_program<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">[</span>
            <span class="token string">b&quot;map&quot;</span><span class="token punctuation">.</span><span class="token function">as_ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token operator">&amp;</span><span class="token punctuation">[</span>map_bump<span class="token punctuation">]</span>
        <span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token macro property">msg!</span><span class="token punctuation">(</span><span class="token string">&quot;Deserializing MapAccount account&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> map_state <span class="token operator">=</span> <span class="token function">try_from_slice_unchecked</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">MapAccount</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>map_account<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">borrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> empty_map<span class="token punctuation">:</span> <span class="token class-name">BTreeMap</span><span class="token operator">&lt;</span><span class="token class-name">Pubkey</span><span class="token punctuation">,</span> <span class="token class-name">Pubkey</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token class-name">BTreeMap</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    map_state<span class="token punctuation">.</span>is_initialized <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    map_state<span class="token punctuation">.</span>map <span class="token operator">=</span> empty_map<span class="token punctuation">;</span>

    <span class="token macro property">msg!</span><span class="token punctuation">(</span><span class="token string">&quot;Serializing MapAccount account&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map_state<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> map_account<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">borrow_mut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">process_insert_entry</span><span class="token punctuation">(</span>accounts<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token class-name">AccountInfo</span><span class="token punctuation">]</span><span class="token punctuation">,</span> program_id<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Pubkey</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">ProgramResult</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">let</span> account_info_iter <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> accounts<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> a_account <span class="token operator">=</span> <span class="token function">next_account_info</span><span class="token punctuation">(</span>account_info_iter<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> b_account <span class="token operator">=</span> <span class="token function">next_account_info</span><span class="token punctuation">(</span>account_info_iter<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> map_account <span class="token operator">=</span> <span class="token function">next_account_info</span><span class="token punctuation">(</span>account_info_iter<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token operator">!</span>a_account<span class="token punctuation">.</span>is_signer <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Err</span><span class="token punctuation">(</span><span class="token class-name">ProgramError</span><span class="token punctuation">::</span><span class="token class-name">MissingRequiredSignature</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> map_account<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">borrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token operator">*</span>map_account<span class="token punctuation">.</span>owner <span class="token operator">!=</span> <span class="token operator">*</span>program_id <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Err</span><span class="token punctuation">(</span><span class="token class-name">BlogError</span><span class="token punctuation">::</span><span class="token class-name">InvalidMapAccount</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token macro property">msg!</span><span class="token punctuation">(</span><span class="token string">&quot;Deserializing MapAccount account&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> map_state <span class="token operator">=</span> <span class="token function">try_from_slice_unchecked</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">MapAccount</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>map_account<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">borrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> map_state<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">contains_key</span><span class="token punctuation">(</span>a_account<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Err</span><span class="token punctuation">(</span><span class="token class-name">BlogError</span><span class="token punctuation">::</span><span class="token class-name">AccountAlreadyHasEntry</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    map_state<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token operator">*</span>a_account<span class="token punctuation">.</span>key<span class="token punctuation">,</span> <span class="token operator">*</span>b_account<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token macro property">msg!</span><span class="token punctuation">(</span><span class="token string">&quot;Serializing MapAccount account&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map_state<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> map_account<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">borrow_mut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br></div></div><p>Yukarıdaki programı test etmek için Client tarafı kodu aşağıda gösterildiği gibi görünecektir:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> insertABIx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransactionInstruction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  programId<span class="token operator">:</span> <span class="token constant">MY_PROGRAM_ID</span><span class="token punctuation">,</span>
  keys<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      pubkey<span class="token operator">:</span> userA<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
      isSigner<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      isWritable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      pubkey<span class="token operator">:</span> userB<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
      isSigner<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      isWritable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      pubkey<span class="token operator">:</span> mapKey<span class="token punctuation">,</span>
      isSigner<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      isWritable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>Uint8Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> insertBCIx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransactionInstruction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  programId<span class="token operator">:</span> <span class="token constant">MY_PROGRAM_ID</span><span class="token punctuation">,</span>
  keys<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      pubkey<span class="token operator">:</span> userB<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
      isSigner<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      isWritable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      pubkey<span class="token operator">:</span> userC<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
      isSigner<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      isWritable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      pubkey<span class="token operator">:</span> mapKey<span class="token punctuation">,</span>
      isSigner<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      isWritable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>Uint8Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> insertCAIx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransactionInstruction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  programId<span class="token operator">:</span> <span class="token constant">MY_PROGRAM_ID</span><span class="token punctuation">,</span>
  keys<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      pubkey<span class="token operator">:</span> userC<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
      isSigner<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      isWritable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      pubkey<span class="token operator">:</span> userA<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span>
      isSigner<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      isWritable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      pubkey<span class="token operator">:</span> mapKey<span class="token punctuation">,</span>
      isSigner<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      isWritable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>Uint8Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> tx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Transaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tx<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>initMapIx<span class="token punctuation">)</span><span class="token punctuation">;</span>
tx<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>insertABIx<span class="token punctuation">)</span><span class="token punctuation">;</span>
tx<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>insertBCIx<span class="token punctuation">)</span><span class="token punctuation">;</span>
tx<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>insertCAIx<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: rukiyebeyzasarikaya@hotmail.com">rbeyzas</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/tr/guides/data-migration.html" class="" aria-label="Migrating a Programs Data Accounts (Programların Data Account’larını Taşıma)"><!--[--><!--]--> Migrating a Programs Data Accounts (Programların Data Account’larını Taşıma) <!--[--><!--]--></a></span><span class="next"><a href="/tr/guides/debugging-solana-programs.html" class="" aria-label="Debugging Solana Programs (Solana Programlarında Hata Ayıklama)"><!--[--><!--]--> Debugging Solana Programs (Solana Programlarında Hata Ayıklama) <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.07ce7a66.js" defer></script>
  </body>
</html>
