<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="title" content="Livro de Receitas da Solana - Solana Cookbook | Obter Contas do Programa"><meta name="og:title" content="Livro de Receitas da Solana - Solana Cookbook | Obter Contas do Programa"><meta name="description" content="Aprenda como consultar dados na Solana usando getProgramAccounts e accountsDB."><meta name="og:description" content="Aprenda como consultar dados na Solana usando getProgramAccounts e accountsDB."><meta name="og:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="og:image:alt" content="Solana splash card"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@solanacookbook"><meta name="twitter:image" content="https://solanacookbook.com/cookbook-sharing-card.png"><meta name="robots" content="index,follow,noodp"><meta name="googlebot" content="index,follow"><link rel="icon" href="/solana_cookbook_lightmode.svg"><script data-domain="solanacookbook.com" src="https://plausible.io/js/plausible.js"></script><title>Obter Contas do Programa | Solana Cookbook</title>
    <link rel="modulepreload" href="/assets/app.07ce7a66.js"><link rel="modulepreload" href="/assets/get-program-accounts.html.18585c23.js"><link rel="modulepreload" href="/assets/get-program-accounts.html.58aa1eba.js">
    <link rel="stylesheet" href="/assets/style.fecd2c41.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/pt/" class=""><!----><span class="site-name can-hide">Solana Cookbook</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Contribuir"><!--[--><!--]--> Contribuir <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/get-program-accounts.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guides/get-program-accounts.html" class="" aria-label="中文（简体）"><!--[--><!--]--> 中文（简体） <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guides/get-program-accounts.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/pt/guides/get-program-accounts.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Português"><!--[--><!--]--> Português <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/guides/get-program-accounts.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/guides/get-program-accounts.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/guides/get-program-accounts.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fr/guides/get-program-accounts.html" class="" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guides/get-program-accounts.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/guides/get-program-accounts.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tr/guides/get-program-accounts.html" class="" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ja/guides/get-program-accounts.html" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fil/guides/get-program-accounts.html" class="" aria-label="Filipino"><!--[--><!--]--> Filipino <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/solana-developers/solana-cookbook" rel="noopener noreferrer" target="_blank" aria-label="Contribuir"><!--[--><!--]--> Contribuir <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/get-program-accounts.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/guides/get-program-accounts.html" class="" aria-label="中文（简体）"><!--[--><!--]--> 中文（简体） <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/es/guides/get-program-accounts.html" class="" aria-label="Spanish"><!--[--><!--]--> Spanish <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/pt/guides/get-program-accounts.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Português"><!--[--><!--]--> Português <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/guides/get-program-accounts.html" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vi/guides/get-program-accounts.html" class="" aria-label="Tiếng Việt"><!--[--><!--]--> Tiếng Việt <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/th/guides/get-program-accounts.html" class="" aria-label="ไทย"><!--[--><!--]--> ไทย <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fr/guides/get-program-accounts.html" class="" aria-label="Français"><!--[--><!--]--> Français <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/id/guides/get-program-accounts.html" class="" aria-label="Bahasa Indonesia"><!--[--><!--]--> Bahasa Indonesia <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/kr/guides/get-program-accounts.html" class="" aria-label="한국어"><!--[--><!--]--> 한국어 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tr/guides/get-program-accounts.html" class="" aria-label="Türkçe"><!--[--><!--]--> Türkçe <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ja/guides/get-program-accounts.html" class="" aria-label="日本語"><!--[--><!--]--> 日本語 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/fil/guides/get-program-accounts.html" class="" aria-label="Filipino"><!--[--><!--]--> Filipino <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Primeiros pasos <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/pt/" class="sidebar-item" aria-label="Cozinhando com a Solana"><!--[--><!--]--> Cozinhando com a Solana <!--[--><!--]--></a><!----></li><li><a href="/pt/getting-started/installation.html" class="sidebar-item" aria-label="Instalação"><!--[--><!--]--> Instalação <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Conceitos chaves <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/pt/core-concepts/accounts.html" class="sidebar-item" aria-label="Contas"><!--[--><!--]--> Contas <!--[--><!--]--></a><!----></li><li><a href="/pt/core-concepts/programs.html" class="sidebar-item" aria-label="Programas"><!--[--><!--]--> Programas <!--[--><!--]--></a><!----></li><li><a href="/pt/core-concepts/transactions.html" class="sidebar-item" aria-label="Transações"><!--[--><!--]--> Transações <!--[--><!--]--></a><!----></li><li><a href="/pt/core-concepts/pdas.html" class="sidebar-item" aria-label="Endereços Derivados de Programa (PDAs)"><!--[--><!--]--> Endereços Derivados de Programa (PDAs) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Guias <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/pt/guides/get-program-accounts.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Obter Contas do Programa"><!--[--><!--]--> Obter Contas do Programa <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/pt/guides/get-program-accounts.html#fatos" class="router-link-active router-link-exact-active sidebar-item" aria-label="Fatos"><!--[--><!--]--> Fatos <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/pt/guides/get-program-accounts.html#mergulho-profundo" class="router-link-active router-link-exact-active sidebar-item" aria-label="Mergulho Profundo"><!--[--><!--]--> Mergulho Profundo <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/pt/guides/get-program-accounts.html#filters" class="router-link-active router-link-exact-active sidebar-item" aria-label="filters"><!--[--><!--]--> filters <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/pt/guides/get-program-accounts.html#dataslice" class="router-link-active router-link-exact-active sidebar-item" aria-label="dataSlice"><!--[--><!--]--> dataSlice <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/pt/guides/get-program-accounts.html#outros-recursos" class="router-link-active router-link-exact-active sidebar-item" aria-label="Outros recursos"><!--[--><!--]--> Outros recursos <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/pt/guides/serialization.html" class="sidebar-item" aria-label="Serializando Dados"><!--[--><!--]--> Serializando Dados <!--[--><!--]--></a><!----></li><li><a href="/pt/guides/data-migration.html" class="sidebar-item" aria-label="Migrando Contas de Dados do Programa"><!--[--><!--]--> Migrando Contas de Dados do Programa <!--[--><!--]--></a><!----></li><li><a href="/pt/guides/account-maps.html" class="sidebar-item" aria-label="Mapeamentos de Conta"><!--[--><!--]--> Mapeamentos de Conta <!--[--><!--]--></a><!----></li><li><a href="/pt/guides/debugging-solana-programs.html" class="sidebar-item" aria-label="Depurando Programas da Solana"><!--[--><!--]--> Depurando Programas da Solana <!--[--><!--]--></a><!----></li><li><a href="/pt/guides/feature-parity-testing.html" class="sidebar-item" aria-label="Teste de Paridade de Recursos"><!--[--><!--]--> Teste de Paridade de Recursos <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Referências <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/pt/references/local-development.html" class="sidebar-item" aria-label="Desenvolvimento Local"><!--[--><!--]--> Desenvolvimento Local <!--[--><!--]--></a><!----></li><li><a href="/pt/references/keypairs-and-wallets.html" class="sidebar-item" aria-label="Pares de Chaves e Carteiras"><!--[--><!--]--> Pares de Chaves e Carteiras <!--[--><!--]--></a><!----></li><li><a href="/pt/references/basic-transactions.html" class="sidebar-item" aria-label="Enviando Transações"><!--[--><!--]--> Enviando Transações <!--[--><!--]--></a><!----></li><li><a href="/pt/references/accounts.html" class="sidebar-item" aria-label="Contas"><!--[--><!--]--> Contas <!--[--><!--]--></a><!----></li><li><a href="/pt/references/programs.html" class="sidebar-item" aria-label="Escrevendo Programas"><!--[--><!--]--> Escrevendo Programas <!--[--><!--]--></a><!----></li><li><a href="/pt/references/token.html" class="sidebar-item" aria-label="Interagindo com Tokens"><!--[--><!--]--> Interagindo com Tokens <!--[--><!--]--></a><!----></li><li><a href="/pt/references/staking.html" class="sidebar-item" aria-label="Staking"><!--[--><!--]--> Staking <!--[--><!--]--></a><!----></li><li><a href="/pt/references/nfts.html" class="sidebar-item" aria-label="NFTs"><!--[--><!--]--> NFTs <!--[--><!--]--></a><!----></li><li><a href="/pt/references/offline-transactions.html" class="sidebar-item" aria-label="Enviando Transações Offline"><!--[--><!--]--> Enviando Transações Offline <!--[--><!--]--></a><!----></li><li><a href="/pt/references/name-service.html" class="sidebar-item" aria-label="Serviço de Nomes"><!--[--><!--]--> Serviço de Nomes <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="obter-contas-do-programa" tabindex="-1"><a class="header-anchor" href="#obter-contas-do-programa" aria-hidden="true">#</a> Obter Contas do Programa</h1><p><code>getProgramAccounts</code> é um método RPC que retorna todas as contas pertencentes a um programa. Atualmente, a paginação não é suportada. As solicitações para <code>getProgramAccounts</code> devem incluir os parâmetros <code>dataSlice</code> e/ou <code>filters</code> para melhorar o tempo de resposta e retornar apenas os resultados pretendidos.</p><h2 id="fatos" tabindex="-1"><a class="header-anchor" href="#fatos" aria-hidden="true">#</a> Fatos</h2><div class="custom-container tip"><p class="custom-container-title">Parâmetros</p><ul><li><code>programId</code>: <code>string</code> - A chave pública (pubkey) do programa a ser consultado, fornecida como uma string codificada em base58</li><li>(opcional) <code>configOrCommitment</code>: <code>object</code> - Parâmetros de configuração contendo os seguintes campos opcionais: <ul><li>(opcional) <code>commitment</code>: <code>string</code> - <a href="https://docs.solana.com/developing/clients/jsonrpc-api#configuring-state-commitment" target="_blank" rel="noopener noreferrer">Compromisso de estado<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>(opcional) <code>encoding</code>: <code>string</code> - Codificação para dados da conta: <code>base58</code>, <code>base64</code>, ou <code>jsonParsed</code>. Observe que os usuários do web3js devem usar <a href="https://solana-labs.github.io/solana-web3.js/classes/Connection.html#getParsedProgramAccounts" target="_blank" rel="noopener noreferrer">getParsedProgramAccounts<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>(opcional) <code>dataSlice</code>: <code>object</code> - Limite os dados da conta retornados com base em: <ul><li><code>offset</code>: <code>number</code> - Número de bytes para começar a retornar os dados da conta</li><li><code>length</code>: <code>number</code> - Número de bytes dos dados da conta a serem retornados</li></ul></li><li>(opcional) <code>filters</code>: <code>array</code> - Filtra os resultados usando os seguintes objetos de filtro: <ul><li><code>memcmp</code>: <code>object</code> - Combina uma série de bytes aos dados da conta: <ul><li><code>offset</code>: <code>number</code> - Número de bytes nos dados da conta para iniciar a comparação</li><li><code>bytes</code>: <code>string</code> - Dados para combinar, como uma string codificada em base58 limitada a 129 bytes</li></ul></li><li><code>dataSize</code>: <code>number</code> - Compara o tamanho dos dados da conta com o tamanho de dados fornecido</li></ul></li><li>(opcional) <code>withContext</code>: <code>boolean</code> - Envolva o resultado em um <a href="https://docs.solana.com/developing/clients/jsonrpc-api#rpcresponse-structure" target="_blank" rel="noopener noreferrer">objeto JSON RpcResponse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li></ul><h5 id="resposta" tabindex="-1"><a class="header-anchor" href="#resposta" aria-hidden="true">#</a> Resposta</h5><p>Por padrão, <code>getProgramAccounts</code> retornará um array de objetos JSON com a seguinte estrutura:</p><ul><li><code>pubkey</code>: <code>string</code> - A chave pública da conta como uma string codificada em base58</li><li><code>account</code>: <code>object</code> - Um objeto JSON, com os seguintes subcampos: <ul><li><code>lamports</code>: <code>number</code>, número de lamports atribuídos à conta</li><li><code>owner</code>: <code>string</code>, a chave pública codificada em base58 do programa ao qual a conta foi atribuída</li><li><code>data</code>: <code>string</code> | <code>object</code> - dados associados à conta, seja como dados binários codificados ou formato JSON, dependendo do parâmetro de codificação fornecido</li><li><code>executable</code>: <code>boolean</code>, indicação se a conta contém um programa</li><li><code>rentEpoch</code>: <code>number</code>, época na qual esta conta deverá pagar aluguel novamente</li></ul></li></ul></div><h2 id="mergulho-profundo" tabindex="-1"><a class="header-anchor" href="#mergulho-profundo" aria-hidden="true">#</a> Mergulho Profundo</h2><p><code>getProgramAccounts</code> é um método RPC versátil que retorna todas as contas de propriedade de um programa. Podemos usar <code>getProgramAccounts</code> para várias consultas úteis, como encontrar:</p><ul><li>Todas as contas de token para uma carteira específica</li><li>Todas as contas de token para uma cunhagem de tokens específica (ou seja, todos os detentores de <a href="https://www.projectserum.com/" target="_blank" rel="noopener noreferrer">SRM<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</li><li>Todas as contas personalizadas para um programa específico (ou seja, todos os usuários do <a href="https://mango.markets/" target="_blank" rel="noopener noreferrer">Mango<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</li></ul><p>Apesar de sua utilidade, <code>getProgramAccounts</code> é frequentemente mal compreendido devido às suas limitações atuais. Muitas das consultas suportadas pelo <code>getProgramAccounts</code> exigem que os nós RPC verifiquem grandes conjuntos de dados. Essas verificações são intensivas em recursos e em memória. Como resultado, chamadas muito frequentes ou muito grandes em escopo podem resultar em tempo limite de conexão. Além disso, no momento em que este texto foi escrito, o ponto de extremidade <code>getProgramAccounts</code> não suporta paginação. Se os resultados de uma consulta forem muito grandes, a resposta será truncada.</p><p>Para contornar essas limitações atuais, <code>getProgramAccounts</code> oferece vários parâmetros úteis, como <code>dataSlice</code> e as opções de filtros (<code>filters</code>) <code>memcmp</code> e <code>dataSize</code>. Ao fornecer combinações desses parâmetros, podemos reduzir o escopo de nossas consultas a tamanhos gerenciáveis e previsíveis.</p><p>Um exemplo comum de <code>getProgramAccounts</code> envolve a interação com o <a href="https://spl.solana.com/token" target="_blank" rel="noopener noreferrer">Programa de Tokens SPL<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. Solicitar todas as contas de propriedade do Programa de Tokens com uma <a href="/pt/references/accounts.html#get-program-accounts" class="">chamada básica</a> envolveria uma enorme quantidade de dados. No entanto, fornecendo parâmetros, podemos solicitar eficientemente apenas os dados que pretendemos usar.</p><h3 id="filters" tabindex="-1"><a class="header-anchor" href="#filters" aria-hidden="true">#</a> <code>filters</code></h3><p>O parâmetro mais comum a ser usado com <code>getProgramAccounts</code> é o array <code>filters</code>. Este array aceita dois tipos de filtros, <code>dataSize</code> e <code>memcmp</code>. Antes de usar qualquer um desses filtros, devemos estar familiarizados com a forma como os dados que estamos solicitando são organizados e serializados.</p><h4 id="datasize" tabindex="-1"><a class="header-anchor" href="#datasize" aria-hidden="true">#</a> <code>dataSize</code></h4><p>No caso do Programa de Tokens, podemos ver que <a href="https://github.com/solana-labs/solana-program-library/blob/08d9999f997a8bf38719679be9d572f119d0d960/token/program/src/state.rs#L86-L106" target="_blank" rel="noopener noreferrer">as contas de token têm 165 bytes de comprimento<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. Especificamente, uma conta de token tem oito campos diferentes, e cada campo requer um número previsível de bytes. Podemos visualizar como esses dados estão organizados usando a ilustração abaixo.</p><p><img src="/assets/account-size.398f17bf.png" alt="Tamanho da Conta"></p><p>Se quisermos encontrar todas as contas de token de propriedade do nosso endereço de carteira, podemos adicionar <code>{dataSize: 165}</code> ao nosso array <code>filters</code> para reduzir o escopo da nossa consulta apenas para as contas que têm exatamente 165 bytes de comprimento. No entanto, isso por si só seria insuficiente. Também precisaríamos adicionar um filtro que procurasse contas de propriedade do nosso endereço. Podemos alcançar isso com o filtro <code>memcmp</code>.</p><h4 id="memcmp" tabindex="-1"><a class="header-anchor" href="#memcmp" aria-hidden="true">#</a> <code>memcmp</code></h4><p>O filtro <code>memcmp</code>, ou filtro de &quot;comparação de memória&quot;, nos permite comparar dados em qualquer campo armazenado em nossa conta. Especificamente, podemos consultar apenas as contas que correspondem a um determinado conjunto de bytes em uma posição específica. <code>memcmp</code> requer dois argumentos:</p><ul><li><code>offset</code>: A posição onde iniciar a comparação dos dados. Essa posição é medida em bytes e é expressa como um número inteiro.</li><li><code>bytes</code>: Os dados que devem corresponder aos dados da conta. Isso é representado como uma string codificada em base58 e deve ser limitado a menos de 129 bytes.</li></ul><p>É importante observar que <code>memcmp</code> somente retornará resultados que correspondem exatamente aos <code>bytes</code>. Atualmente, ele não oferece suporte a comparações para valores menores ou maiores que os <code>bytes</code> que fornecemos.</p><p>Seguindo com nosso exemplo do Programa de Tokens, podemos modificar nossa consulta para retornar somente contas de token que são de propriedade do nosso endereço de carteira. Ao olhar para uma conta de token, podemos ver que os dois primeiros campos armazenados em uma conta de token são chaves públicas e cada chave pública tem 32 bytes de comprimento. Dado que <code>owner</code> é o segundo campo, devemos iniciar nosso <code>memcmp</code> em um <code>offset</code> de 32 bytes. A partir daqui, estaremos procurando por contas cujo campo de proprietário corresponda ao nosso endereço de carteira.</p><p><img src="/assets/memcmp.c5e1f050.png" alt="Tamanho da Conta"></p><p>Podemos invocar essa consulta por meio do exemplo a seguir:</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TS</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Rust Client</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">cURL</button></li></ul></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">TOKEN_PROGRAM_ID</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@solana/spl-token&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clusterApiUrl<span class="token punctuation">,</span> Connection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@solana/web3.js&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">MY_WALLET_ADDRESS</span> <span class="token operator">=</span> <span class="token string">&quot;FriELggez2Dy3phZeHHAdpcoEXkKQVkv6tx3zDtCVP8T&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&quot;devnet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">getParsedProgramAccounts</span><span class="token punctuation">(</span>
    <span class="token constant">TOKEN_PROGRAM_ID</span><span class="token punctuation">,</span> <span class="token comment">// new PublicKey(&quot;TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA&quot;)</span>
    <span class="token punctuation">{</span>
      filters<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          dataSize<span class="token operator">:</span> <span class="token number">165</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          memcmp<span class="token operator">:</span> <span class="token punctuation">{</span>
            offset<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
            bytes<span class="token operator">:</span> <span class="token constant">MY_WALLET_ADDRESS</span><span class="token punctuation">,</span> <span class="token comment">// base58 encoded string</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Found </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>accounts<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> token account(s) for wallet </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">MY_WALLET_ADDRESS</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  accounts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>account<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">-- Token Account Address </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>account<span class="token punctuation">.</span>pubkey<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> --</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Mint: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>account<span class="token punctuation">.</span>account<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token string">&quot;parsed&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;mint&quot;</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Amount: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>account<span class="token punctuation">.</span>account<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token string">&quot;parsed&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;tokenAmount&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;uiAmount&quot;</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/*
    // Output

    Found 2 token account(s) for wallet FriELggez2Dy3phZeHHAdpcoEXkKQVkv6tx3zDtCVP8T: 
    -- Token Account Address 0:  H12yCcKLHFJFfohkeKiN8v3zgaLnUMwRcnJTyB4igAsy --
    Mint: CKKDsBT6KiT4GDKs3e39Ue9tDkhuGUKM3cC2a7pmV9YK
    Amount: 1
    -- Token Account Address 1:  Et3bNDxe2wP1yE5ao6mMvUByQUHg8nZTndpJNvfKLdCb --
    Mint: BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf
    Amount: 3
  */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><!--]--></div><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">solana_client<span class="token punctuation">::</span></span><span class="token punctuation">{</span>
  <span class="token namespace">rpc_client<span class="token punctuation">::</span></span><span class="token class-name">RpcClient</span><span class="token punctuation">,</span> 
  <span class="token namespace">rpc_filter<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">RpcFilterType</span><span class="token punctuation">,</span> <span class="token class-name">Memcmp</span><span class="token punctuation">,</span> <span class="token class-name">MemcmpEncodedBytes</span><span class="token punctuation">,</span> <span class="token class-name">MemcmpEncoding</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token namespace">rpc_config<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">RpcProgramAccountsConfig</span><span class="token punctuation">,</span> <span class="token class-name">RpcAccountInfoConfig</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token namespace">commitment_config<span class="token punctuation">::</span></span><span class="token class-name">CommitmentConfig</span><span class="token punctuation">,</span> <span class="token namespace">program_pack<span class="token punctuation">::</span></span><span class="token class-name">Pack</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">spl_token<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token namespace">state<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Mint</span><span class="token punctuation">,</span> <span class="token class-name">Account</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_account_decoder<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">UiAccountEncoding</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">MY_WALLET_ADDRESS</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span> <span class="token operator">=</span> <span class="token string">&quot;FriELggez2Dy3phZeHHAdpcoEXkKQVkv6tx3zDtCVP8T&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> rpc_url <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;http://api.devnet.solana.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> connection <span class="token operator">=</span> <span class="token class-name">RpcClient</span><span class="token punctuation">::</span><span class="token function">new_with_commitment</span><span class="token punctuation">(</span>rpc_url<span class="token punctuation">,</span> <span class="token class-name">CommitmentConfig</span><span class="token punctuation">::</span><span class="token function">confirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> filters <span class="token operator">=</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token macro property">vec!</span><span class="token punctuation">[</span>
      <span class="token class-name">RpcFilterType</span><span class="token punctuation">::</span><span class="token class-name">Memcmp</span><span class="token punctuation">(</span><span class="token class-name">Memcmp</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>
        <span class="token number">32</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
        <span class="token class-name">MemcmpEncodedBytes</span><span class="token punctuation">::</span><span class="token class-name">Base58</span><span class="token punctuation">(</span><span class="token constant">MY_WALLET_ADDRESS</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token class-name">RpcFilterType</span><span class="token punctuation">::</span><span class="token class-name">DataSize</span><span class="token punctuation">(</span><span class="token number">165</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> accounts <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">get_program_accounts_with_config</span><span class="token punctuation">(</span>
      <span class="token operator">&amp;</span><span class="token namespace">spl_token<span class="token punctuation">::</span></span><span class="token constant">ID</span><span class="token punctuation">,</span>
      <span class="token class-name">RpcProgramAccountsConfig</span> <span class="token punctuation">{</span>
          filters<span class="token punctuation">,</span>
          account_config<span class="token punctuation">:</span> <span class="token class-name">RpcAccountInfoConfig</span> <span class="token punctuation">{</span>
              encoding<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token class-name">UiAccountEncoding</span><span class="token punctuation">::</span><span class="token class-name">Base64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              commitment<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span><span class="token function">commitment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">..</span><span class="token class-name">RpcAccountInfoConfig</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">..</span><span class="token class-name">RpcProgramAccountsConfig</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Found {:?} token account(s) for wallet {MY_WALLET_ADDRESS}: &quot;</span><span class="token punctuation">,</span> accounts<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span> account<span class="token punctuation">)</span> <span class="token keyword">in</span> accounts<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enumerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;-- Token Account Address {:?}:  {:?} --&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> account<span class="token number">.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> mint_token_account <span class="token operator">=</span> <span class="token class-name">Account</span><span class="token punctuation">::</span><span class="token function">unpack_from_slice</span><span class="token punctuation">(</span>account<span class="token number">.1</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">as_slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Mint: {:?}&quot;</span><span class="token punctuation">,</span> mint_token_account<span class="token punctuation">.</span>mint<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> mint_account_data <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">get_account_data</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mint_token_account<span class="token punctuation">.</span>mint<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> mint <span class="token operator">=</span> <span class="token class-name">Mint</span><span class="token punctuation">::</span><span class="token function">unpack_from_slice</span><span class="token punctuation">(</span>mint_account_data<span class="token punctuation">.</span><span class="token function">as_slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Amount: {:?}&quot;</span><span class="token punctuation">,</span> mint_token_account<span class="token punctuation">.</span>amount <span class="token keyword">as</span> <span class="token keyword">f64</span> <span class="token operator">/</span><span class="token number">10usize</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>mint<span class="token punctuation">.</span>decimals <span class="token keyword">as</span> <span class="token keyword">u32</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">f64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
// Output

Found 2 token account(s) for wallet FriELggez2Dy3phZeHHAdpcoEXkKQVkv6tx3zDtCVP8T: 
-- Token Account Address 0:  H12yCcKLHFJFfohkeKiN8v3zgaLnUMwRcnJTyB4igAsy --
Mint: CKKDsBT6KiT4GDKs3e39Ue9tDkhuGUKM3cC2a7pmV9YK
Amount: 1.0
-- Token Account Address 1:  Et3bNDxe2wP1yE5ao6mMvUByQUHg8nZTndpJNvfKLdCb --
Mint: BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf
Amount: 3.0
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><!--]--></div><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> http://api.mainnet-beta.solana.com -X POST -H <span class="token string">&quot;Content-Type: application/json&quot;</span> -d <span class="token string">&#39;
  {
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;id&quot;: 1,
    &quot;method&quot;: &quot;getProgramAccounts&quot;,
    &quot;params&quot;: [
      &quot;TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA&quot;,
      {
        &quot;encoding&quot;: &quot;jsonParsed&quot;,
        &quot;filters&quot;: [
          {
            &quot;dataSize&quot;: 165
          },
          {
            &quot;memcmp&quot;: {
              &quot;offset&quot;: 32,
              &quot;bytes&quot;: &quot;FriELggez2Dy3phZeHHAdpcoEXkKQVkv6tx3zDtCVP8T&quot;
            }
          }
        ]
      }
    ]
  }
&#39;</span>

<span class="token comment"># Output: </span>
<span class="token comment"># {</span>
<span class="token comment">#   &quot;jsonrpc&quot;: &quot;2.0&quot;,</span>
<span class="token comment">#   &quot;result&quot;: [</span>
<span class="token comment">#     {</span>
<span class="token comment">#       &quot;account&quot;: {</span>
<span class="token comment">#         &quot;data&quot;: {</span>
<span class="token comment">#           &quot;parsed&quot;: {</span>
<span class="token comment">#             &quot;info&quot;: {</span>
<span class="token comment">#               &quot;isNative&quot;: false,</span>
<span class="token comment">#               &quot;mint&quot;: &quot;BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf&quot;,</span>
<span class="token comment">#               &quot;owner&quot;: &quot;FriELggez2Dy3phZeHHAdpcoEXkKQVkv6tx3zDtCVP8T&quot;,</span>
<span class="token comment">#               &quot;state&quot;: &quot;initialized&quot;,</span>
<span class="token comment">#               &quot;tokenAmount&quot;: {</span>
<span class="token comment">#                 &quot;amount&quot;: &quot;998999999000000000&quot;,</span>
<span class="token comment">#                 &quot;decimals&quot;: 9,</span>
<span class="token comment">#                 &quot;uiAmount&quot;: 998999999,</span>
<span class="token comment">#                 &quot;uiAmountString&quot;: &quot;998999999&quot;</span>
<span class="token comment">#               }</span>
<span class="token comment">#             },</span>
<span class="token comment">#             &quot;type&quot;: &quot;account&quot;</span>
<span class="token comment">#           },</span>
<span class="token comment">#           &quot;program&quot;: &quot;spl-token&quot;,</span>
<span class="token comment">#           &quot;space&quot;: 165</span>
<span class="token comment">#         },</span>
<span class="token comment">#         &quot;executable&quot;: false,</span>
<span class="token comment">#         &quot;lamports&quot;: 2039280,</span>
<span class="token comment">#         &quot;owner&quot;: &quot;TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA&quot;,</span>
<span class="token comment">#         &quot;rentEpoch&quot;: 313</span>
<span class="token comment">#       },</span>
<span class="token comment">#       &quot;pubkey&quot;: &quot;Et3bNDxe2wP1yE5ao6mMvUByQUHg8nZTndpJNvfKLdCb&quot;</span>
<span class="token comment">#     }</span>
<span class="token comment">#   ],</span>
<span class="token comment">#   &quot;id&quot;: 1</span>
<span class="token comment"># }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><!--]--></div><!--]--></div><h3 id="dataslice" tabindex="-1"><a class="header-anchor" href="#dataslice" aria-hidden="true">#</a> <code>dataSlice</code></h3><p>Fora dos dois parâmetros de filtro, o terceiro parâmetro mais comum para <code>getProgramAccounts</code> é <code>dataSlice</code>. Ao contrário do parâmetro <code>filters</code>, o <code>dataSlice</code> não reduzirá o número de contas retornadas por uma consulta. Em vez disso, o <code>dataSlice</code> limitará a quantidade de dados para cada conta.</p><p>Assim como o <code>memcmp</code>, o <code>dataSlice</code> aceita dois argumentos:</p><ul><li><code>offset</code>: A posição (em número de bytes) onde iniciar o retorno dos dados da conta</li><li><code>length</code>: O número de bytes que devem ser retornados</li></ul><p>O <code>dataSlice</code> é particularmente útil quando executamos consultas em um grande conjunto de dados, mas na verdade não nos importamos com os dados da conta em si. Um exemplo disso seria se quiséssemos encontrar o número de contas de token (ou seja, número de detentores de token) para uma determinada cunhagem de tokens.</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">TS</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Rust Client</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">cURL</button></li></ul></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">TOKEN_PROGRAM_ID</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@solana/spl-token&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clusterApiUrl<span class="token punctuation">,</span> Connection <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@solana/web3.js&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">MY_TOKEN_MINT_ADDRESS</span> <span class="token operator">=</span> <span class="token string">&quot;BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token function">clusterApiUrl</span><span class="token punctuation">(</span><span class="token string">&quot;devnet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;confirmed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">getProgramAccounts</span><span class="token punctuation">(</span>
    <span class="token constant">TOKEN_PROGRAM_ID</span><span class="token punctuation">,</span> <span class="token comment">// new PublicKey(&quot;TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA&quot;)</span>
    <span class="token punctuation">{</span>
      dataSlice<span class="token operator">:</span> <span class="token punctuation">{</span>
        offset<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
        length<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      filters<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          dataSize<span class="token operator">:</span> <span class="token number">165</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          memcmp<span class="token operator">:</span> <span class="token punctuation">{</span>
            offset<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
            bytes<span class="token operator">:</span> <span class="token constant">MY_TOKEN_MINT_ADDRESS</span><span class="token punctuation">,</span> <span class="token comment">// base58 encoded string</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Found </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>accounts<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> token account(s) for mint </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">MY_TOKEN_MINT_ADDRESS</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>accounts<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/*
  // Output (notice the empty &lt;Buffer &gt; at acccount.data)
  
  Found 3 token account(s) for mint BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf
  [
    {
      account: {
        data: &lt;Buffer &gt;,
        executable: false,
        lamports: 2039280,
        owner: [PublicKey],
        rentEpoch: 228
      },
      pubkey: PublicKey {
        _bn: &lt;BN: a8aca7a3132e74db2ca37bfcd66f4450f4631a5464b62fffbd83c48ef814d8d7&gt;
      }
    },
    {
      account: {
        data: &lt;Buffer &gt;,
        executable: false,
        lamports: 2039280,
        owner: [PublicKey],
        rentEpoch: 228
      },
      pubkey: PublicKey {
        _bn: &lt;BN: ce3b7b906c2ff6c6b62dc4798136ec017611078443918b2fad1cadff3c2e0448&gt;
      }
    },
    {
      account: {
        data: &lt;Buffer &gt;,
        executable: false,
        lamports: 2039280,
        owner: [PublicKey],
        rentEpoch: 228
      },
      pubkey: PublicKey {
        _bn: &lt;BN: d4560e42cb24472b0e1203ff4b0079d6452b19367b701643fa4ac33e0501cb1&gt;
      }
    }
  ]
  */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br></div></div><!--]--></div><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-rust ext-rs line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">solana_client<span class="token punctuation">::</span></span><span class="token punctuation">{</span>
  <span class="token namespace">rpc_client<span class="token punctuation">::</span></span><span class="token class-name">RpcClient</span><span class="token punctuation">,</span> 
  <span class="token namespace">rpc_filter<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">RpcFilterType</span><span class="token punctuation">,</span> <span class="token class-name">Memcmp</span><span class="token punctuation">,</span> <span class="token class-name">MemcmpEncodedBytes</span><span class="token punctuation">,</span> <span class="token class-name">MemcmpEncoding</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token namespace">rpc_config<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">RpcProgramAccountsConfig</span><span class="token punctuation">,</span> <span class="token class-name">RpcAccountInfoConfig</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_sdk<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token namespace">commitment_config<span class="token punctuation">::</span></span><span class="token class-name">CommitmentConfig</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">solana_account_decoder<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">UiAccountEncoding</span><span class="token punctuation">,</span> <span class="token class-name">UiDataSliceConfig</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">MY_TOKEN_MINT_ADDRESS</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span> <span class="token operator">=</span> <span class="token string">&quot;BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> rpc_url <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;http://api.devnet.solana.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> connection <span class="token operator">=</span> <span class="token class-name">RpcClient</span><span class="token punctuation">::</span><span class="token function">new_with_commitment</span><span class="token punctuation">(</span>rpc_url<span class="token punctuation">,</span> <span class="token class-name">CommitmentConfig</span><span class="token punctuation">::</span><span class="token function">confirmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> filters <span class="token operator">=</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token macro property">vec!</span><span class="token punctuation">[</span>
      <span class="token class-name">RpcFilterType</span><span class="token punctuation">::</span><span class="token class-name">Memcmp</span><span class="token punctuation">(</span><span class="token class-name">Memcmp</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>
        <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
        <span class="token class-name">MemcmpEncodedBytes</span><span class="token punctuation">::</span><span class="token class-name">Base58</span><span class="token punctuation">(</span><span class="token constant">MY_TOKEN_MINT_ADDRESS</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token class-name">RpcFilterType</span><span class="token punctuation">::</span><span class="token class-name">DataSize</span><span class="token punctuation">(</span><span class="token number">165</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> accounts <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">get_program_accounts_with_config</span><span class="token punctuation">(</span>
      <span class="token operator">&amp;</span><span class="token namespace">spl_token<span class="token punctuation">::</span></span><span class="token constant">ID</span><span class="token punctuation">,</span>
      <span class="token class-name">RpcProgramAccountsConfig</span> <span class="token punctuation">{</span>
          filters<span class="token punctuation">,</span>
          account_config<span class="token punctuation">:</span> <span class="token class-name">RpcAccountInfoConfig</span> <span class="token punctuation">{</span>
              data_slice<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token class-name">UiDataSliceConfig</span> <span class="token punctuation">{</span>
                  offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
                  length<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// number of bytes</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              encoding<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token class-name">UiAccountEncoding</span><span class="token punctuation">::</span><span class="token class-name">Base64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              commitment<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span><span class="token function">commitment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">..</span><span class="token class-name">RpcAccountInfoConfig</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">..</span><span class="token class-name">RpcProgramAccountsConfig</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Found {:?} token account(s) for mint {MY_TOKEN_MINT_ADDRESS}: &quot;</span><span class="token punctuation">,</span> accounts<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;{:#?}&quot;</span><span class="token punctuation">,</span> accounts<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
// Output (notice zero `len` in `data` of `Account`s)

Found 3 token account(s) for mint BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf: 
[
  (
      tofD3NzLfZ5pWG91JcnbfsAbfMcFF2SRRp3ChnjeTcL,
      Account {
          lamports: 2039280,
          data.len: 0,
          owner: TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA,
          executable: false,
          rent_epoch: 319,
      },
  ),
  (
      CMSC2GeWDsTPjfnhzCZHEqGRjKseBhrWaC2zNcfQQuGS,
      Account {
          lamports: 2039280,
          data.len: 0,
          owner: TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA,
          executable: false,
          rent_epoch: 318,
      },
  ),
  (
      Et3bNDxe2wP1yE5ao6mMvUByQUHg8nZTndpJNvfKLdCb,
      Account {
          lamports: 2039280,
          data.len: 0,
          owner: TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA,
          executable: false,
          rent_epoch: 318,
      },
  ),
]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br></div></div><!--]--></div><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Note: encoding only available for &quot;base58&quot;, &quot;base64&quot; or &quot;base64+zstd&quot;</span>
<span class="token function">curl</span> http://api.mainnet-beta.solana.com -X POST -H <span class="token string">&quot;Content-Type: application/json&quot;</span> -d <span class="token string">&#39;
  {
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;id&quot;: 1,
    &quot;method&quot;: &quot;getProgramAccounts&quot;,
    &quot;params&quot;: [
      &quot;TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA&quot;,
      {
        &quot;encoding&quot;: &quot;base64&quot;,
        &quot;dataSlice&quot;: {
          &quot;offset&quot;: 0,
          &quot;length&quot;: 0
        },
        &quot;filters&quot;: [
          {
            &quot;dataSize&quot;: 165
          },
          {
            &quot;memcmp&quot;: {
              &quot;offset&quot;: 0,
              &quot;bytes&quot;: &quot;BUGuuhPsHpk8YZrL2GctsCtXGneL1gmT5zYb7eMHZDWf&quot;
            }
          }
        ]
      }
    ]
  }
&#39;</span>

<span class="token comment"># Output:</span>
<span class="token comment"># {</span>
<span class="token comment">#   &quot;jsonrpc&quot;: &quot;2.0&quot;,</span>
<span class="token comment">#   &quot;result&quot;: [</span>
<span class="token comment">#     {</span>
<span class="token comment">#       &quot;account&quot;: {</span>
<span class="token comment">#         &quot;data&quot;: [</span>
<span class="token comment">#           &quot;&quot;,</span>
<span class="token comment">#           &quot;base64&quot;</span>
<span class="token comment">#         ],</span>
<span class="token comment">#         &quot;executable&quot;: false,</span>
<span class="token comment">#         &quot;lamports&quot;: 2039280,</span>
<span class="token comment">#         &quot;owner&quot;: &quot;TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA&quot;,</span>
<span class="token comment">#         &quot;rentEpoch&quot;: 313</span>
<span class="token comment">#       },</span>
<span class="token comment">#       &quot;pubkey&quot;: &quot;FqWyVSLQgyRWyG1FuUGtHdTQHrEaBzXh1y9K6uPVTRZ4&quot;</span>
<span class="token comment">#     },</span>
<span class="token comment">#     {</span>
<span class="token comment">#       &quot;account&quot;: {</span>
<span class="token comment">#         &quot;data&quot;: [</span>
<span class="token comment">#           &quot;&quot;,</span>
<span class="token comment">#           &quot;base64&quot;</span>
<span class="token comment">#         ],</span>
<span class="token comment">#         &quot;executable&quot;: false,</span>
<span class="token comment">#         &quot;lamports&quot;: 2039280,</span>
<span class="token comment">#         &quot;owner&quot;: &quot;TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA&quot;,</span>
<span class="token comment">#         &quot;rentEpoch&quot;: 314</span>
<span class="token comment">#       },</span>
<span class="token comment">#       &quot;pubkey&quot;: &quot;CMSC2GeWDsTPjfnhzCZHEqGRjKseBhrWaC2zNcfQQuGS&quot;</span>
<span class="token comment">#     },</span>
<span class="token comment">#     {</span>
<span class="token comment">#       &quot;account&quot;: {</span>
<span class="token comment">#         &quot;data&quot;: [</span>
<span class="token comment">#           &quot;&quot;,</span>
<span class="token comment">#           &quot;base64&quot;</span>
<span class="token comment">#         ],</span>
<span class="token comment">#         &quot;executable&quot;: false,</span>
<span class="token comment">#         &quot;lamports&quot;: 2039280,</span>
<span class="token comment">#         &quot;owner&quot;: &quot;TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA&quot;,</span>
<span class="token comment">#         &quot;rentEpoch&quot;: 314</span>
<span class="token comment">#       },</span>
<span class="token comment">#       &quot;pubkey&quot;: &quot;61NfACb21WvuEzxyiJoxBrivpiLQ79gLBxzFo85BiJ2U&quot;</span>
<span class="token comment">#     },</span>
<span class="token comment">#     {</span>
<span class="token comment">#       &quot;account&quot;: {</span>
<span class="token comment">#         &quot;data&quot;: [</span>
<span class="token comment">#           &quot;&quot;,</span>
<span class="token comment">#           &quot;base64&quot;</span>
<span class="token comment">#         ],</span>
<span class="token comment">#         &quot;executable&quot;: false,</span>
<span class="token comment">#         &quot;lamports&quot;: 2039280,</span>
<span class="token comment">#         &quot;owner&quot;: &quot;TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA&quot;,</span>
<span class="token comment">#         &quot;rentEpoch&quot;: 313</span>
<span class="token comment">#       },</span>
<span class="token comment">#       &quot;pubkey&quot;: &quot;Et3bNDxe2wP1yE5ao6mMvUByQUHg8nZTndpJNvfKLdCb&quot;</span>
<span class="token comment">#     }</span>
<span class="token comment">#   ],</span>
<span class="token comment">#   &quot;id&quot;: 1</span>
<span class="token comment"># }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br></div></div><!--]--></div><!--]--></div><p>Ao combinar os três parâmetros (<code>dataSlice</code>, <code>dataSize</code>, e <code>memcmp</code>), podemos limitar o escopo da nossa consulta e retornar eficientemente apenas os dados que nos interessam.</p><h2 id="outros-recursos" tabindex="-1"><a class="header-anchor" href="#outros-recursos" aria-hidden="true">#</a> Outros recursos</h2><ul><li><a href="https://docs.solana.com/developing/clients/jsonrpc-api#getprogramaccounts" target="_blank" rel="noopener noreferrer">Documentação da API RPC<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://solana-labs.github.io/solana-web3.js/classes/Connection.html#getProgramAccounts" target="_blank" rel="noopener noreferrer">Documentação do Web3js<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://solana-labs.github.io/solana-web3.js/classes/Connection.html#getParsedProgramAccounts" target="_blank" rel="noopener noreferrer">Documentação do Web3js analisado em JSON<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: danicuki@gmail.com">Daniel Cukier</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/pt/guides/serialization.html" class="" aria-label="Serializando Dados"><!--[--><!--]--> Serializando Dados <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.07ce7a66.js" defer></script>
  </body>
</html>
